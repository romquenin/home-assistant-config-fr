<!DOCTYPE html>
<head>
    <title>Home Assistant Control Panel</title>
    <meta name="description" content="A tablet based Control Panel for Home Assistant. Simple home automation software - download or hook in today">

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">

    <style>
        html{width:100%;padding:0;margin:0;text-align:center;position:relative;font-size:1vw;line-height: 1.5em}
body{width:100%;min-height:100vh;padding:0;margin:0;text-align:center;overflow-x:hidden;overflow-y:scroll;position:relative;-ms-overflow-style:none;-webkit-backface-visibility: hidden;color: #222;}
body::-webkit-scrollbar{width:0px}
img{border-width:0;}
*, *:before, *:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;min-height:1px;}
div{z-index:1}
a{text-decoration:none;cursor:pointer;}
a:hover{}
a h1{display:inline-block;}
h1,h2,h3,h4{margin:0;padding:0; line-height: 1em}
h1 {font-size: 3rem;font-weight: 700;}
h2 {font-size: 2.5rem;font-weight: 700;}
h3 {font-size: 2rem;font-weight: 700;}
h4,h1.small {font-size: 1.5rem;font-weight: 700;}
h1.big:not(.small), .big h1:not(.small),h1.text-big:not(.small), .text-big h1:not(.small) {font-size: 6rem;font-weight: 700;}
h2.big, .big h2,.text-big h2, h2.text-big {font-size: 4.5rem;font-weight: 700;}
h3.big, .big h3,.text-big h3, h3.text-big {font-size: 3rem;font-weight: 700;}
h4.big, .big h4,.text-big h4, h4.text-big {font-size: 2.5rem;font-weight: 700;}
.biggest{font-size:8vw}
h1.underline:after,h2.underline:after,h3.underline:after,h4.underline:after {background: none repeat scroll 0 0 rgba(18, 194, 222, 1);bottom: -10px;content: "";display: block;height: 5px;position: relative;width: 50px;margin-bottom:1em;}
highlight{padding:0.3rem;background:#FFF886;}
img:not(.inline){position:relative;max-width:100%;z-index:2;}
img.inline{vertical-align: middle;}
background{padding:0.3rem;background:#ccc;}
p{position:relative;-webkit-margin-before:0;-webkit-margin-after:0;z-index:50;word-wrap:break-word;text-align:inherit;margin-bottom:0.5rem;}
p + p{margin-top:0.5rem;}
p + li, p + ul, p + ol{padding-top:0;margin-top:0;}
p.spaced{line-height: 1.8em; margin-bottom:0; padding-bottom:0;}
sup{color:#aaa; padding-left:0.2em; font-size: 0.7em}
pre{text-align:left;white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap; white-space: -o-pre-wrap;word-wrap: break-word; }
xmp{padding:2rem;}
strikethrough,.strikethrough{text-decoration:line-through;}
span{}
ul,ol{padding-left: 2em;list-style-position: outside;}
li, ol li{text-indent:0rem;margin-left:0;padding-left: 0; padding-bottom:1.25em}
li.no-bullet{list-style-type:none;text-indent: 0rem;}
li.selectable{margin:0;list-style-type:none;text-indent: 0rem;}
li.selectable:hover{cursor:pointer;}
ul.selectable{position:absolute;left:0px;width:100%;padding:0;margin:0;border:1px solid #ccc;max-height:40rem;overflow-y:auto;z-index:999;}
ul.selectable li.title{margin:0;list-style-type:none;padding:1rem;font-weight:bold;}
*:focus{outline:none;-webkit-box-shadow:none;box-shadow:none;}
[contenteditable]:hover{background-color: rgba(200,200,200,0.1)}
input[type=text],input[type=password],input[type=email],input[type=file],input[type=date],input[type=color],input[type=number],input[type=month],input[type=search],input[type=tel],input[type=time],input[type=url],input[type=week],input[type=range]{position:relative;width:100%;font:inherit;padding:0.55rem;border:none;border:1px solid #ccc;margin-bottom:1%;}
input.no-border{border: none;padding:0.55rem;margin-bottom:1%;}
input.no-margin{margin:0;}
input.no-padding{padding:0}
input.inline{width:80%;}
input.bold{font-weight:bold;}
.content input[type=text] + a{position:relative;top:-1.5rem;margin-left:0.5rem;}
textarea{width:100%;font:inherit;color:inherit;padding:0.7rem;border:1px solid #ccc;resize:none;}
select{border:none;font:inherit;color:inherit;}
input[type=radio].styled, input[type=checkbox].styled{display:none;}
input[type=radio] + label:before{border-radius:1rem;}
input[type=radio]:checked + label:before{border-radius:1rem;background:#aaa;}
input[type=checkbox]:checked + label:before{background:#aaa;}
select.valid,input.valid,textarea.valid{border:1px solid rgb(72, 222, 72)}
select.invalid,input.invalid,textarea.invalid{border:1px solid rgb(222, 72, 72)}
button,.btn{display:inline-block;flex-direction:row;align-items:center;justify-content:center;text-align:center;position:relative;cursor:pointer;background-color:#ccc;color:white;font-size:0.9em;line-height:1rem;padding:0.8rem 1.2rem 0.8rem 1.2rem; border-radius:2px;border:none; text-transform: uppercase;}
a.btn{position:relative;top:1px;}
button a{color:white !important}
button:after,.btn:after {content: '';position: absolute;width: 100%; height:100%;top:0; left:0;background-color:rgba(255,255,255,0.3);opacity: 0;transition: all 0.2s;-webkit-transition: all 0.2s;}
button:hover:after,.btn:hover:after {opacity: 1;}
button.shadow,.btn.shadow{-webkit-box-shadow: 0px 15px 9px -12px rgba(0,0,0,0.38);-moz-box-shadow: 0px 15px 9px -12px rgba(0,0,0,0.38);box-shadow: 0px 15px 9px -12px rgba(0,0,0,0.38);}
input[type=text].inline{width:calc(100% - 100px); height:34px}
input[type=text].inline + button{position:relative;width:100px;box-shadow:none;margin:0;padding:calc(0.7rem + 0.5px);top:1px;}
input[type=submit]{padding:1rem;border:0 none;cursor:pointer;-webkit-border-radius:5px;border-radius:5px;margin-bottom:0.2rem;}
input[type=submit].red{background:#c40000;}
input[type=submit].blue{background:#0000c4;}
input[type=submit].green{background:#00c400;}
input[type=submit].grey{background:#ccc;}
select{-webkit-appearance: none;-moz-appearance: none;appearance: none;background: rgb(255,255,255) url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAABG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+Gkqr6gAAF/ppQ0NQRGlzcGxheQAAWIWlWXVcVN+232cShmHo7u7u7u5OgaE7hgaDEgkVQUApEVQQVLAIEQtBRBFBBQxEQhoVVFBK3gHR33333vfX25/P2efLOmuvvWrHYgBg7Qz1CYtGUAMQFh5DsjXS5XZ2ceXGTgAEoABYwAhoiD7RkTrW1ubg/2yrQwDaeb+U2JH1f/P910bj6xftAwBkDeMY32ifMBh3AoBs9YkkxQCA3g/T+eNjInfwWRjTk2AFYXxzBwf8xo93sPdvPLLLY2+rB+MlAMjwRCIpAADKTZjOHecTAMshsAOAoQ33DQqHWaVhrOkTSPQFgDUS5hEPC4vYweUwFvb+FzkB/0um91+ZRGLAX/zblt1Gph8UHRlKTPxjJxnQB0EgGkSCUEAEf8n//xYWGvtnTk74wUeH2JnBb0bYjwk+RAM7GDPD+Hign4n5Hr0mMkbXdo/eHhRjYr/jMxi/Cow1dtjDs7EhDjowhn0FbYZEmO3w4wFAMId7W1rBmBbG/D7Req6/ZSIUkwLtnfZ4zH399A1gDGcVwpkUYfuHPzA6zu4PPSkpUM/yD38w0XQn/gQY5xBJu7bAOiBO+4Ua7czLC+PLkTHW9ntz9YWHWu7ZgvjoTzK03cPrftG79u7OFRNob/xbPpI6Bk6I3zKR7P5Bhia/dUBKB5KM/9C1I0N3cxwei7Qnxdru+IEfxv5+4Q57MpE5vkR9s98+QZYDQziOJOAHvEE4mAPcwBzowTH+3XPD9HC49wERcLwjAImb6s8X9DR6AD2BHkSPod/85db7wwfniC/8/kP3+Re6HUgCn2CpfnAW7c2GYkVpotRQ5nCvDT+yKGWUyp9vfYsti3+1+q1rADxWYo+iu6d9HCxx6w+fZ1Aa6d/GeP8d8Z86GYKPu1L3OKQvSc9Jb/4Z/4/FGAOMPsYYY4gRQWYhbyC7kQ+QPch2ZAvgRt5DtiJ7kXd28L/NQtzzCmnXXjN4Rj8Qu/tX+H/VKPYvxx6VIEpQALa7/CHwt6C/Mzjuah30H1Ji4ccblhQMfzP7a+MfTwvC3lVA6aI0YD/DPkYxoliBBEoe9rgOSguOgQJM1fv3UXu9BPDf9WXcri0hYBrGYTF+CTE7ia4XEZlICgoIjOHWiYwM9RPnNgn3kRTnlpWWUQY7e/Hvpf3NdnePhRif/0PzmwVAHc5j8v5/aMEnAajvAoAp5x+aoBsALOIAXHvhE0uK+01D7XRogANUcPazwDsHHxCG9ZQFikANaAMDYAqsgD1wAR6wdwNBGKxxPNgPUkEmyAUnQBEoBZXgHLgIroDroAW0gwfgEXgK+sEgeAfGwBRYAEtgFWxAEISFKCE6iAXiggQgMUgWUoY0IQPIHLKFXCAvKAAKh2Kh/VA6lAsVQKVQFVQHXYNuQQ+gHmgAegONQ3PQV2gdgUTgEfQIDoQgQgqhjNBBmCHsEfsQAYgoRBIiA3EccRpRjbiMaEY8QDxFDCLGEAuIFSRAUiAZkTxICaQyUg9phXRF+iNJyIPIHGQxshrZgGyDc/Elcgy5iFxDYVB0KG6UBBxJY5QDygcVhTqIOooqRV1ENaM6US9R46gl1C80JZodLYZWRZugndEB6Hh0JroYXYNuQnfB63kKvYrBYBgxQhglONtdMMGYZMxRTAWmEXMfM4CZxKxgsVgWrBhWA2uFJWJjsJnYEuxl7D3sC+wU9icZBRkXmSyZIZkrWThZGlkxWT3ZXbIXZDNkG+TU5ALkquRW5L7kieR55OfJ28ifk0+Rb+BocEI4DZw9LhiXijuNa8B14UZw3ygoKHgpVChsKIIoUihOU1yleEwxTrGGp8WL4vXw7vhY/HF8Lf4+/g3+GyUlpSClNqUrZQzlcco6yoeUo5Q/CXQESYIJwZdwiFBGaCa8IHymIqcSoNKh8qBKoiqmukH1nGqRmpxakFqPmkh9kLqM+hb1MPUKDR2NDI0VTRjNUZp6mh6aWVosrSCtAa0vbQbtOdqHtJN0SDo+Oj06H7p0uvN0XXRT9Bh6IXoT+mD6XPor9H30Swy0DPIMjgwJDGUMdxjGGJGMgowmjKGMeYzXGYcY15k4mHSY/JiymRqYXjD9YGZj1mb2Y85hbmQeZF5n4WYxYAlhyWdpYXnPimIVZbVhjWc9w9rFushGz6bG5sOWw3ad7S07gl2U3ZY9mf0cey/7CgcnhxFHJEcJx0OORU5GTm3OYM5Czrucc1x0XJpcQVyFXPe45rkZuHW4Q7lPc3dyL/Gw8xjzxPJU8fTxbPAK8TrwpvE28r7nw/Ep8/nzFfJ18C3xc/Fb8O/nv8T/VoBcQFkgUOCUQLfAD0EhQSfBI4ItgrNCzEImQklCl4RGhCmFtYSjhKuFX4lgRJRFQkQqRPpFEaIKooGiZaLPxRBiimJBYhViA+JocRXxcPFq8WEJvISORJzEJYlxSUZJc8k0yRbJz1L8Uq5S+VLdUr+kFaRDpc9Lv5OhlTGVSZNpk/kqKyrrI1sm+0qOUs5Q7pBcq9yyvJi8n/wZ+dcKdAoWCkcUOhS2FJUUSYoNinNK/EpeSuVKw8r0ytbKR5Ufq6BVdFUOqbSrrKkqqsaoXlf9oiahFqJWrzarLqTup35efVKDV4OoUaUxpsmt6aV5VnNMi0eLqFWtNaHNp+2rXaM9oyOiE6xzWeezrrQuSbdJ94eeqt4Bvfv6SH0j/Rz9PgNaAweDUoNRQ17DAMNLhktGCkbJRveN0cZmxvnGwyYcJj4mdSZLpkqmB0w7zfBmdmalZhPmouYk8zYLhIWpxUmLEUsBy3DLFitgZWJ10uq9tZB1lPVtG4yNtU2ZzbStjO1+2247OjtPu3q7VXtd+zz7dw7CDrEOHY5Uju6OdY4/nPSdCpzGnKWcDzg/dWF1CXJpdcW6OrrWuK64GbgVuU25K7hnug/tE9qXsK/Hg9Uj1OOOJ5Un0fOGF9rLyavea5NoRawmrnibeJd7L/no+ZzyWfDV9i30nfPT8Cvwm/HX8C/wnw3QCDgZMBeoFVgcuBikF1QatBxsHFwZ/CPEKqQ2ZDvUKbQxjCzMK+xWOG14SHhnBGdEQsRApFhkZuRYlGpUUdQSyYxUEw1F74tujaGHL729scKxh2PH4zTjyuJ+xjvG30igSQhP6E0UTcxOnEkyTLqQjEr2Se7Yz7M/df/4AZ0DVQehg94HOw7xHco4NJVilHIxFZcakvosTTqtIO17ulN6WwZHRkrG5GGjw5cyCZmkzOEjakcqs1BZQVl92XLZJdm/cnxznuRK5xbnbh71OfrkmMyx08e2j/sf78tTzDtzAnMi/MRQvlb+xQKagqSCyZMWJ5sLuQtzCr8XeRb1FMsXV57CnYo9NXba/HRrCX/JiZLN0sDSwTLdssZy9vLs8h8VvhUvzmifaajkqMytXD8bdPZ1lVFVc7VgdfE5zLm4c9PnHc93X1C+UFfDWpNbs1UbXjt20fZiZ51SXV09e33eJcSl2Etzl90v91/Rv9LaINFQ1cjYmHsVXI29On/N69rQdbPrHTeUbzTcFLhZ3kTXlNMMNSc2L7UEtoy1urQO3DK91dGm1tZ0W/J2bTtPe9kdhjt5d3F3M+5u30u6t3I/8v7ig4AHkx2eHe8eOj981WnT2ddl1vX4keGjh9063fceazxu71HtufVE+UnLU8Wnzb0KvU3PFJ419Sn2NT9Xet7ar9LfNqA+cPeF1osHL/VfPnpl8urpoOXgwJDD0Oth9+Gx176vZ9+Evll+G/d2413KCHok5z31++JR9tHqDyIfGscUx+6M64/3TthNvJv0mVz4GP1xcypjmnK6eIZrpm5WdrZ9znCuf95tfmohcmFjMfMTzafyz8Kfb37R/tK75Lw0tUxa3v569BvLt9rv8t87VqxXRlfDVjd+5Pxk+XlxTXmte91pfWYjfhO7eXpLZKvtl9mvke2w7e1IIom4exVAwg/C3x+Ar7VwHeMCAF0/ADjC71ppryHhywcCfjtCBggdpDKKGY3DkGGlyVzI03H38BhKIqGFGkcTSvuEXoGhnAkwh7D0sSmyn+BY4NLmzuMZ4MPxqwi4CIYIhQm7i+iKcoguiz0SL5EIkdSQopT6IN0okyJrI8cj90n+lsJhRRsldqUp5QaVBFUdNZzaS/VyDV9Ncc2vWi3a+3V0dfG6H/Tu6tcbVBjmGx00JppomTKbLpv1mjdYVFhWWbVbT9qi7VjsWR2oHZGOm04bLsCV3I3gTrkPtW/FY8Kz3+s+8YZ3jU+Jb45fon9AgH2gbpB8sGgITyhLGFU4Mvx7xERkf9Rt0vno4zGHYjPjmhJQiX5J9/eDA4IHVQ+ZpLilxqYdTy/KSD4sf3gyM++IdZZANkUOyEUcpTkmfFwzz/KEU75rgetJ50LHIvtim1OWp81KjEp1yzTLVSrkzkhUip6VrjKrTj83dsGk5nLtQh1NvcAlmctqV/QbLBqdrnpeC7weeSP+5sGmtObDLVmtubfy2opul7fX3Ll5t+ve8P2xB0MdjQ/9O5k7H3cVP4rv9n+8r8fpic1Ts16jZ8Z99s+j+s8OvHlJ8UpqUG/IZNjgtfIbgbeEt2vvZkdev38weu5D+ljAuMOE5aTFR6spq2nTGZVZptmxuZx5+fmxhYuLSZ+MP5N9rvti9GVy6dxywlePb1bfLVaCVzt+Hllv2dLf3t6LvwwShZxDjaEnMUtkSHJFXCBFOX6MIEoVT/2IloUukf4VoyxTGvN7VgW2TPZ+TlYuZ+58nnbeEb4V/lWBecFnQueESSKaomSir8QqxYMlFCR+ST6SOi7tJMMlMyPbIBcnr6EAKXQp5ihZKdMpD6mUqLqpcaiNwFngrsmiOax1SttNR1BnQ3dQ75r+UQM/Q3UjGqNp43aTItM4Mz9zb4tAywirMGtvGytbNTtRezYHgiPCcdVpxnnI5aFrg1uZe86+JI8gT2cvfaKUN7MP5DPvO+jX6d8UUBNYHJQRHBHiEqodJhROCWfCeORo1PdonhjP2JK4B/GvEyYTF5PW9lMc4DwofIg7BZPyIbUpLS+dlOFx2CHT+UhQVnp2Rc6V3KajzcduHr+Wd+VEXf6FgrMnywqLivKKs0+lnU4siSgNKAsqT6m4Vyly9mK10LmC8y8vrNUSLrLW8dWLwnmgdEWzQb/R4qrLtdDrmTfO3bzbNNA82jLb+q0NeZupXeyO2l3te0r3eR4gHkx0dD9s6qztKnt0ovvw46Qe0pOYp9m97X2Mzw/0v3/B+lLrlf2g/1DK8IXXz998f0c7IvHefDTyw6mx2+MvJkYnJz4uTKPh6KfODSzQLEp/Uvgs+IXqy8+l6eXhr0++3fpetXJo1fGH0I/Vn+1rSetqG/hN/a25vfhLQguICqQHSgSNRS9j5rDzZBPkyxQ4vAClDsGVKpX6Ms0A7Ta9AIMBYzDTYeZKlpusXWyP2R9x3Oas4krg1uVe5znPa8a7wJfFL8TfIeAhsCZYKCQt9EQ4QAQrUitqLDojlikuLN4l4SMJJCuk1KVeS8fCt5tGWXPZWbl0eU75VgVbhUXFw0pcSi3wrWVW5ZAqo+olNR21F+o+6p81kjWxmmVa8lpD2kk6nDqtula6b/QC9bb1qw2sDckNHxrtN5Y3njepNnU3YzYbMi+ysLOksuyxSrdWs/5u02gbYidk99G+ymGfI4vjK6c8Z2PnbZcm11A3frf37sX7LPetehR6Cnje9NLxektM8Ob1fg3vI4F+Rv5KASqBJkHE4LAQYqhWGHXYSPiFiLBIhcjNqIeknGjrGIaYd7GVcb7xgvHTCWcSDRJHkkKT6ZNf7r994O7BzkMPU26l1qUVp6dnRBx2yzQ4IpqFznqVXZLjmsufu3F07Niz47fyzp44mO9WoHqS9eRa4VDR9eJTp46dLiipKr1R9qj8dcX8mY2zlFXc1XLnjM+7X4ioOVibffFoXUo98ZLSZcLlr1c+NaxdxV/jvC57w/pmctPN5p+tKrci20puX21vvXP7bs+9lQdGHbc67bpWuot75J686j3W59Vv8kLnle5Q6BvCyMJE3/zK97Wd+P/+n9lOwygCcDIVAOdMABy0AMjvhOvMQbjuxAFgTQmAvQpACPoDBL4XQKrjf88PCD5tMIAC0ABmwAWEgDRQhetjK+AKV8jRcHWZB86ABnAXPAfj4DtcObJDMpAR5AnFQ/nQZegxNI3AIIQR5ohoRAVc523DdV0c8hbyF8oIdRI1gZZDZ6E/YFQxJZgNuMJ6QqZEVkvORp6Po8BlU+AoTuBZ8bWU8pTtBA1CG5Uy1W1qY+p3NDG01LRX6PTpBujt6QcYrBheMHoy/mQqYdZgHmU5wMrG2sbmwU7O3s4RxynP+Y3rOjeJR4Fnk7ebr5g/UEBdkCA4JnRDOEvEW1RHTFCcIL4h8Vnyo9SgdJNMsqyM7KhclryC/BeFVsUCpURlXxVzVWk1JnWChqRmmbaYzjHdHr0vBmSGDEYsxuwm/KbyZpbmURanLTutvtrw2TrZHbfvdkQ56TtnuvS6Mbp776v3+OiFIdJ4Y7xXfKZ8R/zmA6gCzYKKgmdC1cMKwz9HmkbVR+NjomLfxhsmtCZJJNcc4D5YlsKYmp+Oy0g9vHIkOGshJ/do2PGmfJqTrIWfiutOe5YylvVXHKs0OrtSnXee/kJWzerFkLqvl05cMWikubp8ffrmbPNC60zbZPvyPaYHeg89ury67Xq0nko9E3muOBD+8ucw6i35SOUHuvG7U4TZ/Qs6nxq/bHxV/G64ivtx7OeTtdn1qY03mze3Tvzy3pbe3T924o8FeEALWAAPEAVyQAMYA3vgBcJAMsgGJaAO3AJPwXuwBKEhVkh6N/qJUCF0FeqDPiGoEHIIV0Q64jpiCsmF9ESeRy6iFFEZqEG0CDoVPQLHvgwLsIHYQTIDslZyKfJ6nAjuMoU8xT28NX6SMoFATiii4qG6Ctev72jiaRlpW+gc6T7RH2DAMZxmlGB8whTBzMR8nyWIlZ71PlsEOz/7CEcJpzMXM9cb7goeX15pPsD3iv+SQIagu5A8XMvNi/SK3oBPsTyJdMn9UjHSPjLasnjZPrkceTMFJoVlxTdK3crNKtWqR9WS1OM0sjVbtX7oyOn66uXq1xg0G942um18x6THdNwcYSFq6Wh12LrFZtGO397TocJx1JnXJdi12R27z8mj1LPLa4DY4V3nk+Ub5GfrbxzgEpgWdD+EMtQ7rD2CNTIp6n20bkxdHFV8ZMLTJJ7kuP39BxUOnU9lSyvMwB1OzlzMImZP5CYdk85DnHhfcK0wrlj+1NeSa2WxFapn1s/WVMueqzg/UyNUG3jxaj3TpfIrGg2frpZcV7nR10Rs3mitbrNpB3fq7pnfX+6o7PR+pPqY5wnq6bNncc8x/Tkv8C+rBz2HLd6Evqt9PzPGNWH9MXX67hzTwonPgkvPvhWuHl0z2ZDdPLP18dfyXvxRgBxQw6ufB4gBRaAHrIEHHPsD8MqvAjfBYzAKr3s8JAhpQ/ugZKgMugONI8jhqBMRRYh+JAPSD3kHxY5KQc2jXdDPMHqYO1gN7AMyc7L35NE4KtxVCkc8Et9CGUWQIfyk6qIuoYmldaEzoTdlsGE0ZVJiFmFRYPVkS2SP4fDmtOey5LbgseA157PgtxXwFIwWOiZcL/JYdE6cUkJJ0l+qVHpIllXOV75RYUPJWvmZara6iyZa64T2pq6ZXjocwRbDdqO7xn0mG2Zm5s2WklaXbSRtm+31HIacwlxwrpfdHT1ovCi8PX3d/D4GqAXmBk2H2Ib2hltEvIhyI83GJMdxxo8mPkq+f6DikEPKelpVhmMm15Gl7Du5R4/55xnlsxQ8LfQvWj2VXkJTWl2uWPGs0r8Kqi4/r3xhsDa2jq3+8eVDDUZXpa4b3jzUXN2a1+bSznRn+F7ZA5eH2M4Lj+S7b/cYPBnuTeiT6kcOLL2cHRwYzn8j9Lbi3a/3BqM5H56OU004TJ79ODctMxMye3bu8fz8IvoT+2fpL/pLTsvEr77frL/zfl9ZObbKvlr/Q+VH6Y+1n04/m9cY10hrzWsb69rrGes9G4QNu41TG/2bZJvamwmb1zbntni2XLYKtp5sbf2S+eX769Svp79+bcts+22f3u7diX+0v5zs7vEB4XUBQI9ub38TBABbAMBW/vb2RvX29tY5uNgYAeB+6O/fYXbPGmoAypd20NPW9ZR///3jfwBTcb34BnW57QAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAfZJREFUeJzt2j+PTFEcxvGvPxUqr0BhG61KopjWK6FSeQHPC0BkKwo6QrMJDRKSaRbNBoloZDaiQqEhI7JYxR7NRtbOzLn2nPh+ypl7nvyS59zMuZkLkiRJkiRJkiRJkiRJkiRJkiRJkiTpf7Rvrwf4myTHgAvASeDInDFfgDXgYpK3dSYbRtOFJDkN3Gf+Irb7DJxJslopr7pmC0lyEHgNLFWOfgOcSPK9cm4V+/d6gB0sUb+M37nHB8itouVCjnaavZCWC3kObAyQu1Gym9RsIUmmwJ0Bom8n+TpAbhXNFlJc6iSzmqYLSfICeFwx8lGSlxXzqmu6kKLmjm767oA+CnnA1vPIol4BDyvkDKr5QpJsUmdnXy5ZTWu+kOIm8GGB9e+BW5VmGVQXhST5BiwvELFcMprXRSHFVWA6x7opcK3yLIPpppAkn4Abcyy9XtZ2oZtCiivALD/MP8uabnRVSJIJsDLDkpUk60PNM4SuCilmOQI3/yC4XXeFJHkKPNnFpatJng09T23dFVLsZud3d3dAv4XcBSY7fD8B7v2jWarqspAkP4Bz/PnEtQmcLdd058BeDzCv8Xi8PhqN3gGngMPl44/A+SSznMSa0uxbJ7uV5BBb72wBrJV/GiVJkiRJkiRJkiRJkiRJkiRJkiRJkiRJw/gFgt5rkQf306oAAAAASUVORK5CYII=') no-repeat 100% 0;background-size: contain;padding: 0.55rem; border: 1px solid #ccc;width: 100%; border-radius:0;}
input.disabled{pointer-events:none;color:#ccc;}
.validation{background:#ddd;position:relative;top:0.2rem;float:right;width:20%;border:1px solid #ccc;border-left:none;border-top-right-radius:1rem;border-bottom-right-radius:1rem;padding:0.7rem;text-align:center;font-size:inherit;color:#aaa;}
ul.dropdown{position:relative;margin:0.7rem 0 0.7rem 0;top:-0.5rem;padding:0.7rem;font:inherit;color:inherit;border:1px solid #ccc;background:white;z-index:999;cursor:pointer;}
ul.dropdown li{list-style-type:none;margin:0;padding:1rem;width:100%;background:#fff;cursor:pointer;}
ul.dropdown li:hover{}
ul.dropdown li a{color:inherit;}
ul.dropdown .arrow{position:absolute;float:right;}
ul.dropdown .pulldown{position:absolute;left:-1px;top:2.7rem;width:100.5%;display:none;background:#fff;margin-bottom:3rem;border-right:1px solid #ccc;border-bottom:1px solid #ccc;border-left:1px solid #ccc;z-index:999;max-height:30rem;overflow-y:auto;}
form .text-right p{margin-top:0.6rem;}
.arrow{position:relative;top:50%;width:0.5rem;height:0.5rem;margin:1%;display:inline-block;border-right:0.2rem solid rgba(40,40,40,0.7);border-bottom:0.2rem solid rgba(40,40,40,0.7);}
.arrow.white{border-right:0.2rem solid rgba(255,255,255,1);border-bottom:0.2rem solid rgba(255,255,255,1);}
.arrow.up{margin-top:-0.6rem;-ms-transform:rotate(225deg);-webkit-transform:rotate(225deg);transform:rotate(225deg);}
.arrow.right{-ms-transform:rotate(315deg);-webkit-transform:rotate(315deg);transform:rotate(315deg);top:0.5rem;}
.arrow.down{top:0rem;left:0rem;-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);}
.arrow.left{-ms-transform:rotate(135deg);-webkit-transform:rotate(135deg);transform:rotate(135deg);top:0.5rem;}
.square{height:0;padding-bottom:100%;width:100%;}
.ar169{height:0;padding-bottom:45%;width:100%;}
.icon{max-height:150px;margin:0 0.5rem 0 0.5rem;width:auto;vertical-align:middle;}
.table-icon{max-height:1rem;display:inline-block;}
.tick, .cross, .next, .dot{display:inline-block;}
.tick:after{content:"\2713";}
.cross{position:relative;top:-0.05rem;}
.cross:after{content:"\2297";}
.next:after{content:"\232a";}
.dot:before{content:"\00b7";}
div[class^=w],a[class^=w],.card,.image-card{font-size: 1rem;margin:auto;}
div[class^=w].small,a[class^=w].small,.card.small,.image-card.small{font-size: 0.8rem;}
.menu{}
.menu > a, .menu > span, .menu > p{display:block;width:100%;padding:1rem;}
.menu.no-padding-children a,.menu.no-padding-children span,.menu.no-padding-children p{padding:0;}
.menu a:hover{}
.menu a.active{}
.menu ul.dropdown{background:none;border:none;position:relative;margin:0;padding:0.3rem;}
.menu ul.dropdown .arrow{margin-top:0.8rem;}
.menu ul.dropdown span{padding:1.1rem 0.7rem 1.1rem 0.7rem;}
.menu ul.dropdown .pulldown{border:none;top:3.7rem;background-color:inherit;}
.menu ul.dropdown .pulldown a{position:relative;}
.menu ul.dropdown .pulldown a:hover{}
.relative{position:relative;}
.absolute{position:absolute;}
img.absolute{position: absolute};
.fixed{position:fixed;}
.fixed.top.left{position:fixed;top:0px;left:0px;}
.fixed.top.right{position:fixed;top:0px;right:0px;}
.fixed.bottom.left{position:fixed;bottom:0px;left:0px;}
.fixed.bottom.right{position:fixed;bottom:0px;right:0px;}
.fixed.bottom.right{position:fixed;bottom:0px;right:0px;}
.absolute.bottom.left{position:absolute;bottom:0px;left:0px;}
.absolute.bottom.right{position:absolute;bottom:0px;right:0px;}
.absolute.left{position:absolute;left:0px;}
.absolute.top.left{position:absolute;top:0px;left:0px;}
.absolute.top.right{position:absolute;top:0px;right:0px;}
.layer0,.layer-0{position:relative;z-index:-1;}
.layer1,.layer-1{position:relative;z-index:1;}
.layer2,.layer-2{position:relative;z-index:100;}
.layer3,.layer-3{position:relative;z-index:200;}
.layer4,.layer-4{position:relative;z-index:300;}
.layer5,.layer-5{position:relative;z-index:400;}
.layer6,.layer-6{position:relative;z-index:500;}
.layer-top{position:relative;z-index:800;}
.absolute.layer0, .absolute .layer0{position:absolute;z-index:-1;}
.absolute.layer1, .absolute .layer1{position:absolute;z-index:0;}
.absolute.layer2, .absolute .layer2{position:absolute;z-index:10;}
.absolute.layer3, .absolute .layer3{position:absolute;z-index:20;}
.absolute.layer-top, .absolute .layer-top{position:absolute;z-index:800;}
.fixed.layer0, .fixed .layer0{position:fixed;z-index:-1;}
.fixed.layer1, .fixed .layer1{position:fixed;z-index:0;}
.fixed.layer2, .fixed .layer2{position:fixed;z-index:10;}
.fixed.layer3, .fixed .layer3{position:fixed;z-index:20;}
.fixed.layer-top, .fixed .layer-top{position:fixed;z-index:999;}
.clear{clear:both;}
.clear-after:after{clear:both;}
.clear-before:before{clear:both;}
.clear-right{clear:right;}
.clear-left{clear:left;}
.no-wrap{white-space: nowrap;text-overflow: ellipsis;}
.inline{display:inline;}
.block{display:block;}
.inline-block{display:inline-block;vertical-align:middle;}
.inline-block.top{display:inline-block;vertical-align:top;}
.flex{display:flex;}
.flex-all *{display:flex;}
.flex-none{flex:none;}
.inline-flex{display:inline-flex;text-align:left;}
.flex.row{flex-direction:row;}
.flex.column{flex-direction:column;}
.flex.row-reverse{flex-direction:row-reverse;}
.flex.column-reverse{flex-direction:column-reverse;}
.flex-0{flex:0}
.flex-1{flex:1}
.flex-2{flex:2}
.flex-3{flex:3}

.indent{position:relative;left:2rem;}
.cell.indent{position:relative;left:0;padding-left:2rem;}
.float-left{float:left;}
.float-right{float:right;}
.width-auto, .wa{width:auto;}
.width-full, .w100{width:100%;}
.height-full, .h100, .fh100{height:100%;}
.width-half, {width:50%;}
.height-auto, .ha{height:auto;}
.height-half, .h50{height:50%;}
.container,.row{display: block;font-size:0;max-width:100%;margin:auto;}
.container > *, .row > *{font-size:1vw}
.w100,.w90,.w80,.w75,.w66,.w60,.w50,.w40,.w33,.w30,.w25,.w20,.w15,.w10{display:inline-block;vertical-align: top; background-size: cover;background-position: center center;position:relative;}
.w100.middle,.w90.middle,.w80.middle,.w75.middle,.w66.middle,.w60.middle,.w50.middle,.w40.middle,.w33.middle,.w30.middle,.w25.middle,.w20.middle,.w15.middle,.w10.middle{vertical-align: middle}
.w100.top,.w90.top,.w80.top,.w75.top,.w66.top,.w60.top,.w50.top,.w40.top,.w33.top,.w30.top,.w25.top,.w20.top,.w15.top,.w10.top{vertical-align: top}
.w100.bottom,.w90.bottom,.w80.bottom,.w75.bottom,.w66.bottom,.w60.bottom,.w50.bottom,.w40.bottom,.w33.bottom,.w30.bottom,.w25.bottom,.w20.bottom,.w15.bottom,.w10.bottom{vertical-align: bottom}

.w100{width:100%}
.w90{width:90%;margin:auto;}
.w90.margin-right{width:calc(90% - 0.5rem);margin-right:1rem;}

.w80{width:80% ;margin:auto}
.w80.margin-right{width:calc(80% - 0.5rem);margin-right:1rem;}
.w80.margin{width:calc(80% - 0.5rem); margin: 0 1rem 1rem 0;}
.w20.margin + .w80.margin,.w20.margin-right + .w80.margin-right{width:calc(80% - 0.25rem);margin-right:0;}

.w75{width:75%;margin:auto}
.w75.margin-right{width:calc(75% - 0.5rem); margin-right: 1rem;}
.w75.margin{width:calc(75% - 0.5rem); margin: 0 1rem 1rem 0;}
.w25.margin + .w75.margin,.w25.margin-right + .w75.margin-right{width:calc(75% - 0.25rem);margin-right:0;}

.w70{width:70%;margin:auto}
.w70.margin-right{width:calc(70% - 0.5rem); margin-right: 1rem;}
.w70.margin{width:calc(70% - 0.5rem); margin: 0 1rem 1rem 0;}

.w66{width:66.67%;margin:auto}
.w66.margin-right{width:calc(66.83% - 0.5rem); margin-right: 1rem;}
.w66.margin{width:calc(66.83% - 0.5rem); margin: 0 1rem 1rem 0;}
.w33.margin-right + .w66.margin-right,.w33.margin + .w66.margin{width:calc(66.83% - 0.5rem);margin-right:0;}

.w60{width:60%;margin:auto}
.w60.margin-right{width:calc(60% - 0.5rem); margin-right: 1rem;}
.w60.margin{width:calc(60% - 0.5rem); margin: 0 1rem 1rem 0;}
.w40.margin-right + .w60.margin-right,.w40.margin + .w60.margin{width:calc(60% - 0.5rem);margin-right:0;}

.w50{width:50%;margin:auto}
.w50.margin-right{width:calc(50% - 0.5rem); margin-right: 1rem;}
.w50.margin{width:calc(50% - 0.5rem); margin: 0 1rem 1rem 0;}
.w50.margin-right:nth-of-type(2n),.w50.margin:nth-of-type(2n){margin-right:0}

.w40{width:40%;margin:auto}
.w40.margin-right{width:calc(40% - 1rem); margin-right: 1rem;}
.w40.margin{width:calc(40% - (1rem / 2)) ; margin: 0 1rem 1rem 0;}
.w60.margin-right + .w40.margin-right,.w60.margin + .w40.margin{width:calc(40% - 0.5rem);margin-right:0;}

.w33{width:33.3%;margin:auto}
.w33.margin-right{width:calc(33.3% - 0.66rem); margin-right: 1rem;}
.w33.margin{width:calc(33.3% - 0.66rem); margin: 0 1rem 1rem 0;}
.w33.margin-right:nth-of-type(3n),.w33.margin:nth-of-type(3n){margin-right:0}
.w66.margin-right + .w33.margin-right,.w66.margin + .w33.margin{width:calc(33.17% - 0.5rem);margin-right:0;}

.w30{width:30%;margin:auto}
.w30.margin-right{width:calc(30% - 0.5rem); margin-right: 1rem;}
.w30.margin{width:calc(30% - 0.5rem); margin: 0 1rem 1rem 0;}
.w70.margin + .w30.margin,.w70.margin-right + .w30.margin-right{width:calc(30% - 0.5rem);margin-right:0;}

.w25{width:25%;margin:auto}
.w25.square{height:0;padding-bottom:25%}
.w25.margin-right{width:calc(25% - 0.75rem); margin-right: 1rem;}
.w25.margin{width:calc(25% - 0.75rem); margin: 0 1rem 1rem 0;}
.w25.margin-right:nth-of-type(4n),.w25.margin:nth-of-type(4n){margin-right:0}
.overflow-x .w25.margin-right:nth-of-type(4n){margin-right: 1rem;}
.overflow-x .w25.margin:nth-of-type(4n){margin: 0 1rem 1rem 0;}
.w75.margin + .w25.margin,.w75.margin-right + .w25.margin-right{width:calc(25% - 0.5rem);margin-right:0;}

.w20{width:20%;margin:auto}
.w20.square{height:0;padding-bottom:20%;}
.w20.margin-right{width:calc(20% - 0.8rem); margin-right: 1rem;}
.w20.margin{width:calc(20% - 0.8rem); margin: 0 1rem 1rem 0;}
.w20.square.margin{height:0;padding-bottom:calc(20% - 0.8rem) !important;}
.w20.margin-right:nth-of-type(5n),.w20.margin:nth-of-type(5n){margin-right:0}

.w10{width:10%;margin:auto}
.w10.margin-right{width:calc(10% - 0.9rem); margin-right: 1rem;}
.w10.margin{width:calc(10% - 0.9rem); margin: 0 1rem 1rem 0;}
.w10.margin-right:nth-of-type(10n),.w10.margin:nth-of-type(10n){margin-right:0}

.block-100,.block-90,.block-80,.block-75,.block-66,.block-60,.block-50,.block-40,.block-33,.block-30,.block-25,.block-20,.block-15,.block-10{display:inline-block;vertical-align: top; background-size: cover;background-position: center center;position:relative;}
.block-100.middle,.block-90.middle,.block-80.middle,.block-75.middle,.block-66.middle,.block-60.middle,.block-50.middle,.block-40.middle,.block-33.middle,.block-30.middle,.block-25.middle,.block-20.middle,.block-15.middle,.block-10.middle{vertical-align: middle}
.block-100.top,.block-90.top,.block-80.top,.block-75.top,.block-66.top,.block-60.top,.block-50.top,.block-40.top,.block-33.top,.block-30.top,.block-25.top,.block-20.top,.block-15.top,.block-10.top{vertical-align: top}
.block-100.bottom,.block-90.bottom,.block-80.bottom,.block-75.bottom,.block-66.bottom,.block-60.bottom,.block-50.bottom,.block-40.bottom,.block-33.bottom,.block-30.bottom,.block-25.bottom,.block-20.bottom,.block-15.bottom,.block-10.bottom{vertical-align: bottom}

.block-100{width:100%}
.block-90{width:90%;margin:auto;}
.block-90.margin-right{width:calc(90% - 0.5rem);margin-right:1rem;}

.block-80{width:80% ;margin:auto}
.block-80.margin-right{width:calc(80% - 0.5rem);margin-right:1rem;}
.block-80.margin{width:calc(80% - 0.5rem); margin: 0 1rem 1rem 0;}
.block-20.margin + .block-80.margin,.block-20.margin-right + .block-80.margin-right{width:calc(80% - 0.25rem);margin-right:0;}

.block-75{width:75%;margin:auto}
.block-75.margin-right{width:calc(75% - 0.5rem); margin-right: 1rem;}
.block-75.margin{width:calc(75% - 0.5rem); margin: 0 1rem 1rem 0;}
.block-25.margin + .block-75.margin,.block-25.margin-right + .block-75.margin-right{width:calc(75% - 0.25rem);margin-right:0;}

.block-70{width:70%;margin:auto}
.block-70.margin-right{width:calc(70% - 0.5rem); margin-right: 1rem;}
.block-70.margin{width:calc(70% - 0.5rem); margin: 0 1rem 1rem 0;}

.block-66{width:66.67%;margin:auto}
.block-66.margin-right{width:calc(66.83% - 0.5rem); margin-right: 1rem;}
.block-66.margin{width:calc(66.83% - 0.5rem); margin: 0 1rem 1rem 0;}
.block-33.margin-right + .block-66.margin-right,.block-33.margin + .block-66.margin{width:calc(66.83% - 0.5rem);margin-right:0;}

.block-60{width:60%;margin:auto}
.block-60.margin-right{width:calc(60% - 0.5rem); margin-right: 1rem;}
.block-60.margin{width:calc(60% - 0.5rem); margin: 0 1rem 1rem 0;}
.block-40.margin-right + .block-60.margin-right,.block-40.margin + .block-60.margin{width:calc(60% - 0.5rem);margin-right:0;}

.block-50{width:50%;margin:auto}
.block-50.margin-right{width:calc(50% - 0.5rem); margin-right: 1rem;}
.block-50.margin{width:calc(50% - 0.5rem); margin: 0 1rem 1rem 0;}
.block-50.margin-right:nth-of-type(2n),.block-50.margin:nth-of-type(2n){margin-right:0}

.block-40{width:40%;margin:auto}
.block-40.margin-right{width:calc(40% - 1rem); margin-right: 1rem;}
.block-40.margin{width:calc(40% - (1rem / 2)) ; margin: 0 1rem 1rem 0;}
.block-60.margin-right + .block-40.margin-right,.block-60.margin + .block-40.margin{width:calc(40% - 0.5rem);margin-right:0;}

.block-33{width:33.3%;margin:auto}
.block-33.margin-right{width:calc(33.3% - 0.66rem); margin-right: 1rem;}
.block-33.margin{width:calc(33.3% - 0.66rem); margin: 0 1rem 1rem 0;}
.block-33.margin-right:nth-of-type(3n),.block-33.margin:nth-of-type(3n){margin-right:0}
.block-66.margin-right + .block-33.margin-right,.block-66.margin + .block-33.margin{width:calc(33.17% - 0.5rem);margin-right:0;}

.block-30{width:30%;margin:auto}
.block-30.margin-right{width:calc(30% - 0.5rem); margin-right: 1rem;}
.block-30.margin{width:calc(30% - 0.5rem); margin: 0 1rem 1rem 0;}
.block-70.margin + .block-30.margin,.block-70.margin-right + .block-30.margin-right{width:calc(30% - 0.5rem);margin-right:0;}

.block-25{width:25%;margin:auto}
.block-25.square{height:0;padding-bottom:25%}
.block-25.margin-right{width:calc(25% - 0.75rem); margin-right: 1rem;}
.block-25.margin{width:calc(25% - 0.75rem); margin: 0 1rem 1rem 0;}
.block-25.margin-right:nth-of-type(4n),.block-25.margin:nth-of-type(4n){margin-right:0}
.overflow-x .block-25.margin-right:nth-of-type(4n){margin-right: 1rem;}
.overflow-x .block-25.margin:nth-of-type(4n){margin: 0 1rem 1rem 0;}
.block-75.margin + .block-25.margin,.block-75.margin-right + .block-25.margin-right{width:calc(25% - 0.5rem);margin-right:0;}

.block-20{width:20%;margin:auto}
.block-20.square{height:0;padding-bottom:20%;}
.block-20.margin-right{width:calc(20% - 0.8rem); margin-right: 1rem;}
.block-20.margin{width:calc(20% - 0.8rem); margin: 0 1rem 1rem 0;}
.block-20.square.margin{height:0;padding-bottom:calc(20% - 0.8rem) !important;}
.block-20.margin-right:nth-of-type(5n),.block-20.margin:nth-of-type(5n){margin-right:0}

.block-10{width:10%;margin:auto}
.block-10.margin-right{width:calc(10% - 0.9rem); margin-right: 1rem;}
.block-10.margin{width:calc(10% - 0.9rem); margin: 0 1rem 1rem 0;}
.block-10.margin-right:nth-of-type(10n),.block-10.margin:nth-of-type(10n){margin-right:0}

.h10{height:10rem;}
.h15{height:15rem;}
.h20{height:20rem;}
.h25{height:25%;}
.h30{height:30%;}
.h40{height:40%;}
.h100{height:100%;}
.vh100{height:100vh;}
.vw100{width:100vw;}
.vh90{height:90vh;}
.vh75{height:75vh;}
.vh50{height:50vh;}
.vw50{width:50vw;}
.vh25{height:25vh;}
.vw25{width:25vw;}
.r45{-ms-transform:rotate(-45deg);-webkit-transform:rotate(-45deg);transform:rotate(-45deg);}
.r90{-ms-transform:rotate(-90deg);-webkit-transform:rotate(-90deg);transform:rotate(-90deg);}

.grid{display:grid;}
.grid > *{overflow-y:auto}

.grid .colspan-2{grid-column-end: span 2}
.grid .colspan-3{grid-column-end: span 3}
.grid .colspan-4{grid-column-end: span 4}
.grid .colspan-5{grid-column-end: span 5}
.grid .colspan-6{grid-column-end: span 6}
.grid .colspan-7{grid-column-end: span 7}
.grid .colspan-8{grid-column-end: span 8}
.grid .colspan-9{grid-column-end: span 9}
.grid .colspan-10{grid-column-end: span 10}
.grid .colspan-11{grid-column-end: span 11}
.grid .colspan-12{grid-column-end: span 12}
.grid .rowspan-2{grid-row-end: span 2}
.grid .rowspan-3{grid-row-end: span 3}
.grid .rowspan-4{grid-row-end: span 4}
.grid .rowspan-5{grid-row-end: span 5}
.grid .rowspan-6{grid-row-end: span 6}
.grid .rowspan-7{grid-row-end: span 7}
.grid .rowspan-8{grid-row-end: span 8}
.grid .rowspan-9{grid-row-end: span 9}
.grid .rowspan-10{grid-row-end: span 10}
.grid .rowspan-11{grid-row-end: span 11}
.grid .rowspan-12{grid-row-end: span 12}

.grid .colstart-1{grid-column-start: 1}
.grid .colstart-2{grid-column-start: 2}
.grid .colstart-3{grid-column-start: 3}
.grid .colstart-4{grid-column-start: 4}
.grid .colstart-5{grid-column-start: 5}
.grid .colstart-6{grid-column-start: 6}
.grid .colstart-7{grid-column-start: 7}
.grid .colstart-8{grid-column-start: 8}
.grid .colstart-9{grid-column-start: 9}
.grid .colstart-10{grid-column-start: 10}
.grid .colstart-11{grid-column-start: 11}
.grid .colstart-12{grid-column-start: 12}

.grid.col-1{grid-template-columns: 1fr;}
.grid.col-2{grid-template-columns: 1fr 1fr;}
.grid.col-3{grid-template-columns: 1fr 1fr 1fr;}
.grid.col-4{grid-template-columns: 1fr 1fr 1fr 1fr;}
.grid.col-5{grid-template-columns: 1fr 1fr 1fr 1fr 1fr;}
.grid.col-6{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-7{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-8{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-9{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-10{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-11{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-12{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}

.grid.m-05{grid-gap: 0.5rem;margin: 0 0 0.5rem 0!important}
.grid.m-1{grid-gap: 1rem;margin: 0 0 1rem 0 !important}
.grid.m-2{grid-gap: 2rem;margin: 0 0 2rem 0 !important}
.grid.m-3{grid-gap: 3rem;margin: 0 0 3rem 0 !important}
.grid.m-4{grid-gap: 4rem;margin: 0 0 4rem 0 !important}
.grid.m-5{grid-gap: 5rem;margin: 0 0 5rem 0 !important}

.grid.mx-05{grid-gap: auto 0.5rem;margin: 0 !important}
.grid.mx-1{grid-gap: auto 1rem;margin: 0 !important}
.grid.mx-2{grid-gap: auto 2rem;margin: 0 !important}
.grid.mx-3{grid-gap: auto 3rem;margin: 0 !important}
.grid.mx-4{grid-gap: auto 4rem;margin: 0 !important}
.grid.mx-5{grid-gap: auto 5rem;margin: 0 !important}

.grid.my-05{grid-gap: 0.5rem auto;margin: 0 0 0.5rem 0 !important}
.grid.my-1{grid-gap: 1rem auto;margin: 0 0 1rem 0 !important}
.grid.my-2{grid-gap: 2rem auto;margin: 0 0 2rem 0 !important}
.grid.my-3{grid-gap: 3rem auto;margin: 0 0 3rem 0 !important}
.grid.my-4{grid-gap: 4rem auto;margin: 0 0 4rem 0 !important}
.grid.my-5{grid-gap: 5rem auto;margin: 0 0 5rem 0 !important}

.card,.image-card {display:inline-block; position:relative;top:0px;vertical-align: top; width:calc(25% - 0.7666em);margin:0 1em 1em 0;background-color: #fff;transition: all .3s ease-out;}
.image-card{background-color: rgba(0,0,0,0.6);background-blend-mode:multiply;background-position: center center; background-size: cover;height:30rem;color:#fff;}
*.card:nth-of-type(4n),*.image-card:nth-of-type(4n){margin:0 0 1em 0;}
.card .header,.modal .header{padding:2em;background-color: rgba(18, 194, 222, 1);color:white;background-position: center center; background-size: cover;}
.card .body,.modal .body,.image-card .body{display:block;padding:2em;}
.image-card .body{position: absolute;bottom:0px;left:0px;}
.card .footer,.modal .footer{display:block;padding:0em 2em;background-color: white;min-height: 5em;color:#aaa;}
.card .footer a{color:rgba(18, 194, 222, 1)}
.card .footer a:hover{color:rgba(18, 194, 250, 1)}
.card.rounded{border-radius:5px}
.card.rounded .header{border-top-left-radius:5px;border-top-right-radius:5px}
.card.rounded .body, .card.rounded .footer{border-bottom-left-radius:5px;border-bottom-right-radius:5px}
a.card.hover:hover,a.image-card.hover:hover{top:-5px;-webkit-box-shadow:0px 30px 20px -20px rgba(0,0,0,0.4);-moz-box-shadow:0px 30px 20px -20px rgba(0,0,0,0.4);box-shadow:0px 30px 20px -20px rgba(0,0,0,0.4);}
.modal{z-index:999;font-size: 1rem;position:fixed;top:0px;left:0px;height:100%;width:100%;display:none;align-items: center;justify-content: center;flex-direction: column;background-color:rgba(255,255,255,0.5)}
.modal > div{width: 50vw}
.modal .body{background-color:#fff;-webkit-box-shadow:0px 100px 150px -20px rgba(0,0,0,0.6);-moz-box-shadow:0px 100px 150px -20px rgba(0,0,0,0.6);box-shadow:0px 100px 150px -20px rgba(0,0,0,0.6);}
.modal .footer{background-color:#fff;-webkit-box-shadow:0px 21px 15px -20px rgba(0,0,0,0.6);-moz-box-shadow:0px 21px 15px -20px rgba(0,0,0,0.6);box-shadow:0px 21px 15px -20px rgba(0,0,0,0.6);}
.code{white-space: pre;font-family: monospace;background-color:  rgba(120, 120, 130, 0.1);color:#363636; padding:0.5rem 2rem 0.5rem 2rem; overflow-x: auto}
.overflow-x:not(.mobile){overflow-x:scroll;overflow-y:hidden;white-space: nowrap;-webkit-overflow-scrolling: touch;}
.overflow-x:not(.mobile) > * {white-space: normal;}
.overflow-x:not(.mobile) .card:nth-of-type(4n){margin:0 1em 1em 0;}
.overflow-y{max-height:100%;overflow-y:scroll;overflow-x:hidden;-webkit-overflow-scrolling: touch;}
.overflow-x.scroll:not(.mobile){overflow-x:scroll;-webkit-overflow-scrolling:touch;-webkit-backface-visibility: hidden;}
.overflow-y.scroll{max-height:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch;-webkit-backface-visibility: hidden;}
.overflow-hidden{overflow:hidden;}
.scroll-hide{-ms-overflow-style:none;-webkit-backface-visibility: hidden;}
.scroll-hide::-webkit-scrollbar{width:0px}
table{width:100%;margin:2rem auto 2rem auto;border-spacing:0;border-top:2px solid #fff;border-left:2px solid #fff;table-layout:fixed;}
td{vertical-align:middle;padding:1rem;text-align:center;border-bottom:2px solid #fff;border-right:2px solid #fff;word-wrap:break-word}
table .title{background:#888;color:white;}
table .even{background:#ddd;}
table.no-style{margin:0;padding:0%;border:none;text-align:left;}
table.no-style td{border:none;padding:0%;text-align:left;}
.table{display:table;width:100%;table-layout:fixed;border-collapse:collapse;word-wrap: break-word;}
.table.small{font-size:0.8rem;}
.table .row{display:table-row;font-size: 1rem;margin:0 1rem 1rem 0;width:100%;word-wrap: break-word;}
.table .row.title, .table .row.header, .table .row.heading{font-weight:bold;background:#888;color:white;}
.table .row.odd,.cell.odd{background:#ddd;}
.table .row .cell{vertical-align:top;display:table-cell;margin:0 1rem 1rem 0;padding:0.7rem;overflow:hidden;word-wrap:break-word;}
.table .row .cell.middle{vertical-align:middle;}
.table .row .cell.no-break{word-wrap:normal;}
.table.no-padding-children .cell{padding:0}
tr.selectable:hover, td.selectable:hover{background:#ddd;cursor:pointer;}
#wrapper{width:100vw;margin:auto;}
#wrapper:after{clear:both;}
.background{position:absolute;top:0px;left:0px;width:100%;height:auto;z-index:0;}
.background.middle{position:absolute;top:-100%;}
.background + *{z-index:1}
div.background{height:100%;}
.nav{cursor:pointer;display:inline-block;position:relative;min-height:40px;height:100%;width:100%;background-size:40px 40px;background-repeat:no-repeat;background-position:top left;text-align: left;padding-top:50px;z-index:5; overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-backface-visibility: hidden;}
.nav.right{background-position:top right; text-align: right}
.nav{background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM6c2VyaWY9Imh0dHA6Ly93d3cuc2VyaWYuY29tLyIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxLjQxNDIxOyI+CiAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxLjE2NzM2LDAsMCwxLjE2NzM2LC04LjM2Nzk4LC04LjM2Nzk4KSI+CiAgICAgICAgPHBhdGggZD0iTTQ2LjI5Nyw4LjE2QzQ4LjU4OSw2LjgzOCA1MS40MTEsNi44MzggNTMuNzAzLDguMTZDNjAuOTg2LDEyLjM2NiA3Ny4wOTksMjEuNjY4IDg0LjM4MywyNS44NzRDODYuNjc0LDI3LjE5NiA4OC4wODUsMjkuNjQxIDg4LjA4NSwzMi4yODdDODguMDg1LDQwLjY5NyA4OC4wODUsNTkuMzAzIDg4LjA4NSw2Ny43MTNDODguMDg1LDcwLjM1OSA4Ni42NzQsNzIuODA0IDg0LjM4Myw3NC4xMjZDNzcuMDk5LDc4LjMzMiA2MC45ODYsODcuNjM0IDUzLjcwMyw5MS44NEM1MS40MTEsOTMuMTYyIDQ4LjU4OSw5My4xNjIgNDYuMjk3LDkxLjg0QzM5LjAxNCw4Ny42MzQgMjIuOTAxLDc4LjMzMiAxNS42MTcsNzQuMTI2QzEzLjMyNiw3Mi44MDQgMTEuOTE1LDcwLjM1OSAxMS45MTUsNjcuNzEzQzExLjkxNSw1OS4zMDMgMTEuOTE1LDQwLjY5NyAxMS45MTUsMzIuMjg3QzExLjkxNSwyOS42NDEgMTMuMzI2LDI3LjE5NiAxNS42MTcsMjUuODc0QzIyLjkwMSwyMS42NjggMzkuMDE0LDEyLjM2NiA0Ni4yOTcsOC4xNlpNNjYuNzU1LDY1Ljk0TDY2Ljc1NSw1OS41ODdMMzMuMjQ1LDU5LjU4N0wzMy4yNDUsNjUuOTRMNjYuNzU1LDY1Ljk0Wk02Ni43NTUsNTMuMTc3TDY2Ljc1NSw0Ni44MjNMMzMuMjQ1LDQ2LjgyM0wzMy4yNDUsNTMuMTc3TDY2Ljc1NSw1My4xNzdaTTY2Ljc1NSw0MC40MTNMNjYuNzU1LDM0LjA2TDMzLjI0NSwzNC4wNkwzMy4yNDUsNDAuNDEzTDY2Ljc1NSw0MC40MTNaIiBzdHlsZT0iZmlsbDp3aGl0ZTsiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
}
.nav.dark{background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM6c2VyaWY9Imh0dHA6Ly93d3cuc2VyaWYuY29tLyIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxLjQxNDIxOyI+CiAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxLjE2NzM2LDAsMCwxLjE2NzM2LC04LjM2Nzk4LC04LjM2Nzk4KSI+CiAgICAgICAgPHBhdGggZD0iTTQ2LjI5Nyw4LjE2QzQ4LjU4OSw2LjgzOCA1MS40MTEsNi44MzggNTMuNzAzLDguMTZDNjAuOTg2LDEyLjM2NiA3Ny4wOTksMjEuNjY4IDg0LjM4MywyNS44NzRDODYuNjc0LDI3LjE5NiA4OC4wODUsMjkuNjQxIDg4LjA4NSwzMi4yODdDODguMDg1LDQwLjY5NyA4OC4wODUsNTkuMzAzIDg4LjA4NSw2Ny43MTNDODguMDg1LDcwLjM1OSA4Ni42NzQsNzIuODA0IDg0LjM4Myw3NC4xMjZDNzcuMDk5LDc4LjMzMiA2MC45ODYsODcuNjM0IDUzLjcwMyw5MS44NEM1MS40MTEsOTMuMTYyIDQ4LjU4OSw5My4xNjIgNDYuMjk3LDkxLjg0QzM5LjAxNCw4Ny42MzQgMjIuOTAxLDc4LjMzMiAxNS42MTcsNzQuMTI2QzEzLjMyNiw3Mi44MDQgMTEuOTE1LDcwLjM1OSAxMS45MTUsNjcuNzEzQzExLjkxNSw1OS4zMDMgMTEuOTE1LDQwLjY5NyAxMS45MTUsMzIuMjg3QzExLjkxNSwyOS42NDEgMTMuMzI2LDI3LjE5NiAxNS42MTcsMjUuODc0QzIyLjkwMSwyMS42NjggMzkuMDE0LDEyLjM2NiA0Ni4yOTcsOC4xNlpNNjYuNzU1LDY1Ljk0TDY2Ljc1NSw1OS41ODdMMzMuMjQ1LDU5LjU4N0wzMy4yNDUsNjUuOTRMNjYuNzU1LDY1Ljk0Wk02Ni43NTUsNTMuMTc3TDY2Ljc1NSw0Ni44MjNMMzMuMjQ1LDQ2LjgyM0wzMy4yNDUsNTMuMTc3TDY2Ljc1NSw1My4xNzdaTTY2Ljc1NSw0MC40MTNMNjYuNzU1LDM0LjA2TDMzLjI0NSwzNC4wNkwzMy4yNDUsNDAuNDEzTDY2Ljc1NSw0MC40MTNaIiBzdHlsZT0iZmlsbDpyZ2IoMjgsMjgsMjgpOyIvPgogICAgPC9nPgo8L3N2Zz4K);
}
.nav *{display:block}
.nav:not(.no-padding-children) * {padding:1rem 1rem 1rem 0}
.nav.right:not(.no-padding-children) * {padding:1rem 0 1rem 1rem}
.nav:not(.open) *{display: none}
.nav-bar{font-size: 1rem}
.nav-bar a{padding:1em; display:inline-block;}
.nav-bar a.no-padding{padding:0;}
.fold{position:relative;display:block;width:100vw;min-height:100vh;text-align:center;vertical-align:middle;overflow:hidden;}
.videoWrapper {position: relative;padding-bottom: 56.25%;height: 0;}
.videoWrapper iframe {position: absolute;top: 0;left: 0;width: 100%;height: 100%;}
.website-preview-wrap{position: relative;background-image: url('/images/display.svg');background-position: center center;background-size: 100%;background-repeat: no-repeat;height:0px;padding-bottom:70%;}
.website-preview{position:absolute;top:12%;left:9%;width:82%;height:64.5%;mix-blend-mode:screen;overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-backface-visibility: hidden;-ms-overflow-style:none;-webkit-backface-visibility: hidden;}
.content,.fold,.header {position: relative;background-size: cover;background-position: 50% 50%;}
.text-reverse{unicode-bidi:bidi-override;direction:rtl;}
.text-feature{font-size:1.3rem}
.popup{padding:10px;display:block;position:absolute;top:0;left:0;height:30px;width:200px;background:#efefef;}
.text-left{text-align:left;}
.text-center{text-align:center;}
.text-right{text-align:right;}
.text-middle{display:flex !important;align-items: center;justify-content: center;flex-direction: column;text-align: center;}
.text-middle-left{display:flex !important;align-items: flex-start;justify-content: center;flex-direction: column;text-align: left;}
.text-middle-right{display:flex !important;align-items: flex-end;justify-content: center;flex-direction: column;align-self: flex-end;text-align: right;}
.text-bottom{display:flex !important;align-items: center;justify-content: flex-end;flex-direction: column;text-align: center;}
.text-bottom-left{display:flex !important;align-items: flex-start;justify-content: flex-end;flex-direction: column;text-align: left;}
.text-bottom-right{display:flex !important;align-items: flex-end;justify-content: flex-end;flex-direction: column;text-align: right;}
*[class^=w].text-middle-left,*[class^=w].text-middle,*[class^=w].text-middle-right,*[class^=w].text-bottom-left,*[class^=w].text-bottom,*[class^=w].text-bottom-right{display:inline-flex !important}
*[class*=block-].text-middle-left,*[class*=block-].text-middle,*[class*=block-].text-middle-right,*[class*=block-].text-bottom-left,*[class*=block-].text-bottom,*[class*=block-].text-bottom-right{display:inline-flex !important}
.text-justify{text-align:justify;}
.text-justify:after{content:"";display:inline-block;width:100%;}
.text-col p{margin-bottom:1.5rem;}
.text-col{min-height:initial;-webkit-column-gap:2rem;-moz-column-gap:2rem;column-gap:2rem;-webkit-column-break-inside:avoid;page-break-inside:avoid;break-inside:avoid;}
.text-col.span{-webkit-column-span:all;column-span:all;}
.text-col.span2{-webkit-column-span:2;column-span:2;}
.text-col.x1{-webkit-columns:1;-moz-columns:1;columns:1;}
.text-col.x2{-webkit-columns:2;-moz-columns:2;columns:2;}
.text-col.x3{-webkit-columns:3;-moz-columns:3;columns:3;}
.text-col.x4{-webkit-columns:4;-moz-columns:4;columns:4;}
.vertical-align{vertical-align:middle;}
.vertical-align-top{vertical-align:top;}
.bold{font-weight:600;}
.bold300{font-weight:300;}
.bold400{font-weight:400;}
.bold600{font-weight:600;}
.bold700{font-weight:700;}
.bold800{font-weight:800;}
.lh1{line-height:1rem}
.lh125{line-height:1.25rem}
.lh15{line-height:1.5rem}
.lh175{line-height:1.75rem}
.lh2{line-height:2rem}
.lh1 h1,.lh1 h2,.lh1 h3,.lh1 h4{line-height:calc(1em + 1rem)}
.lh125 h1,.lh125 h2,.lh125 h3,.lh125 h4{line-height:calc(1em + 1.25rem)}
.lh15 h1,.lh15 h2,.lh15 h3,.lh15 h4{line-height:calc(1em + 1.5rem)}
.lh175 h1,.lh175 h2,.lh175 h3,.lh175 h4{line-height:calc(1em + 1.75rem)}
.lh2 h1,.lh2 h2,.lh2 h3,.lh2 h4{line-height:calc(1em + 2rem)}
.normal, .text-normal{font-weight:normal;}
.scale.big, .font-scale.big{font-size:1vw;}
.scale, .font-scale{font-size:0.8vw;}
.light, .light *{font-weight:300;}
.italic{font-style:italic;}
.uppercase{text-transform:uppercase;}
.lowercase{text-transform:lowercase;}
.capitalize,.capitalise{text-transform:capitalize;}
.clear{clear:both;}
.clear-after:after{clear:both;}
.clear-before:before{clear:both;}
.large, .big, .text-big{font-size:1.2rem;}
.big button, .big .btn,.text-big button, .text-big .btn{font-size:0.9rem;}
.fa, .big .fa, .text-big .fa{font-size:1em}
.small{font-size:0.8rem !important;}
.skew-y{transform: skewY(-9deg);}
.skew-x{transform: skewX(-9deg);}
table.small{font-size:0.8rem;}
.float-left{float:left;}
.float-right{float:right;}
.bg-none{background:none}
.bg-cover{background-position:center center;background-size:cover;background-repeat:no-repeat;}
.bg-contain{background-position:center center;background-size:contain;background-repeat:no-repeat;}
.underline:not(h1):not(h2):not(h3):not(h4){text-decoration: underline;}
img.icon{position:relative;display:inline;}
.transparent{opacity:0.2;}
.transparent1{opacity:0.4;}
.transparent2{opacity:0.6;}
.transparent3{opacity:0.8;}
.transparent4{opacity:0.9;}
.no-border{border:none;}
.no-border-top{border-top:none;}
.no-border-left{border-left:none;}
.no-border-bottom{border-bottom:none;}
.no-border-right{border-right:none;}
.border{border:1px solid #ddd;}
.border-top{border-top:1px solid #ddd;}
.border-right{border-right:1px solid #ddd;}
.border-bottom{border-bottom:1px solid #ddd;}
.border-left{border-left:1px solid #ddd;}
[class^="border"].white{border-color:#fff;}
[class^="border"].grey{border-color:#444;}
.thick{border-width:5px;}
.inner-border{-webkit-box-shadow:inset 0px 0px 0px 1px #ddd;-moz-box-shadow:inset 0px 0px 0px 1px #ddd;box-shadow:inset 0px 0px 0px 1px #ddd;}
.inner-border-top{-webkit-box-shadow:inset 0px 1px 0px 0px #ddd;-moz-box-shadow:inset 0px 1px 0px 0px #ddd;box-shadow:inset 0px 1px 0px 0px #ddd;}
.inner-border-right{-webkit-box-shadow:inset -1px 0px 0px 0px #ddd;-moz-box-shadow:inset -1px 0px 0px 0px #ddd;box-shadow:inset -1px 0px 0px 0px #ddd;}
.inner-border-bottom{-webkit-box-shadow:inset 0px -1px 0px 0px #ddd;-moz-box-shadow:inset 0px -1px 0px 0px #ddd;box-shadow:inset 0px -1px 0px 0px #ddd;}
.inner-border-left{-webkit-box-shadow:inset 1px 0px 0px 0px #ddd;-moz-box-shadow:inset 1px 0px 0px 0px #ddd;box-shadow:inset 1px 0px 0px 0px #ddd;}
p.highlight{padding:0.3rem;background:#FFF886;}
h1.highlight, h2.highlight, h3.highlight, h4.highlight{padding:1rem;background:#549ead;color:white;}
.rounded, .rounded-children div{border-radius:5px;}
.rounded-tl, .rounded-tl-children div{border-top-left-radius:5px;}
.rounded-tr, .rounded-tr-children div{border-top-right-radius:5px;}
.rounded-br, .rounded-br-children div{border-bottom-right-radius:5px;}
.rounded-bl, .rounded-bl-children div{border-bottom-left-radius:5px;}
.circle{border-radius:50%;}
.no-padding-children .padding, .padding, .no-padding-children .p-3, .p-3{padding-top:3rem;padding-bottom:3rem;padding-left:3rem;padding-right:3rem;}
.padding-children > *{padding-top:3rem;padding-bottom:3rem;padding-left:3rem;padding-right:3rem;}
.no-padding-children .padding-top, .padding-top,.pt-3{padding-top:3rem;}
.no-padding-children .padding-right, .padding-right, .pr-3{padding-right:3rem;}
.no-padding-children .padding-bottom, .padding-bottom, .pb-3{padding-bottom:3rem;}
.no-padding-children .padding-left, .padding-left, .pl-3{padding-left:3rem;}
.no-padding-children .padding-x, .padding-x, .px-3{padding-left:3rem;padding-right:3rem;}
.no-padding-children .padding-y, .padding-y, .py-3{padding-top:3rem;padding-bottom:3rem;}
.no-padding-children .padding05, .padding05, .p-5{padding:0.5rem;}
.no-padding-children .padding05-children >  *, .padding05-children >  *, .p-5-children >  *{padding:0.5rem;}
.no-padding-children .padding05-top, .padding05-top, .pt-5{padding-top:0.5rem;}
.no-padding-children .padding05-right, .padding05-right, .pr-5{padding-right:0.5rem;}
.no-padding-children .padding05-bottom, .padding05-bottom, .pb-5{padding-bottom:0.5rem;}
.no-padding-children .padding05-left, .padding05-left, .pl-5{padding-left:0.5rem;}
.no-padding-children .padding05-x, .padding05-x, .px-5{padding-left:0.5rem;padding-right:0.5rem;}
.no-padding-children .padding05-y, .padding05-y, .py-5{padding-top:0.5rem;padding-bottom:0.5rem;}
.no-padding-children .padding1, .padding1, .p-1{padding:1rem;}
.no-padding-children .padding1-children >  *, .padding1-children >  *,.no-padding-children .p-1-children >  *, .p-1-children > *{padding:1rem;}
.no-padding-children .padding1-top, .padding1-top, .pt-1{padding-top:1rem;}
.no-padding-children .padding1-right, .padding1-right, .pr-1{padding-right:1rem;}
.no-padding-children .padding1-bottom, .padding1-bottom, .pb-1{padding-bottom:1rem;}
.no-padding-children .padding1-left, .padding1-left, .pl-1{padding-left:1rem;}
.no-padding-children .padding1-x, .padding1-x, .px-1{padding-left:1rem;padding-right:1rem;}
.no-padding-children .padding1-y, .padding1-y, .py-1{padding-top:1rem;padding-bottom:1rem;}
.no-padding-children .padding2, .padding2, .p-2{padding:2rem;}
.no-padding-children .padding2-children > *, .padding2-children > *,.no-padding-children .p-2-children > *, .p-2-children > *{padding:2rem;}
.no-padding-children .padding2-top, .padding2-top, .pt-2{padding-top:2rem;}
.no-padding-children .padding2-right, .padding2-right, .pr-2{padding-right:2rem;}
.no-padding-children .padding2-bottom, .padding2-bottom, .pb-2{padding-bottom:2rem;}
.no-padding-children .padding2-left, .padding2-left, .pl-2{padding-left:2rem;}
.no-padding-children .padding2-x, .padding2-x, .px-2{padding-left:2rem;padding-right:2rem;}
.no-padding-children .padding2-y, .padding2-y, .py-2{padding-top:2rem;padding-bottom:2rem;}
.no-padding-children .padding4-left, .padding4-left, .pl-4{padding-left:4rem;}
.no-padding-children .padding4, .padding4, .no-padding-children .p-4, .p-4{padding-top:4rem;padding-right:4rem;padding-bottom:4rem;padding-left:4rem;}
.no-padding-children .padding4-children > * , .padding4-children > *{padding-top:4rem;padding-left:4rem;padding-bottom:4rem;padding-left:4rem;}
.no-padding-children .padding4-top, .padding4-top, .pt-4{padding-top:4rem;}
.no-padding-children .padding4-right, .padding4-right, .pr-4{padding-right:4rem;}
.no-padding-children .padding4-bottom, .padding4-bottom, .pb-4{padding-bottom:4rem;}
.no-padding-children .padding4-left, .padding4-left, .pl-4{padding-left:4rem;}
.no-padding-children .padding4-x, .padding4-x, .px-4{padding-left:4rem;padding-right:4rem;}
.no-padding-children .padding4-y, .padding4-y, .py-4{padding-top:4rem;padding-bottom:4rem;}
.no-padding-children .padding5, .padding5, .no-padding-children .p-5, .p-5{padding-top:5rem;padding-right:5rem;padding-bottom:5rem;padding-left:5rem;}
.no-padding-children .padding5-children > * , .padding5-children > *{padding-top:5rem;padding-left:5rem;padding-bottom:5rem;padding-left:5rem;}
.no-padding-children .padding5-top, .padding5-top, .pt-5{padding-top:5rem;}
.no-padding-children .padding5-right, .padding5-right, .pr-5{padding-right:5rem;}
.no-padding-children .padding5-bottom, .padding5-bottom, .pb-5{padding-bottom:5rem;}
.no-padding-children .padding5-left, .padding5-left, .pl-5{padding-left:5rem;}
.no-padding-children .padding5-x, .padding5-x, .px-5{padding-left:5rem;padding-right:5rem;}
.no-padding-children .padding5-y, .padding5-y, .py-5{padding-top:5rem;padding-bottom:5rem;}
.no-padding, .p-0{padding-top:0;padding-bottom:0;padding-left:0;padding-right:0}
.no-padding-all *{padding-top:0;padding-bottom:0;padding-left:0;padding-right:0}
.no-padding-children > *, .p-0-children{padding-top:0;padding-bottom:0;padding-left:0;padding-right:0}
.no-padding-top, .pt-0{padding-top:0;}
.no-padding-top-children > *, .pt-0-children > *{padding-top:0%;}
.no-padding-right, .pr-0{padding-right:0;}
.no-padding-bottom, .pb-0{padding-bottom:0;}
.no-padding-left, .pl-0{padding-left:0;}
.margin, .m-1{margin-top:1rem;margin-bottom:1rem;margin-left:1rem;margin-right:1rem}
.margin-top, .mt-1{margin-top:1rem;}
.margin-right, .mr-1{margin-right:1rem;}
.margin-bottom, .mb-1{margin-bottom:1rem;}
.margin-left, .ml-1{margin-left:1rem;}
.margin2, .m-2{margin-top:2rem;margin-bottom:2rem;margin-left:2rem;margin-right:2rem}
.margin2-top, .mt-2{margin-top:2rem;}
.margin2-right, .mr-2{margin-right:2rem;}
.margin2-bottom, .mb-2{margin-bottom:2rem;}
.margin2-left, .ml-2{margin-left:2rem;}
.margin3, .m-3{margin-top:3rem;margin-bottom:3rem;margin-left:3rem;margin-right:3rem}
.margin3-top, .mt-3{margin-top:3rem;}
.margin3-right, .mr-3{margin-right:3rem;}
.margin3-bottom, .mb-3{margin-bottom:3rem;}
.margin3-left, .ml-3{margin-left:3rem;}
.margin4, .m-4{margin-top:4rem;margin-bottom:4rem;margin-left:4rem;margin-right:4rem}
.margin4-top, .mt-4{margin-top:4rem;}
.margin4-right, .mr-4{margin-right:4rem;}
.margin4-bottom, .mb-4{margin-bottom:4rem;}
.margin4-left, .ml-4{margin-left:4rem;}
.margin5, .m-5{margin-top:5rem;margin-bottom:5rem;margin-left:5rem;margin-right:5rem}
.margin5-top, .mt-5{margin-top:5rem;}
.margin5-right, .mr-5{margin-right:5rem;}
.margin5-bottom, .mb-5{margin-bottom:5rem;}
.margin5-left, .ml-5{margin-left:5rem;}

.no-margin, .m-0{margin-top:0;margin-bottom:0;margin-left:0;margin-right:0}
.margin-auto, .m-auto{margin-left:auto;margin-right:auto;}
.margin-bottom-children > *{margin-bottom:1%;}
.margin-right-children > *{margin-right:1%;}
.margin-right-children > *:last-of-type{margin-right:0;}
.no-margin-children > div *{margin-top:0;margin-bottom:0;margin-left:0;margin-right:0}
.no-margin-top, .mt-0{margin-top:0;}
.no-margin-right, .mr-0{margin-right:0;}
.no-margin-bottom, .mb-0{margin-bottom:0;}
.no-margin-left, .ml-0{margin-left:0;}
.mobile-hide{display: block;}
.mobile-hide.table{display: table;}
[class^=w].mobile-hide,[class*=block-].mobile-hide,.inline-block.mobile-hide{display: inline-block;overflow-y: hidden}
a.mobile-hide,span.mobile-hide{display:inline}
.mobile-show{display: none !important;}
.selectable, .clickable{cursor:pointer;}
.selectable:hover{cursor:pointer;background:#ddd;}
.outline{text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;}
.skew{    -webkit-transform: rotate(-4deg) skew(-4deg, 0);
       -moz-transform: rotate(-4deg) skew(-4deg, 0);
        -ms-transform: rotate(-4deg) skew(-4deg, 0);
         -o-transform: rotate(-4deg) skew(-4deg, 0);
            transform: rotate(-4deg) skew(-4deg, 0);}
.text-shadow{text-shadow:3px 3px 5px rgba(0, 0, 0, 0.3);}
.shadow{-webkit-box-shadow:0px 21px 15px -20px rgba(0,0,0,0.6);-moz-box-shadow:0px 21px 15px -20px rgba(0,0,0,0.6);box-shadow:0px 21px 15px -20px rgba(0,0,0,0.6);}
.shadow-top{-webkit-box-shadow: 0px -15px 12px -18px rgba(0,0,0,0.75);-moz-box-shadow: 0px -15px 12px -18px rgba(0,0,0,0.75);box-shadow: 0px -15px 12px -18px rgba(0,0,0,0.75);}
.glow{-webkit-box-shadow: 0px 0px 17px 0px rgba(138,180,209,1);-moz-box-shadow: 0px 0px 17px 0px rgba(138,180,209,1);box-shadow: 0px 0px 17px 0px rgba(138,180,209,1);z-index:999}
.vignette{box-shadow: 0 0 20vw rgba(0,0,0,0.7) inset;}
.magnify{-moz-transition:all 0.3s;-webkit-transition:all 0.3s;transition:all 0.3s;z-index:98;}
.magnify:hover{-moz-transform:scale(2);-webkit-transform:scale(2);transform:scale(2);z-index:99;}
.screen-door::before {content: " ";display: block;position: absolute;top: 0;left: 0;bottom: 0;right: 0;background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));z-index: 2;background-size: 100% 2px, 3px 100%;pointer-events: none;}
.disable-hover,.disable-hover *{pointer-events:none !important;}
[class*='move'] {transition: all 0.5s ease-in-out}
.blur-in {transition: all 1s ease-out;-webkit-filter: blur(50px);-moz-filter: blur(50px);-o-filter: blur(50px);-ms-filter: blur(50px);filter: blur(50px);opacity:0}
.hover {position: relative;overflow: hidden;cursor: pointer; margin-bottom:-5px}
.hover-title {margin: 0;position: absolute;width: 100%;left: 0;right: 0;top: 50%;transform: translateY(-20%);text-align: center;transition: 0.3s;color: #fff;z-index: 10;}
.hover-sub {margin: 0;line-height: 1.5em;position: absolute;width: 100%;left: 0;right: 0;top: 50%;opacity: 0;text-align: center;transition: 0.3s;color: #fff;z-index: 10;font-size: 16px;}
.hover-bg {position:absolute;top:0px;left:0px;width:100%;height:100%;opacity: 0.2;transition: 0.3s;}
.hover:hover .hover-title {transform: translateY(-70%);}
.hover:hover .hover-sub, .hover:hover .hover-bg {opacity: 0.8;}
/* animations */
/*.move-up{opacity: 0;transform: translate(0px, 20px)}.move-left {opacity: 0;transform: translate(20px, 0px)}.move-right {opacity: 0;transform: translate(-20px, 0px)}*/
.in-view.move-up,.in-view.move-down,.in-view.move-left,.in-view.move-right{opacity: 1;transform: translate(0px, 0px);-webkit-transition-delay: 0.7s;transition-delay: 0.7s;}
.rotate{-webkit-animation-name:spin;-webkit-animation-duration:4000ms;-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:linear;-moz-animation-name:spin;-moz-animation-duration:4000ms;-moz-animation-iteration-count:infinite;-moz-animation-timing-function:linear;-ms-animation-name:spin;-ms-animation-duration:4000ms;-ms-animation-iteration-count:infinite;-ms-animation-timing-function:linear;animation-name:spin;animation-duration:4000ms;animation-iteration-count:infinite;animation-timing-function:linear;}
@-ms-keyframes spin{from{-ms-transform:rotate(0deg);}
to{-ms-transform:rotate(360deg);}
}
@-moz-keyframes spin{from{-moz-transform:rotate(0deg);}
to{-moz-transform:rotate(360deg);}
}
@-webkit-keyframes spin{from{-webkit-transform:rotate(0deg);}
to{-webkit-transform:rotate(360deg);}
}
@keyframes spin{from{transform:rotate(0deg);}
to{transform:rotate(360deg);}
}
.bob{animation: MoveUpDown 2s ease infinite;}
@keyframes MoveUpDown {
  0% {
    bottom: 0;
  }
  50% {
    bottom: 10px;
  }
  100% {
    bottom: 0;
  }
}
.flash{animation-name: flash;animation-duration: 1s;animation-iteration-count:infinite;}
@keyframes flash {
    0%   {opacity: 0;}
    50%  {opacity: 1;}
    100% {opacity: 0;}
}

.no-style, .no-style a, a.no-style{padding:0;margin:0;background:none;border:0;text-transform:none;color:inherit;}
.no-style:hover, .no-style a:hover, a.no-style:hover{padding:0;margin:0;background:none;border:0;text-transform:none;color:inherit;}
.no-flicker{-webkit-transform:translate3d(0,0,0);}
/* colors */
.text-white{color:#fff;}
.text-blue{color: rgba(18, 194, 222, 1)}
.text-red{color: rgba(222, 34, 88, 1)}
.text-green{color: rgba(18, 222, 173, 1)}
.text-light-grey{color:#ccc;}
.text-grey{color:#aaa;}
.text-dark-grey{color:#555;}
.text-black{color:#222;}
.bg-black{background-color: rgba(20,20,20,1) !important}
.bg-blue{background-color: rgba(18, 194, 222, 1) !important}
.bg-red{background-color: rgba(222, 34, 88, 1) !important}
.bg-purple{background-color: rgba(122, 34, 222, 1) !important}
.bg-green{background-color: rgba(18, 222, 173, 1) !important}
.bg-yellow{background-color: rgba(222, 195, 18, 1) !important}
.bg-orange{background-color: rgba(222, 116, 18, 1) !important}
.bg-pink{background-color: rgba(222, 18, 128, 1) !important}
.bg-dark-grey{background-color: rgba(50,50,50,1) !important}
.bg-grey{background-color: rgba(120,120,120,1) !important}
.bg-light-grey{background-color: rgba(240,240,240,1) !important}
.bg-white{background-color: rgba(255,255,255,1) !important}
.bg-transparent-black{background-color: rgba(20,20,20,0.7)}
.bg-transparent-blue{background-color: rgba(18, 194, 222, 0.7)}
.bg-transparent-red{background-color: rgba(222, 34, 88, 0.7)}
.bg-transparent-purple{background-color: rgba(122, 34, 222, 0.7)}
.bg-transparent-green{background-color: rgba(18, 222, 173, 0.7)}
.bg-transparent-yellow{background-color: rgba(222, 195, 18, 0.7)}
.bg-transparent-orange{background-color: rgba(222, 116, 18, 0.7)}
.bg-transparent-pink{background-color: rgba(222, 18, 128, 0.7)}
.bg-transparent-dark-grey{background-color: rgba(50,50,50,0.7)}
.bg-transparent-grey{background-color: rgba(200,200,200,0.7)}
.bg-transparent-light-grey{background-color: rgba(200,200,200,0.7)}
.bg-transparent-white{background-color: rgba(250,250,250,0.7)}
.bg-topaz{background: rgba(4,213,220,1);
background: -moz-linear-gradient(-45deg, rgba(4,213,220,1) 0%, rgba(0,64,138,1) 100%);
background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(4,213,220,1)), color-stop(100%, rgba(0,64,138,1)));
background: -webkit-linear-gradient(-45deg, rgba(4,213,220,1) 0%, rgba(0,64,138,1) 100%);
background: -o-linear-gradient(-45deg, rgba(4,213,220,1) 0%, rgba(0,64,138,1) 100%);
background: -ms-linear-gradient(-45deg, rgba(4,213,220,1) 0%, rgba(0,64,138,1) 100%);
background: linear-gradient(135deg, rgba(4,213,220,1) 0%, rgba(0,64,138,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#04d5dc', endColorstr='#00408a', GradientType=1 );}
.bg-ruby{background: rgba(168,3,124,1);
background: -moz-linear-gradient(-45deg, rgba(168,3,124,1) 0%, rgba(109,0,25,1) 100%);
background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(168,3,124,1)), color-stop(100%, rgba(109,0,25,1)));
background: -webkit-linear-gradient(-45deg, rgba(168,3,124,1) 0%, rgba(109,0,25,1) 100%);
background: -o-linear-gradient(-45deg, rgba(168,3,124,1) 0%, rgba(109,0,25,1) 100%);
background: -ms-linear-gradient(-45deg, rgba(168,3,124,1) 0%, rgba(109,0,25,1) 100%);
background: linear-gradient(135deg, rgba(168,3,124,1) 0%, rgba(109,0,25,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a8037c', endColorstr='#6d0019', GradientType=1 );}
.bg-sapphire{background: rgba(148,3,170,1);
background: -moz-linear-gradient(-45deg, rgba(148,3,170,1) 0%, rgba(107,0,68,1) 100%);
background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(148,3,170,1)), color-stop(100%, rgba(107,0,68,1)));
background: -webkit-linear-gradient(-45deg, rgba(148,3,170,1) 0%, rgba(107,0,68,1) 100%);
background: -o-linear-gradient(-45deg, rgba(148,3,170,1) 0%, rgba(107,0,68,1) 100%);
background: -ms-linear-gradient(-45deg, rgba(148,3,170,1) 0%, rgba(107,0,68,1) 100%);
background: linear-gradient(135deg, rgba(148,3,170,1) 0%, rgba(107,0,68,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9403aa', endColorstr='#6b0044', GradientType=1 );}
.bg-pearl{background: rgba(255,255,255,1);
background: -moz-linear-gradient(-45deg, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 47%, rgba(237,237,237,1) 100%);
background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(255,255,255,1)), color-stop(47%, rgba(246,246,246,1)), color-stop(100%, rgba(237,237,237,1)));
background: -webkit-linear-gradient(-45deg, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 47%, rgba(237,237,237,1) 100%);
background: -o-linear-gradient(-45deg, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 47%, rgba(237,237,237,1) 100%);
background: -ms-linear-gradient(-45deg, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 47%, rgba(237,237,237,1) 100%);
background: linear-gradient(135deg, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 47%, rgba(237,237,237,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ededed', GradientType=1 );
color:#444 !important;
}
.bg-emerald{background: rgba(4,220,123,1);
background: -moz-linear-gradient(-45deg, rgba(4,220,123,1) 0%, rgba(0,131,138,1) 100%);
background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(4,220,123,1)), color-stop(100%, rgba(0,131,138,1)));
background: -webkit-linear-gradient(-45deg, rgba(4,220,123,1) 0%, rgba(0,131,138,1) 100%);
background: -o-linear-gradient(-45deg, rgba(4,220,123,1) 0%, rgba(0,131,138,1) 100%);
background: -ms-linear-gradient(-45deg, rgba(4,220,123,1) 0%, rgba(0,131,138,1) 100%);
background: linear-gradient(135deg, rgba(4,220,123,1) 0%, rgba(0,131,138,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#04dc7b', endColorstr='#00838a', GradientType=1 );}
.bg-puse{background: rgba(166,3,166,1);
background: -moz-linear-gradient(-45deg, rgba(166,3,166,1) 0%, rgba(255,0,166,1) 100%);
background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(166,3,166,1)), color-stop(100%, rgba(255,0,166,1)));
background: -webkit-linear-gradient(-45deg, rgba(166,3,166,1) 0%, rgba(255,0,166,1) 100%);
background: -o-linear-gradient(-45deg, rgba(166,3,166,1) 0%, rgba(255,0,166,1) 100%);
background: -ms-linear-gradient(-45deg, rgba(166,3,166,1) 0%, rgba(255,0,166,1) 100%);
background: linear-gradient(135deg, rgba(166,3,166,1) 0%, rgba(255,0,166,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a603a6', endColorstr='#ff00a6', GradientType=1 );
}
.multiply{background-blend-mode:multiply;}
.screen{background-blend-mode:screen;}
.overlay{background-blend-mode:overlay;}
.darken{background-blend-mode:darken;}
.lighten{background-blend-mode:lighten;}
.color{background-blend-mode:screen;}
.color-dodge{background-blend-mode:color-dodge;}
.color-burn{background-blend-mode:color-burn;}
.saturation{background-blend-mode:saturation;}
.luminosity{background-blend-mode:luminosity;}
.background.multiply,.mix.multiply{mix-blend-mode:multiply;}
.background.screen,.mix.screen{mix-blend-mode:screen;}
.background.overlay,.mix.overlay{mix-blend-mode:overlay;}
.background.darken,.mix.darken{mix-blend-mode:darken;}
.background.lighten,.mix.lighten{mix-blend-mode:lighten;}
.background.color,.mix.color{mix-blend-mode:screen;}
.background.color-dodge,.mix.color-dodge{mix-blend-mode:color-dodge;}
.background.color-burn,.mix.color-burn{mix-blend-mode:color-burn;}
.background.saturation,.mix.saturation{mix-blend-mode:saturation;}
.background.luminosity,.mix.luminosity{mix-blend-mode:luminosity;}
.grad-white-top{background: linear-gradient(to top, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-bottom{background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-left{background: linear-gradient(to left, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-right{background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-top-right{background: linear-gradient(to top right, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-top-left{background: linear-gradient(to top left, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-bottom-right{background: linear-gradient(to bottom right, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-bottom-left{background: linear-gradient(to bottom left, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-black-top{background: linear-gradient(to top, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-bottom{background: linear-gradient(to bottom, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-left{background: linear-gradient(to left, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-right{background: linear-gradient(to right, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-top-right{background: linear-gradient(to top right, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-top-left{background: linear-gradient(to top left, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-bottom-right{background: linear-gradient(to bottom right, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-bottom-left{background: linear-gradient(to bottom left, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.sidebar-green{border-left: 5px solid rgba(18, 222, 173, 1); padding-left:1.5em;}
.sidebar-green > p{padding-bottom:0}


/* responsive adjustments */

@media all and (min-width: 1181px) {
    .hidden{display:none}
}

@media all and (max-width: 1180px) and (min-width: 851px) {
html,body{font-size: 1.3vw;}
body > .container, body > section, body > .row{width:100vw;padding-left:2rem;padding-right:2rem}
.biggest{font-size:10vw}

.m100{width:100% !important}
.m90{width:90% !important}
.m90.margin-right{width:calc(90% - 0.5rem) !important;margin-right:1rem !important;}
.m80{width:80% !important}
.m80.margin-right{width:calc(80% - 0.5rem) !important;margin-right:1rem !important;}

.m75{width:75% !important}
.m75.margin-right{width:calc(75% - 0.5rem) !important; margin-right: 1rem !important;}
.m75.margin{width:calc(75% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.m25.margin-right + .m75.margin-right,.m25.margin + .m75.margin{width:calc(75% - 0.25rem) !important;margin-right:0 !important;}

.m70{width:70% !important}
.m70.margin-right{width:calc(70% - 0.5rem) !important; margin-right: 1rem !important;}
.m70.margin{width:calc(70% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}

.m66{width:66.83% !important}
.m66.margin-right{width:calc(66.83% - 0.5rem) !important; margin-right: 1rem !important;}
.m66.margin{width:calc(66.83% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.m33.margin-right + .m66.margin-right,.m33.margin + .m66.margin{width:calc(66.83% - 0.5rem) !important;margin-right:0 !important;}

.m60{width:60% !important}
.m60.margin-right{width:calc(60% - 0.5rem) !important; margin-right: 1rem !important;}
.m60.margin{width:calc(60% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.m40.margin-right + .m60.margin-right,.m40.margin + .m60.margin{width:calc(60% - 0.5rem) !important;margin-right:0 !important;}

.m50{width:50% !important}
.m50.margin-right{width:calc(50% - 0.5rem) !important; margin-right: 1rem !important;}
.m50.margin{width:calc(50% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.m50.margin-right:nth-of-type(2n),.m50.margin:nth-of-type(2n){margin-right:0 !important}

.m40{width:40% !important}
.m40.margin-right{width:calc(40% - 1rem) !important; margin-right: 1rem !important;}
.m40.margin{width:calc(40% - (1rem / 2)) !important; margin: 0 1rem 1rem 0 !important;}
.m60.margin-right + .m40.margin-right,.m60.margin + .m40.margin{width:calc(40% - 0.5rem) !important;margin-right:0 !important;}

.m33{width:33.32% !important}
.m33.margin-right{width:calc(33.32% - 0.66rem) !important; margin-right: 1rem !important;}
.m33.margin{width:calc(33.32% - 0.66rem) !important; margin: 0 1rem 1rem 0 !important;}
.m33.margin-right:nth-of-type(3n),.m33.margin:nth-of-type(3n){margin-right:0 !important}
.m66.margin-right + .m33.margin-right,.m66.margin + .m33.margin{width:calc(33.17% - 0.5rem) !important;margin-right:0 !important;}

.m30{width:30% !important}
.m30.margin-right{width:calc(30% - 0.5rem) !important; margin-right: 1rem !important;}
.m30.margin{width:calc(30% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.m70.margin-right + .m30.margin-right,.m70.margin + .m30.margin{width:calc(30% - 0.5rem) !important;margin-right:0 !important;}

.m25{width:25% !important}
.m25.margin-right{width:calc(25% - 0.75rem) !important; margin-right: 1rem !important;}
.m25.margin{width:calc(25% - 0.75rem) !important; margin: 0 1rem 1rem 0 !important;}
.m25.margin-right:nth-of-type(4n),.m25.margin:nth-of-type(4n){margin-right:0 !important}
.m75.margin-right + .m25.margin-right,.m75.margin + .m25.margin{width:calc(25% - 0.5rem) !important;margin-right:0 !important;}

.m20{width:20% !important}
.m20.margin-right{width:calc(20% - 0.8rem) !important; margin-right: 1rem !important;}
.m20.margin{width:calc(20% - 0.8rem) !important; margin: 0 1rem 1rem 0 !important;}
.m20.margin-right:nth-of-type(5n),.m20.margin:nth-of-type(5n){margin-right:0 !important}

.m10{width:10% !important}
.m10.margin-right{width:calc(10% - 0.9rem) !important; margin-right: 1rem !important;}
.m10.margin{width:calc(10% - 0.9rem) !important; margin: 0 1rem 1rem 0 !important;}
.m10.margin-right:nth-of-type(10n),.m10.margin:nth-of-type(10n){margin-right:0 !important}

.block-m-100{width:100% !important}
.block-m-90{width:90% !important}
.block-m-90.margin-right{width:calc(90% - 0.5rem) !important;margin-right:1rem !important;}
.block-m-80{width:80% !important}
.block-m-80.margin-right{width:calc(80% - 0.5rem) !important;margin-right:1rem !important;}

.block-m-75{width:75% !important}
.block-m-75.margin-right{width:calc(75% - 0.5rem) !important; margin-right: 1rem !important;}
.block-m-75.margin{width:calc(75% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-m-25.margin-right + .block-m-75.margin-right,.block-m-25.margin + .block-m-75.margin{width:calc(75% - 0.25rem) !important;margin-right:0 !important;}

.block-m-70{width:70% !important}
.block-m-70.margin-right{width:calc(70% - 0.5rem) !important; margin-right: 1rem !important;}
.block-m-70.margin{width:calc(70% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}

.block-m-66{width:66.83% !important}
.block-m-66.margin-right{width:calc(66.83% - 0.5rem) !important; margin-right: 1rem !important;}
.block-m-66.margin{width:calc(66.83% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-m-33.margin-right + .block-m-66.margin-right,.block-m-33.margin + .block-m-66.margin{width:calc(66.83% - 0.5rem) !important;margin-right:0 !important;}

.block-m-60{width:60% !important}
.block-m-60.margin-right{width:calc(60% - 0.5rem) !important; margin-right: 1rem !important;}
.block-m-60.margin{width:calc(60% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-m-40.margin-right + .block-m-60.margin-right,.block-m-40.margin + .block-m-60.margin{width:calc(60% - 0.5rem) !important;margin-right:0 !important;}

.block-m-50{width:50% !important}
.block-m-50.margin-right{width:calc(50% - 0.5rem) !important; margin-right: 1rem !important;}
.block-m-50.margin{width:calc(50% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-m-50.margin-right:nth-of-type(2n),.block-m-50.margin:nth-of-type(2n){margin-right:0 !important}

.block-m-40{width:40% !important}
.block-m-40.margin-right{width:calc(40% - 1rem) !important; margin-right: 1rem !important;}
.block-m-40.margin{width:calc(40% - (1rem / 2)) !important; margin: 0 1rem 1rem 0 !important;}
.block-m-60.margin-right + .block-m-40.margin-right,.block-m-60.margin + .block-m-40.margin{width:calc(40% - 0.5rem) !important;margin-right:0 !important;}

.block-m-33{width:33.32% !important}
.block-m-33.margin-right{width:calc(33.32% - 0.66rem) !important; margin-right: 1rem !important;}
.block-m-33.margin{width:calc(33.32% - 0.66rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-m-33.margin-right:nth-of-type(3n),.block-m-33.margin:nth-of-type(3n){margin-right:0 !important}
.block-m-66.margin-right + .block-m-33.margin-right,.block-m-66.margin + .block-m-33.margin{width:calc(33.17% - 0.5rem) !important;margin-right:0 !important;}

.block-m-30{width:30% !important}
.block-m-30.margin-right{width:calc(30% - 0.5rem) !important; margin-right: 1rem !important;}
.block-m-30.margin{width:calc(30% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-m-70.margin-right + .block-m-30.margin-right,.block-m-70.margin + .block-m-30.margin{width:calc(30% - 0.5rem) !important;margin-right:0 !important;}

.block-m-25{width:25% !important}
.block-m-25.margin-right{width:calc(25% - 0.75rem) !important; margin-right: 1rem !important;}
.block-m-25.margin{width:calc(25% - 0.75rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-m-25.margin-right:nth-of-type(4n),.block-m-25.margin:nth-of-type(4n){margin-right:0 !important}
.block-m-75.margin-right + .block-m-25.margin-right,.block-m-75.margin + .block-m-25.margin{width:calc(25% - 0.5rem) !important;margin-right:0 !important;}

.block-m-20{width:20% !important}
.block-m-20.margin-right{width:calc(20% - 0.8rem) !important; margin-right: 1rem !important;}
.block-m-20.margin{width:calc(20% - 0.8rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-m-20.margin-right:nth-of-type(5n),.block-m-20.margin:nth-of-type(5n){margin-right:0 !important}

.block-m-10{width:10% !important}
.block-m-10.margin-right{width:calc(10% - 0.9rem) !important; margin-right: 1rem !important;}
.block-m-10.margin{width:calc(10% - 0.9rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-m-10.margin-right:nth-of-type(10n),.block-m-10.margin:nth-of-type(10n){margin-right:0 !important}

.grid.col-m-1{grid-template-columns: 1fr}
.grid.col-m-2{grid-template-columns: 1fr 1fr}
.grid.col-m-3{grid-template-columns: 1fr 1fr 1fr;}
.grid.col-m-4{grid-template-columns: 1fr 1fr 1fr 1fr;}
.grid.col-m-5{grid-template-columns: 1fr 1fr 1fr 1fr 1fr;}
.grid.col-m-6{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-m-7{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-m-8{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-m-9{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-m-10{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-m-11{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-m-12{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}

.grid .colspan-m-1{grid-column-end: span 1}
.grid .colspan-m-2{grid-column-end: span 2}
.grid .colspan-m-3{grid-column-end: span 3}
.grid .colspan-m-4{grid-column-end: span 4}
.grid .colspan-m-5{grid-column-end: span 5}
.grid .colspan-m-6{grid-column-end: span 6}
.grid .colspan-m-7{grid-column-end: span 7}
.grid .colspan-m-8{grid-column-end: span 8}
.grid .colspan-m-9{grid-column-end: span 9}
.grid .colspan-m-10{grid-column-end: span 10}
.grid .colspan-m-11{grid-column-end: span 11}
.grid .colspan-m-12{grid-column-end: span 12}
.grid .rowspan-m-1{grid-row-end: span 1}
.grid .rowspan-m-2{grid-row-end: span 2}
.grid .rowspan-m-3{grid-row-end: span 3}
.grid .rowspan-m-4{grid-row-end: span 4}
.grid .rowspan-m-5{grid-row-end: span 5}
.grid .rowspan-m-6{grid-row-end: span 6}
.grid .rowspan-m-7{grid-row-end: span 7}
.grid .rowspan-m-8{grid-row-end: span 8}
.grid .rowspan-m-9{grid-row-end: span 9}
.grid .rowspan-m-10{grid-row-end: span 10}
.grid .rowspan-m-11{grid-row-end: span 11}
.grid .rowspan-m-12{grid-row-end: span 12}

.padding5,.padding4,.padding{padding-top:3rem;padding-right:3rem;padding-bottom:3rem;padding-left:3rem;}
.nav *,.nav.right *{padding:1rem 1rem 1rem 1rem}
.nav.open {background:none; background-color: rgba(255,255,255,0.8); position:fixed; top:0px; left:0px; width:33vw; height:100vh;}
.nav.open.text-white {background-color: rgba(20,20,20,0.8);}
.nav.open.right{left:calc(100% - 33vw);}
.card,.image-card {width:calc(33.33% - (2em / 3));}
.card:nth-of-type(4n),.image-card:nth-of-type(4n){margin:0 1em 1em 0;}
.card:nth-of-type(3n),.image-card:nth-of-type(3n){margin:0 0 1em 0;}

.hidden-m{display:none;}
}
@media all and (max-width: 850px) {
html{font-size: 3.6vw;}
h1 span,h2 span,h3 span,h4 span {font-size:inherit}
p.big,p.text-big,.container > *, .row > *{font-size: 4vw;}
.biggest{font-size:14vw}
img.w100{width:100vw;max-width:100vw;margin-left: -2rem;}
.overflow-x{width:100%}
.overflow-x.mobile{overflow-x:scroll;overflow-y:hidden;white-space: nowrap;-webkit-overflow-scrolling: touch;}
.overflow-x.mobile > * {white-space: normal;}
body > .container, body > section, body > .row{width:100vw;}
body > .container:not(.padding0):not(.p-0), body > section:not(.padding0):not(.p-0), body > .row:not(.padding0):not(.p-0){padding-left:2rem;padding-right:2rem}
body > .container.overflow-x, body > section.overflow-x{width:100vw;padding-left:0;padding-right:0}
.container.no-padding,.row.no-padding{padding:0;}

.s100{width:100% !important}
.s90{width:90% !important}
.s90.margin-right{width:calc(90% - 0.5rem) !important;margin-right:1rem !important;}
.s80{width:80% !important}
.s80.margin-right{width:calc(80% - 0.5rem) !important;margin-right:1rem !important;}

.s75{width:75% !important}
.s75.margin-right{width:calc(75% - 0.5rem) !important; margin-right: 1rem !important;}
.s75.margin{width:calc(75% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.s25.margin-right + .s75.margin-right.s25.margin + .s75.margin{width:calc(75% - 0.25rem) !important;margin-right:0 !important;}

.s70{width:70% !important}
.s70.margin-right{width:calc(70% - 0.5rem) !important; margin-right: 1rem !important;}
.s70.margin{width:calc(70% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}

.s66{width:66.83% !important}
.s66.margin-right{width:calc(66.83% - 0.5rem) !important; margin-right: 1rem !important;}
.s66.margin{width:calc(66.83% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.s33.margin-right + .s66.margin-right,.s33.margin + .s66.margin{width:calc(66.83% - 0.5rem) !important;margin-right:0 !important;}

.s60{width:60% !important}
.s60.margin-right{width:calc(60% - 0.5rem) !important; margin-right: 1rem !important;}
.s60.margin{width:calc(60% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.s40.margin-right + .s60.margin-right,.s40.margin + .s60.margin{width:calc(60% - 0.5rem) !important;margin-right:0 !important;}

.s50{width:50% !important}
.s50.square{height:0;padding-bottom:50% !important}
.s50.margin-right{width:calc(50% - 0.5rem) !important; margin-right: 1rem !important;}
.s50.margin{width:calc(50% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.s50.margin-right:nth-of-type(2n),.s50.margin:nth-of-type(2n){margin-right:0 !important}

.s40{width:40% !important}
.s40.margin-right{width:calc(40% - 1rem) !important; margin-right: 1rem !important;}
.s40.margin{width:calc(40% - (1rem / 2)) !important; margin: 0 1rem 1rem 0 !important;}
.s60.margin-right + .s40.margin-right,.s60.margin + .s40.margin{width:calc(40% - 0.5rem) !important;margin-right:0 !important;}

.s33{width:33.32% !important}
.s33.margin-right{width:calc(33.32% - 0.66rem) !important; margin-right: 1rem !important;}
.s33.margin{width:calc(33.32% - 0.66rem) !important; margin: 0 1rem 1rem 0 !important;}
.s33.margin-right:nth-of-type(3n),.s33.margin:nth-of-type(3n){margin-right:0 !important}
.s66.margin-right + .s33.margin-right,.s66.margin + .s33.margin{width:calc(33.17% - 0.5rem) !important;margin-right:0 !important;}

.s30{width:30% !important}
.s30.margin-right{width:calc(30% - 0.5rem) !important; margin-right: 1rem !important;}
.s30.margin{width:calc(30% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.s70.margin-right + .s30.margin-right,.s70.margin + .s30.margin{width:calc(30% - 0.5rem) !important;margin-right:0 !important;}

.s25{width:25% !important}
.s25.margin-right{width:calc(25% - 0.75rem) !important; margin-right: 1rem !important;}
.s25.margin{width:calc(25% - 0.75rem) !important; margin: 0 1rem 1rem 0 !important;}
.s25.margin-right:nth-of-type(4n),.s25.margin:nth-of-type(4n){margin-right:0 !important}
.s75.margin-right + .s25.margin-right,.s75.margin + .s25.margin{width:calc(25% - 0.5rem) !important;margin-right:0 !important;}

.s20{width:20% !important}
.s20.margin-right{width:calc(20% - 0.8rem) !important; margin-right: 1rem !important;}
.s20.margin{width:calc(20% - 0.8rem) !important; margin: 0 1rem 1rem 0 !important;}
.s20.margin-right:nth-of-type(5n),.s20.margin:nth-of-type(5n){margin-right:0 !important}

.s10{width:10% !important}
.s10.margin-right{width:calc(10% - 0.9rem) !important; margin-right: 1rem !important;}
.s10.margin{width:calc(10% - 0.9rem) !important; margin: 0 1rem 1rem 0 !important;}
.s10.margin-right:nth-of-type(10n),.s10.margin:nth-of-type(10n){margin-right:0 !important}

.block-s-100{width:100% !important}
.block-s-90{width:90% !important}
.block-s-90.margin-right{width:calc(90% - 0.5rem) !important;margin-right:1rem !important;}
.block-s-80{width:80% !important}
.block-s-80.margin-right{width:calc(80% - 0.5rem) !important;margin-right:1rem !important;}

.block-s-75{width:75% !important}
.block-s-75.margin-right{width:calc(75% - 0.5rem) !important; margin-right: 1rem !important;}
.block-s-75.margin{width:calc(75% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-s-25.margin-right + .block-s-75.margin-right.block-s-25.margin + .block-s-75.margin{width:calc(75% - 0.25rem) !important;margin-right:0 !important;}

.block-s-70{width:70% !important}
.block-s-70.margin-right{width:calc(70% - 0.5rem) !important; margin-right: 1rem !important;}
.block-s-70.margin{width:calc(70% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}

.block-s-66{width:66.83% !important}
.block-s-66.margin-right{width:calc(66.83% - 0.5rem) !important; margin-right: 1rem !important;}
.block-s-66.margin{width:calc(66.83% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-s-33.margin-right + .block-s-66.margin-right,.block-s-33.margin + .block-s-66.margin{width:calc(66.83% - 0.5rem) !important;margin-right:0 !important;}

.block-s-60{width:60% !important}
.block-s-60.margin-right{width:calc(60% - 0.5rem) !important; margin-right: 1rem !important;}
.block-s-60.margin{width:calc(60% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-s-40.margin-right + .block-s-60.margin-right,.block-s-40.margin + .block-s-60.margin{width:calc(60% - 0.5rem) !important;margin-right:0 !important;}

.block-s-50{width:50% !important}
.block-s-50.block-s-quare{height:0;padding-bottom:50% !important}
.block-s-50.margin-right{width:calc(50% - 0.5rem) !important; margin-right: 1rem !important;}
.block-s-50.margin{width:calc(50% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-s-50.margin-right:nth-of-type(2n),.block-s-50.margin:nth-of-type(2n){margin-right:0 !important}

.block-s-40{width:40% !important}
.block-s-40.margin-right{width:calc(40% - 1rem) !important; margin-right: 1rem !important;}
.block-s-40.margin{width:calc(40% - (1rem / 2)) !important; margin: 0 1rem 1rem 0 !important;}
.block-s-60.margin-right + .block-s-40.margin-right,.block-s-60.margin + .block-s-40.margin{width:calc(40% - 0.5rem) !important;margin-right:0 !important;}

.block-s-33{width:33.32% !important}
.block-s-33.margin-right{width:calc(33.32% - 0.66rem) !important; margin-right: 1rem !important;}
.block-s-33.margin{width:calc(33.32% - 0.66rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-s-33.margin-right:nth-of-type(3n),.block-s-33.margin:nth-of-type(3n){margin-right:0 !important}
.block-s-66.margin-right + .block-s-33.margin-right,.block-s-66.margin + .block-s-33.margin{width:calc(33.17% - 0.5rem) !important;margin-right:0 !important;}

.block-s-30{width:30% !important}
.block-s-30.margin-right{width:calc(30% - 0.5rem) !important; margin-right: 1rem !important;}
.block-s-30.margin{width:calc(30% - 0.5rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-s-70.margin-right + .block-s-30.margin-right,.block-s-70.margin + .block-s-30.margin{width:calc(30% - 0.5rem) !important;margin-right:0 !important;}

.block-s-25{width:25% !important}
.block-s-25.margin-right{width:calc(25% - 0.75rem) !important; margin-right: 1rem !important;}
.block-s-25.margin{width:calc(25% - 0.75rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-s-25.margin-right:nth-of-type(4n),.block-s-25.margin:nth-of-type(4n){margin-right:0 !important}
.block-s-75.margin-right + .block-s-25.margin-right,.block-s-75.margin + .block-s-25.margin{width:calc(25% - 0.5rem) !important;margin-right:0 !important;}

.block-s-20{width:20% !important}
.block-s-20.margin-right{width:calc(20% - 0.8rem) !important; margin-right: 1rem !important;}
.block-s-20.margin{width:calc(20% - 0.8rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-s-20.margin-right:nth-of-type(5n),.block-s-20.margin:nth-of-type(5n){margin-right:0 !important}

.block-s-10{width:10% !important}
.block-s-10.margin-right{width:calc(10% - 0.9rem) !important; margin-right: 1rem !important;}
.block-s-10.margin{width:calc(10% - 0.9rem) !important; margin: 0 1rem 1rem 0 !important;}
.block-s-10.margin-right:nth-of-type(10n),.block-s-10.margin:nth-of-type(10n){margin-right:0 !important}

.grid.col-s-1{grid-template-columns: 1fr}
.grid.col-s-2{grid-template-columns: 1fr 1fr}
.grid.col-s-3{grid-template-columns: 1fr 1fr 1fr;}
.grid.col-s-4{grid-template-columns: 1fr 1fr 1fr 1fr;}
.grid.col-s-5{grid-template-columns: 1fr 1fr 1fr 1fr 1fr;}
.grid.col-s-6{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-s-7{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-s-8{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-s-9{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-s-10{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-s-11{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}
.grid.col-s-12{grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;}

.grid .colspan-s-1{grid-column-end: span 1}
.grid .colspan-s-2{grid-column-end: span 2}
.grid .colspan-s-3{grid-column-end: span 3}
.grid .colspan-s-4{grid-column-end: span 4}
.grid .colspan-s-5{grid-column-end: span 5}
.grid .colspan-s-6{grid-column-end: span 6}
.grid .colspan-s-7{grid-column-end: span 7}
.grid .colspan-s-8{grid-column-end: span 8}
.grid .colspan-s-9{grid-column-end: span 9}
.grid .colspan-s-10{grid-column-end: span 10}
.grid .colspan-s-11{grid-column-end: span 11}
.grid .colspan-s-12{grid-column-end: span 12}
.grid .rowspan-s-1{grid-row-end: span 1}
.grid .rowspan-s-2{grid-row-end: span 2}
.grid .rowspan-s-3{grid-row-end: span 3}
.grid .rowspan-s-4{grid-row-end: span 4}
.grid .rowspan-s-5{grid-row-end: span 5}
.grid .rowspan-s-6{grid-row-end: span 6}
.grid .rowspan-s-7{grid-row-end: span 7}
.grid .rowspan-s-8{grid-row-end: span 8}
.grid .rowspan-s-9{grid-row-end: span 9}
.grid .rowspan-s-10{grid-row-end: span 10}
.grid .rowspan-s-11{grid-row-end: span 11}
.grid .rowspan-s-12{grid-row-end: span 12}

.overflow-x *[class^='w'].responsive{width:80%}
.mobile-hide,.mobile-show{display: none !important;}
.mobile-show{display: block !important;}
.hidden-s{display:none;}
*[class^='w'].mobile-show,button.mobile-show{display: inline-block !important;}
a.mobile-show,span.mobile-show,svg.mobile-show{display:inline !important;}
.table.mobile-show{display: table !important;}
*[class^='w'].padding1-left,*[class^='w'].padding2-left,*[class^='w'].padding-left,*[class^='w'].padding4-left,*[class^='w'].padding5-left{padding-left:0;}
*[class^='w'].padding1-right,*[class^='w'].padding2-right,*[class^='w'].padding-right,*[class^='w'].padding4-right,*[class^='w'].padding5-right{padding-right:0}
.padding5{padding-top:5rem;padding-right:2rem;padding-bottom:5rem;padding-left:2rem;}
.padding4{padding-top:4rem;padding-right:2rem;padding-bottom:4rem;padding-left:2rem;}
.padding{padding-top:3rem;padding-right:2rem;padding-bottom:3rem;padding-left:2rem;}
.nav *,.nav.right *{padding:1rem 1rem 1rem 1rem}
.nav.open {background:none; background-color: rgba(255,255,255,0.8); position:fixed; top:0px; left:0px; width:50vw; height:100vh;}
.nav.open.text-white {background-color: rgba(20,20,20,0.8);}
.nav.open.right{left:calc(100% - 50vw);}
.nav-bar a{display:none; text-align: left;}
.nav-bar .text-right a, .nav-bar a.text-right, .nav-bar.text-right a{text-align: left;}
.nav-bar.open a{padding:1em; display:block; width:100%}
.card,.image-card {width:calc(100vw - 4em);margin-bottom: 1rem}
.card:nth-of-type(4n),.image-card:nth-of-type(4n){margin:0 1em 1em 0;}
.overflow-x .card,.overflow-x .image-card{width:calc(80vw - 2em);}
.overflow-x .card:first-child,.overflow-x .image-card:first-child{margin-left:2rem}
.overflow-x .card:last-child,.overflow-x .image-card:last-child{margin-right:2rem}
.modal > div{width: 90vw}
.grad-white-top{background: linear-gradient(to top, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-bottom{background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-left{background: linear-gradient(to left, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-right{background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-top-right{background: linear-gradient(to top right, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-top-left{background: linear-gradient(to top left, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-bottom-right{background: linear-gradient(to bottom right, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-white-bottom-left{background: linear-gradient(to bottom left, rgba(255,255,255,0) 0%, rgba(255,255,255,1));}
.grad-black-top{background: linear-gradient(to top, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-bottom{background: linear-gradient(to bottom, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-left{background: linear-gradient(to left, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-right{background: linear-gradient(to right, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-top-right{background: linear-gradient(to top right, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-top-left{background: linear-gradient(to top left, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-bottom-right{background: linear-gradient(to bottom right, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}
.grad-black-bottom-left{background: linear-gradient(to bottom left, rgba(2,2,2,0) 0%, rgba(2,2,2,1));}

}

        /* This comment need to fix syntax highlighting */
    </style>

    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,600" rel="stylesheet">
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/solid.js" integrity="sha384-+Ga2s7YBbhOD6nie0DzrZpJes+b2K1xkpKxTFFcx59QmVPaSA8c7pycsNaFwUK6l" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/regular.js" integrity="sha384-t7yHmUlwFrLxHXNLstawVRBMeSLcXTbQ5hsd0ifzwGtN7ZF7RZ8ppM7Ldinuoiif" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/fontawesome.js" integrity="sha384-7ox8Q2yzO/uWircfojVuCQOZl+ZZBg2D2J5nkpLqzH1HY0C1dHlTKIbpRz/LG23c" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.5/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.5/angular-sanitize.min.js"></script>

    <script>

    var hassApp = angular.module('hassApp', ['pr.longpress','ngSanitize']);

    hassApp.controller('hassCtrl', ['$scope', '$http','$location', function($scope, $http, $location) {

        $scope.buttonSize = function(val){
            var html = document.getElementsByTagName('html')[0];
            html.style.setProperty("--grid-size", val);
            $scope.settings.button_size = val;
        }

        $scope.startWebSocket = function(){
            var ws_url = $scope.settings.server_url.replace(/http|https/i,'ws');
            ws = new WebSocket(ws_url+'/api/websocket?api_password='+$scope.settings.server_api_password);

            ws.addEventListener('open', function (event) {
                ws.send('{"id": 1, "type": "subscribe_events", "event_type": "state_changed"}\n');
            });

            ws.onmessage = function(event) {
                var data = JSON.parse(event.data);
                if (data && data.event && data.event.data && data.event.data.new_state){

                    if ($scope.settings.debug === true){

                        if (data.event.data.new_state.entity_id != 'sun.sun' || $scope.settings.debug_sun_events === true && data.event.data.new_state.entity_id == 'sun.sun'){
                        //    notify_sound.play();
                            $scope.debug_notification = {};
                            if (data.event.data.new_state.attributes && data.event.data.new_state.attributes.entity_id){
                                if (typeof data.event.data.new_state.attributes.entity_id == 'object'){
                                    $scope.debug_notification.title = data.event.data.new_state.attributes.entity_id.join(', ');
                                } else {
                                    $scope.debug_notification.title = data.event.data.new_state.attributes.entity_id;
                                }

                            } else {
                                $scope.debug_notification.title = data.event.data.new_state.entity_id;
                            }

                            $scope.debug_notification.message = "State: "+data.event.data.new_state.state;
                            if (data.event.data.new_state.attributes.azimuth){
                                $scope.debug_notification.message += ",  Azimuth: "+data.event.data.new_state.attributes.azimuth;
                            }
                            if (data.event.data.new_state.attributes.elevation){
                                $scope.debug_notification.message += ", Elevation: "+data.event.data.new_state.attributes.elevation;
                            }
                            $scope.debug_notification.time = data.event.time_fired;
                        }

                        $scope.entity[data.event.data.entity_id] = data.event.data.new_state;

                        // auto off trigger
                        if ($scope.schedule_index[data.event.data.entity_id]){
                            if (data.event.data.new_state.state && data.event.data.new_state.state == 'on'){
                                for (var i in $scope.schedule_index[data.event.data.entity_id]){
                                    if ($scope.schedule_index[data.event.data.entity_id][i].action && $scope.schedule_index[data.event.data.entity_id][i].action == 'auto_off'){
                                        $scope.addSchedule($scope.entity[data.event.data.entity_id],$scope.schedule_index[data.event.data.entity_id][i].time,'light.turn_off',false)
                                    }
                                }
                            }
                        }

                        // entity trigger
                        if ($scope.schedule[data.event.data.entity_id]){
                            if (data.event.data.new_state.state && data.event.data.new_state.state.match(/on|home|true|playing|paused/)){
                                for (var i in $scope.schedule[data.event.data.entity_id]){
                                    if ($scope.schedule[data.event.data.entity_id][i].action){
                                        if (data.event.data.new_state.state == 'playing'){
                                            $scope.toggle($scope.schedule[data.event.data.entity_id][i].entity,'light.turn_on/brightness');
                                        } else if (data.event.data.new_state.state == 'paused'){
                                            var temp_entity = angular.copy($scope.schedule[data.event.data.entity_id][i].entity);
                                            temp_entity.attributes.brightness = 255;
                                            $scope.toggle(temp_entity,'light.turn_on/brightness');
                                        } else {
                                            $scope.toggle($scope.schedule[data.event.data.entity_id][i].entity,'light.turn_on')
                                        }

                                    }
                                }
                            }
                        }

                    } else if (data.event.data.entity_id.match(/^persistent_notification/) && $scope.settings.notifications.show === true){

                        $scope.view.top_right = 'notification';
                        $scope.notification = {};
                        $scope.notification.title = data.event.data.new_state.attributes.title;
                        $scope.notification.message = data.event.data.new_state.attributes.message;
                        $scope.notification.time = data.event.time_fired;

                        if ($scope.notification.title.match(/bell/i)){
                            bell_chime.play();
                        }

                        if ($scope.settings.notifications.auto_dismiss === true){
                            var url = $scope.settings.server_url+'/api/services/persistent_notification/dismiss?api_password='+$scope.settings.server_api_password;
                            var data = {"notification_id": data.event.data.entity_id.replace(/persistent_notification\./,'')}
                            setTimeout(function(){
                                $scope.$apply(function(){
                                    $http({
                                        method: 'POST',
                                        url: url,
                                        data:data
                                    }).then(function (data, status, headers, config) {
                                        $scope.notification = {};
                                        $scope.view.top_right = 'weather';
                                    });
                                });
                            },$scope.settings.notifications.timeout);
                        }

                    } else {
                        $scope.entity[data.event.data.entity_id] = data.event.data.new_state;

                        // auto off trigger
                        if ($scope.schedule_index[data.event.data.entity_id]){
                            if (data.event.data.new_state.state && data.event.data.new_state.state == 'on'){
                                for (var i in $scope.schedule_index[data.event.data.entity_id]){
                                    if ($scope.schedule_index[data.event.data.entity_id][i].action && $scope.schedule_index[data.event.data.entity_id][i].action == 'auto_off'){
                                        $scope.addSchedule($scope.entity[data.event.data.entity_id],$scope.schedule_index[data.event.data.entity_id][i].time,'light.turn_off',false)
                                    }
                                }
                            }
                        }

                        // entity trigger, but only at night
                        if ($scope.schedule[data.event.data.entity_id] && $scope.events.day_night != 'daytime'){
                            if (data.event.data.new_state.state && data.event.data.new_state.state.match(/on|home|true|playing|paused/)){
                                for (var i in $scope.schedule[data.event.data.entity_id]){
                                    if ($scope.schedule[data.event.data.entity_id][i].action){
                                        if (data.event.data.new_state.state == 'playing'){
                                            $scope.toggle($scope.schedule[data.event.data.entity_id][i].entity,'light.turn_on/brightness');
                                        } else if (data.event.data.new_state.state == 'paused'){
                                            var temp_entity = angular.copy($scope.schedule[data.event.data.entity_id][i].entity);
                                            temp_entity.attributes.brightness = 255;
                                            $scope.toggle(temp_entity,'light.turn_on/brightness');
                                        } else {
                                            $scope.toggle($scope.schedule[data.event.data.entity_id][i].entity,'light.turn_on')
                                        }

                                    }
                                }
                            }
                        }

                        // update weather events
                        if ($scope.settings.weather && $scope.settings.weather.condition){
                            if (data.event.data.entity_id == $scope.settings.weather.condition){
                                $scope.weatherBg(data.event.data.new_state.state);
                            }
                        }

                    }

                    if (data.event.data.new_state.entity_id == 'sun.sun'){
                        var hours = new Date().getHours();
                        if (data.event.data.new_state.attributes && data.event.data.new_state.attributes.elevation){

                            if (data.event.data.new_state.attributes.elevation < 0){
                                if ($scope.events.day_night != 'nighttime'){
                                    if ($scope.schedule && $scope.schedule.sunset){
                                        $scope.runSchedule('nighttime');
                                    }
                                }
                                $scope.events.day_night = 'nighttime';
                            } else if (data.event.data.new_state.attributes.elevation > -10 && data.event.data.new_state.attributes.elevation < 10){
                                if (hours >= 0 && hours < 12){
                                    if ($scope.events.day_night != 'sunrise'){
                                        if ($scope.schedule && $scope.schedule.sunrise){
                                            $scope.runSchedule('sunrise');
                                        }
                                    }
                                    $scope.events.day_night = 'sunrise';
                                } else {
                                    if ($scope.events.day_night != 'sunset'){
                                        if ($scope.schedule && $scope.schedule.sunset){
                                            $scope.runSchedule('sunset');
                                        }
                                    }
                                    $scope.events.day_night = 'sunset';
                                }
                            } else {
                                if ($scope.events.day_night != 'daytime'){
                                    if ($scope.schedule && $scope.schedule.sunset){
                                        $scope.runSchedule('daytime');
                                    }
                                }
                                $scope.events.day_night = 'daytime';
                            }
                        }
                    }

                }
            };
            ws.onclose = function() {
                if (!$scope.debug_notification){
                    $scope.debug_notification = {};
                }
                $scope.debug_notification.title = 'Socket connection closed, reconnecting...';
                $scope.debug_notification.message = '';
                $scope.debug_notification.time = Date.now();
            };
            ws.onopen = function() {
                if (!$scope.debug_notification){
                    $scope.debug_notification = {};
                }
                $scope.debug_notification.title = 'Socket connection open';
                $scope.debug_notification.message = '';
                $scope.debug_notification.time = Date.now();
            };
        }

        if (localStorage.getItem('settings')){
            $scope.settings = JSON.parse(localStorage.getItem('settings'));
            if ($scope.settings.button_size){
                $scope.buttonSize($scope.settings.button_size);
            }
            if (!$scope.settings.weather){
                $scope.settings.weather = {};
                $scope.settings.weather.show_bg = true;
            }

        } else {
            $scope.settings = {};
            $scope.settings.background_color = 'bg-dark-grey';
            $scope.settings.weather = {};
            $scope.settings.weather.show_bg = true;
        }

        if (localStorage.getItem('schedule')){
            $scope.schedule = JSON.parse(localStorage.getItem('schedule'));
        } else {
            $scope.schedule = {};
        }

        if (localStorage.getItem('schedule_index')){
            $scope.schedule_index = JSON.parse(localStorage.getItem('schedule_index'));
        } else {
            $scope.schedule_index = {};
        }

        if (localStorage.getItem('custom_groups')){
            $scope.custom_groups = JSON.parse(localStorage.getItem('custom_groups'));
        } else {
            $scope.custom_groups = [];
        }

        if (localStorage.getItem('custom_entities')){
            $scope.custom_entities = JSON.parse(localStorage.getItem('custom_entities'));
        } else {
            $scope.custom_entities = {};
        }

        $scope.view = {};
        $scope.view.page = '';
        $scope.view.edit_mode = 0;

        if ($scope.settings && $scope.settings.debug){
            $scope.view.top_right = 'debug';
        } else {
            $scope.view.top_right = 'weather';
        }

        $scope.last_called = 0;
        $scope.this_call = 0;
        $scope.clock = 0;
        $scope.states = {};

        $scope.events = {};

        $scope.notification = {};
        $scope.local_notification = {};
        $scope.debug_notification = {};

        // sounds
        var bell_chime = new Audio('/sounds/Doorbell-ringtone.mp3');
        var notify_sound = new Audio('/sounds/sms-tone.mp3');


        $scope.connect = function(test){
        //    console.log('1. getting states from API');
            $http({
                method: 'GET',
                url: $scope.settings.server_url+'/api/states',
                headers: {'x-ha-access': $scope.settings.server_api_password},
                timeout:6000
            }).then(function (data, status, headers, config) {
                if (!test){
                    $scope.states = data.data;
            //       console.log('1. Received states from API');
            //       console.log($scope.states);
                    $scope.groups = [];
                    if ($scope.custom_groups.length>0){
                        $scope.groups = $scope.custom_groups;
                    }
                    $scope.entity = {};
                    if ($scope.custom_entities){
                        $scope.entity = $scope.custom_entities;
                    }
                    $scope.entities = [];

                    $scope.getEntities(0);
                }
            }).catch(function(res){
                var new_url = prompt('Unable to connect to Home Assistant. Please check the Server URL is accessible from this device or change the URL below:',$scope.settings.server_url);
                if (new_url){
                    $scope.settings.server_url = new_url;
                    $scope.connect();
                }
            });

            if (!test){

                // start WebSocket connection for pushed event updates

                $scope.startWebSocket();
            }
        }

        if ($scope.settings.server_url){
            $scope.view.page = 'loading';
            $scope.connect();
        } else {
            $scope.view.message = '<h4>Welcome to the Control Panel Setup</h4><br>Click the button below to search for your Home Automation server. ';
            if (document.location.href.match(/reformedreality\.com/)){
                if (!document.location.protocol.match(/https/i)){
                    $scope.view.message += 'If your Home Automation server is using HTTPS, click <a href="https://reformedreality.com/hass">here</a> to use the encrypted version of Control Panel.'
                } else if (document.location.protocol.match(/https/i)){
                    $scope.view.message += "If your Home Automation server doesn't use HTTPS, click <a href='http://reformedreality.com/hass'>here</a> to use the HTTP Control Panel."
                }
            }
            $scope.view.page = 'initsettings';
        }


        // connect to the API to get the groups and entities.
        // Asynchronously loop through each one and build the data - pages (contains the groups which is only used to initially layout the page) and entity (contains all the entity data)

        $scope.getEntities = function(i){

            if ($scope.states[i] && $scope.states[i].entity_id && $scope.states[i].entity_id.match(/group./)){ // get group entities and create a page
                if ($scope.custom_groups.length<=0){
                    $scope.groups.push($scope.states[i]);
                }

            } else if ($scope.states[i] && $scope.states[i].entity_id){ // get single entity and create the default page if it doesn't exist

                $scope.entity[$scope.states[i].entity_id] = $scope.states[i]
                $scope.entities.push($scope.states[i]);

                if ($scope.settings.weather && $scope.settings.weather.condition || $scope.settings.weather && $scope.settings.weather.precipitation){
                    if ($scope.states[i].entity_id == $scope.settings.weather.condition){
                        $scope.weatherBg($scope.states[i].state);
                    }
                }


            } // if neither group or single entity, continue with the loop

            i++;
            if ($scope.states[i]){
                $scope.getEntities(i);
            } else {

                // this is the end of the loop - all of the pages have been created and the entity data has been fetched
                // console.log('2. Entity data fetched:');
                // console.log($scope.entity);
                // console.log('3. Parsed the following pages:');
                // console.log($scope.groups);
                $scope.view.page = 'control';
                // $scope.groups = angular.extend($scope.groups,$scope.groups,$scope.custom_groups);
                // $scope.view.no_groups = true;
                // $scope.view.edit_mode = 1;
                // for (var i in $scope.groups){
                //     if ($scope.groups[i].view == true){
                //         $scope.view.no_groups = false;
                //         $scope.view.edit_mode = 0;
                //     }
                // }
            }
        }

        $scope.searchHA = function(url){
            $scope.view.searching = true;
            if (!url){
                $scope.settings.server_url = "https://hassio.local:8123";
            } else {
                $scope.settings.server_url = url;
            }

            var ws_chk_url = $scope.settings.server_url.replace(/https/i,'ws').replace(/http/i,'ws');
            ws_chk = new WebSocket(ws_chk_url+'/api/websocket');

            setTimeout(function(){
                if (typeof ws_chk.readyState == 'undefined' || ws_chk.readyState == 0){

                    if ($scope.settings.server_url == "https://hassio.local:8123"){
                        $scope.searchHA("http://hassio.local:8123");
                    } else if ($scope.settings.server_url == "http://hassio.local:8123"){
                        $scope.searchHA("http://hassbian.local:8123");
                    } else if ($scope.settings.server_url == "http://hassbian.local:8123" && !document.location.origin.match(/reformedreality\.com/)){
                        $scope.searchHA(document.location.origin);
                    } else if ($scope.settings.server_url == document.location.origin && !document.location.origin.match(/reformedreality\.com/) && $scope.view.page == 'initsettings') {
                        $scope.view.searching = false;
                        $scope.view.page = 'setup2';
                        $scope.view.message = "We couldn't auto detect your server, please enter your Home Assistant server address below";
                    } else {
                        $scope.view.searching = false;
                        $scope.view.page = 'setup2';
                        if (!document.location.protocol.match(/https/i)){
                            var https_mess = 'HTTPS version of the Control Panel: <a href="https://reformedreality.com/hass">here</a>.';
                        } else if (document.location.protocol.match(/https/i)){
                            var https_mess = 'HTTP version of the Control Panel: <a href="http://reformedreality.com/hass">here</a>.';
                        }
                        $scope.view.message = 'Unable to connect. You may need to enable CORS access on your Home Assistant server, or you may need to use the '+https_mess+'<br><br>Please goto the following URL for more information:<br><a href="http://reformedreality.com/home-assistant-control-panel#troubleshooting" target="other">http://reformedreality.com/home-assistant-control-panel#troubleshooting</a>';
                    }

                } else {
                    console.log('Found '+$scope.settings.server_url);
                    $scope.view.searching = false;
                    $scope.testAPI();
                }
            },1000)

        }

        $scope.testAPI = function(pass){

            if (!pass){
                pass = '';
            } else {
                $scope.settings.server_api_password = pass;
                // pass = '?api_password='+pass;
            }

            $http({
                method: 'GET',
                url: $scope.settings.server_url+'/api/',
                headers: {'x-ha-access': pass},
                timeout:6000
            }).then(function (data, status, headers, config) {
                // test ok
                $scope.view.page = 'control';
                $scope.settings.background = '';
                $scope.settings.background_color = 'bg-dark-grey bg-color';
                localStorage.setItem('settings',JSON.stringify($scope.settings));
                $scope.connect();

            }).catch(function(data, status, headers, config){
                if (!pass){
                    // var new_pass = prompt('Enter your API password');
                    // if (new_pass !== false){
                    //     $scope.testAPI(new_pass);
                    // } else {
                    //     alert('Unable to connect to your Home Assistant API. Please goto the following URL for more information: https://www.home-assistant.io/components/http/');
                    // }
                    $scope.view.page = 'setup3';
                    $scope.view.message = '<b>Found '+$scope.settings.server_url+'</b>!<br><br>Please enter your API password';

                } else {
                    // var new_pass = prompt('Unable to connect to your Home Assistant API. Please retry your API password, or visit the following URL for more information: https://www.home-assistant.io/components/http/');
                    // if (new_pass !== false){
                    //     $scope.testAPI(new_pass);
                    // } else {
                    //     alert('Unable to connect to your Home Assistant API. Please goto the following URL for more information: https://www.home-assistant.io/components/http/');
                    // }
                    $scope.view.page = 'setup3';
                    $scope.view.message = 'Unable to connect to your Home Assistant API. Please goto the following URL for more information:<br><a href="http://reformedreality.com/home-assistant-control-panel#troubleshooting" target="other">http://reformedreality.com/home-assistant-control-panel#troubleshooting</a>';
                }

            });
        }

        // toggle a switch - conditional api request depending on the data from the switch

        $scope.toggle = function(entity,attribute,page){
console.log(entity,attribute,page)
            if ($scope.view.edit_mode == 1 && page){

                if (!entity || !entity.entity_id){
                    entity = {};
                    entity.entity_id = 'this entity';
                }
                var conf = confirm('Are you sure you want to remove '+entity.entity_id+' from the '+page+' group?');
                if (conf){
                    var item = $scope.groups.find(item => item.entity_id == page);
                    var index = $scope.groups.indexOf(item);
                    if ($scope.groups[index] && $scope.groups[index].attributes && $scope.groups[index].attributes.entity_id){
                        $scope.groups[index].attributes.entity_id.splice($scope.groups[index].attributes.entity_id.indexOf(entity.entity_id),1)
                        $scope.custom_groups = $scope.groups;
                        localStorage.setItem('custom_groups',JSON.stringify($scope.custom_groups));
                    }
                }

            } else if (entity.entity_id.match(/custom\_scene/)){

                var item = $scope.groups.find(item => item.entity_id == page);
                var index = $scope.groups.indexOf(item);
                for (var i=0;i<$scope.groups[index].attributes.entity_id.length;i++){
                    if ($scope.groups[index].attributes.entity_id[i].match(/custom_scene/)){
                        $scope.entity[$scope.groups[index].attributes.entity_id[i]].state = 'off';
                    }
                    if (i == $scope.groups[index].attributes.entity_id.length-1){
                        $scope.entity[entity.entity_id].state = 'on';
                        $scope.applyScene(entity);
                    }
                }

            } else {

                if (page){ // turn off all scenes when an individual lights are changed
                    var item = $scope.groups.find(item => item.entity_id == page);
                    var index = $scope.groups.indexOf(item);

                    if (parseInt(index) && index>=0){
                        for (var i=0;i<$scope.groups[index].attributes.entity_id.length;i++){
                            if ($scope.groups[index].attributes.entity_id[i].match(/custom_scene/)){
                                $scope.entity[$scope.groups[index].attributes.entity_id[i]].state = 'off';
                            }
                        }
                    }
                }

                if (entity.entity_id.match(/group\./) && $scope.entity[entity.entity_id] && $scope.entity[entity.entity_id].attributes && $scope.entity[entity.entity_id].attributes.entity_id){
                    attribute = $scope.entity[entity.entity_id].attributes.entity_id[0].split('.')[0]+'/toggle';
                    if (attribute == 'group/toggle'){ // fall back to the light service for unknown groups
                        attribute = 'light/toggle';
                    }
                }


                url = false;

                if (attribute){ // set values

                    var data = {};


                    if (!attribute.match(/off/) && entity.attributes && entity.attributes.brightness){
                        data.brightness = entity.attributes.brightness;
                    }
                    if (!attribute.match(/off/) && entity.attributes && entity.attributes.color_temp){
                        data.color_temp = entity.attributes.color_temp;
                    }

                    if (entity.entity_ids){
                        data.entity_id = entity.entity_ids;
                    } else {
                        data.entity_id = entity.entity_id;
                    }

                    var url = $scope.settings.server_url+'/api/services/'+attribute;

                } else if (!attribute) { // toggle switch
                    console.log(entity);
                    if (entity.entity_id.split('.')[0].match(/light|group|custom_scene/)){
                        if (entity.state == 'on'){
                            var url = $scope.settings.server_url+'/api/services/light/turn_off';
                        } else if (entity.state == 'off'){
                            var url = $scope.settings.server_url+'/api/services/light/turn_on';
                        } else {
                            var url = $scope.settings.server_url+'/api/services/light/toggle';
                        }

                        if (entity.entity_ids){
                            var data = {"entity_id": entity.entity_ids}
                        } else {
                            var data = {"entity_id": entity.entity_id}
                        }
                    } else if (entity.entity_id.split('.')[0].match(/scene/)){
                        var url = $scope.settings.server_url+'/api/services/scene/turn_on';
                        if (entity.entity_ids){
                            var data = {"entity_id": entity.entity_ids}
                        } else {
                            var data = {"entity_id": entity.entity_id}
                        }
                    } else if (entity.entity_id.split('.')[0].match(/switch/)){
                        var url = $scope.settings.server_url+'/api/services/switch/toggle';
                        if (entity.entity_ids){
                            var data = {"entity_id": entity.entity_ids}
                        } else {
                            var data = {"entity_id": entity.entity_id}
                        }
                    } else if (entity.entity_id.split('.')[0].match(/script/)){
                        var url = $scope.settings.server_url+'/api/services/script/'+entity.entity_id.split('.')[1];
                        if (entity.entity_ids){
                            var data = {"entity_id": entity.entity_ids}
                        } else {
                            var data = {"entity_id": entity.entity_id}
                        }
                    } else if (entity.entity_id.split('.')[0] == 'media_player'){
                        var url = $scope.settings.server_url+'/api/services/media_player/media_play_pause';
                        if (entity.entity_ids){
                            var data = {"entity_id": entity.entity_ids}
                        } else {
                            var data = {"entity_id": entity.entity_id}
                        }
                    }

                }

                $scope.local_notification = {};
                $scope.local_notification.title = data.entity_id;
                if (data.brightness){
                    $scope.local_notification.title += ", Brightness: "+data.brightness;
                }
                if (data.color_temp){
                    $scope.local_notification.title += ", Color: "+data.color_temp;
                }
                $scope.local_notification.message = url;
                $scope.local_notification.time = Date.now();
                $scope.local_notification.status = "Submitting...";

                $scope.events.calling = true;

                if (url){

                    if (data.brightness && data.color_temp){
                        var data_color = angular.copy(data);
                        delete data_color.brightness;
                        delete data.color_temp;
                        setTimeout(function(){
                            $http({
                                method: 'POST',
                                url: url,
                                headers: {'x-ha-access': $scope.settings.server_api_password},
                                data:data_color
                            }).then(function (data, status, headers, config) {
                                $scope.events.calling = false;
                                $scope.local_notification.time = Date.now();
                                $scope.local_notification.status = "Completed";
                                // console.log(data)
                                if (typeof page == 'function'){
                                    page();
                                }
                            });
                        },500)
                    }
                    $http({
                        method: 'POST',
                        url: url,
                        headers: {'x-ha-access': $scope.settings.server_api_password},
                        data:data
                    }).then(function (data, status, headers, config) {
                        $scope.events.calling = false;
                        $scope.local_notification.time = Date.now();
                        $scope.local_notification.status = "Completed";
                        // console.log(data)
                        if (typeof page == 'function'){
                            page();
                        }
                    });

                }

            }
        }

        $scope.applyScene = function(entity){
            const j = entity.scene_data.length;
            for (let i = 0; i < j; i++) {
                console.log(entity.scene_data[i])
                $scope.toggle(entity.scene_data[i],'light/turn_'+entity.scene_data[i].state,function() {
                //    console.log(i);
                });
            }
        }

        $scope.toggleEditMode = function(){
            if ($scope.view.edit_mode == 0){
                $scope.view.edit_mode = 1;
            } else {
                $scope.view.edit_mode = 0;
            }
            $scope.sortGroups();
        }

        $scope.sortGroups = function(){
            var ii = 0;
            for (var i=0; i<$scope.groups.length;i++){
                ii = ii+1;
                $scope.groups[i].order = i+ii;
            }
        }

        $scope.newPage = function(){
            var name = prompt("Enter a name for your new group. This could something like 'Living Room' or 'Bedroom 1'");
            if (name){
                var name_parse = name.replace(/\s/g,'_').toLowerCase();
                var new_group = {};
                new_group.entity_id = name;
                new_group.attributes = {};
                new_group.attributes.entity_id = [];
                new_group.attributes.friendly_name = name;
                new_group.view = true;
                $scope.groups.push(new_group);
                $scope.custom_groups = $scope.groups;
                localStorage.setItem('custom_groups',JSON.stringify($scope.custom_groups));
            }
        }

        $scope.addEntity = function(group, entity){
            if (entity.length>0){
                for (var i=0;i<entity.length;i++){
                    $scope.groups[group].attributes.entity_id.push(entity[i]);
                    if (i == entity.length-1){
                        $scope.view.selected_entities = [];
                        $scope.custom_groups = $scope.groups;
                        localStorage.setItem('custom_groups',JSON.stringify($scope.custom_groups));
                        $scope.view.page = 'control';
                    }
                }
            } else {
                $scope.groups[group].attributes.entity_id.push(entity);
                $scope.custom_groups = $scope.groups;
                localStorage.setItem('custom_groups',JSON.stringify($scope.custom_groups));
                $scope.view.page = 'control';
            }

        }

        $scope.entitySearch = function(){
            clearTimeout(searchTimer);
            var searchTimer = setTimeout(function(){
                $scope.$apply(function(){
                    $scope.view.entity_search = $scope.view.temp_entity_search;
                })
            },750)
        }

        $scope.deletePage = function(page){

        //    var item = $scope.groups.find(item => item.entity_id == page);
            for (var i=0;i<$scope.groups.length;i++){
                if ($scope.groups[i].entity_id == page){
                    $scope.groups.splice(i,1);
                    $scope.custom_groups = $scope.groups;
                    localStorage.setItem('custom_groups',JSON.stringify($scope.custom_groups));
                    break;
                }
            }

        }

        $scope.movePage = function(page, dir){
            // var item = $scope.groups.find(item => item.entity_id == page);
            // $scope.groups[$scope.custom_groups.indexOf(item)].order = parseInt($scope.groups[$scope.custom_groups.indexOf(item)].order)+dir;

            for (var i=0;i<$scope.groups.length;i++){
                if ($scope.groups[i].entity_id == page){
                    $scope.groups[i].order = parseInt($scope.groups[i].order)+dir;
                    $scope.groups.sort(function(a, b) {
                        return a.order - b.order;
                    })
                    $scope.sortGroups();
                    $scope.custom_groups = $scope.groups;
                    localStorage.setItem('custom_groups',JSON.stringify($scope.custom_groups));
                    break;
                }
            }


        }

        $scope.selectEntity = function(ent){
            if (!$scope.view.selected_entities){
                $scope.view.selected_entities = [];
            }
            if ($scope.view.selected_entities.indexOf(ent) >= 0){
                $scope.view.selected_entities.splice($scope.view.selected_entities.indexOf(ent),1);
            } else {
                $scope.view.selected_entities.push(ent);
            }
        }

        $scope.addCustomEntity = function(type,group){
            if (typeof type == 'object'){ // update instead of adding

                $scope.entity[type.entity_id] = type;
                $scope.custom_entities[type+'.'+name_parse] = $scope.entity[type+'.'+name_parse];
                localStorage.setItem('custom_entities',JSON.stringify($scope.custom_entities));

                $scope.saved = true;
                setTimeout(function(){
                    $scope.$apply(function(){
                        $scope.saved = false;
                    })
                },1000)

            } else if (type == 'camera'){

                if (!$scope.view.new_camera_name){
                    var prompt_name = prompt('Please enter a name for your new entity:');
                    if (prompt_name){
                        $scope.view.new_camera_name = prompt_name;
                    } else {
                        return false;
                    }
                }
                var name_parse = $scope.view.new_camera_name.replace(/\s/g,'_').toLowerCase();
                $scope.entity[type+'.'+name_parse+group] = {};
                $scope.entity[type+'.'+name_parse+group].entity_id = type+'.'+name_parse+group;
                $scope.entity[type+'.'+name_parse+group].attributes = {};
                $scope.entity[type+'.'+name_parse+group].attributes.friendly_name = $scope.view.new_camera_name;
                $scope.entity[type+'.'+name_parse+group].attributes.entity_picture = $scope.view.new_camera_url;


            } else if (type == 'custom_scene'){

                if (!$scope.view.new_scene_name){
                    var prompt_name = prompt('Please enter a name for your new scene:');
                    if (prompt_name){
                        $scope.view.new_scene_name = prompt_name;
                    } else {
                        return false;
                    }
                }
                var name_parse = $scope.view.new_scene_name.replace(/\s/g,'_').toLowerCase();
                var scene_data = [];
                for (var i=0; i<$scope.groups[group].attributes.entity_id.length; i++){
                    if ($scope.groups[group].attributes.entity_id[i].match(/light|group|media\_player|binary/)){
                        scene_data.push($scope.entity[$scope.groups[group].attributes.entity_id[i]]);
                    }
                    if (i == $scope.groups[group].attributes.entity_id.length-1){
                        $scope.view.selected_entities = [];
                        $scope.entity[type+'.'+name_parse+group] = {};
                        $scope.entity[type+'.'+name_parse+group].entity_id = type+'.'+name_parse+group;
                        $scope.entity[type+'.'+name_parse+group].attributes = {};
                        $scope.entity[type+'.'+name_parse+group].attributes.friendly_name = $scope.view.new_scene_name;
                        $scope.entity[type+'.'+name_parse+group].scene_data = scene_data;
                        console.log(type+'.'+name_parse+group)
                    }
                }

            } else if (type == 'delete_ent_custom_scene'){

                $scope.entity[group.split('|')[0]].scene_data.splice(group.split('|')[1],1);
                $scope.custom_entities[group.split('|')[0]] = $scope.entity[group.split('|')[0]];
                localStorage.setItem('custom_entities',JSON.stringify($scope.custom_entities));
                return false;

            } else if (type == 'add_ent_custom_scene'){

                $scope.entity[group.split('|')[0]].scene_data.push($scope.entity[group.split('|')[1]]);
                $scope.popup.scene_data.push($scope.entity[group.split('|')[1]]);
                $scope.custom_entities[group.split('|')[0]] = $scope.entity[group.split('|')[0]];
                localStorage.setItem('custom_entities',JSON.stringify($scope.custom_entities));
                return false;

            } else if (type == 'edit_ent_state_custom_scene'){

                if ($scope.entity[group.split('|')[0]].scene_data[group.split('|')[1]].state == 'on'){
                    $scope.entity[group.split('|')[0]].scene_data[group.split('|')[1]].state = 'off';
                    $scope.popup.scene_data[group.split('|')[1]].state = 'off';
                } else {
                    $scope.entity[group.split('|')[0]].scene_data[group.split('|')[1]].state = 'on';
                    $scope.popup.scene_data[group.split('|')[1]].state = 'on';
                }
                $scope.custom_entities[group.split('|')[0]] = $scope.entity[group.split('|')[0]];
                localStorage.setItem('custom_entities',JSON.stringify($scope.custom_entities));
                return false;

            } else if (type == 'edit_ent_brightness_custom_scene'){

                $scope.entity[group.split('|')[0]].scene_data[group.split('|')[1]].attributes.brightness = group.split('|')[2];
                $scope.popup.scene_data[group.split('|')[1]].attributes.brightness = group.split('|')[2];

                $scope.custom_entities[group.split('|')[0]] = $scope.entity[group.split('|')[0]];
                localStorage.setItem('custom_entities',JSON.stringify($scope.custom_entities));
                return false;

            } else if (type == 'edit_ent_color_temp_custom_scene'){

                $scope.entity[group.split('|')[0]].scene_data[group.split('|')[1]].attributes.color_temp = group.split('|')[2];
                $scope.popup.scene_data[group.split('|')[1]].attributes.color_temp = group.split('|')[2];

                $scope.custom_entities[group.split('|')[0]] = $scope.entity[group.split('|')[0]];
                localStorage.setItem('custom_entities',JSON.stringify($scope.custom_entities));
                return false;

            } else if (type == 'entity_group'){

                   if (!$scope.view.new_ent_group_name){
                       var prompt_name = prompt('Please enter a name for your new group:');
                       if (prompt_name){
                           $scope.view.new_ent_group_name = prompt_name;
                       } else {
                           return false;
                       }
                   }
                   var name_parse = $scope.view.new_ent_group_name.replace(/\s/g,'_').toLowerCase();
                   var scene_data = [];
                   for (var i=0; i<$scope.view.selected_entities.length; i++){
                       scene_data.push($scope.entity[$scope.view.selected_entities[i]]);
                       if (i == $scope.view.selected_entities.length-1){
                           $scope.view.selected_entities = [];
                           $scope.entity[type+'.'+name_parse+group] = {};
                           $scope.entity[type+'.'+name_parse+group].entity_id = type+'.'+name_parse+group;
                           $scope.entity[type+'.'+name_parse+group].attributes = {};
                           $scope.entity[type+'.'+name_parse+group].attributes.friendly_name = $scope.view.new_ent_group_name;
                           $scope.entity[type+'.'+name_parse+group].scene_data = scene_data;
                           $scope.entity[type+'.'+name_parse+group].entity_ids = '';
                           for (var i=0; i<scene_data.length;i++){
                               if ($scope.entity[type+'.'+name_parse+group].entity_ids != ''){
                                   $scope.entity[type+'.'+name_parse+group].entity_ids += ',';
                               }
                               $scope.entity[type+'.'+name_parse+group].entity_ids += scene_data[i].entity_id;
                           }
                       }
                   }
               }

            $scope.groups[group].attributes.entity_id.push($scope.entity[type+'.'+name_parse+group].entity_id);
            $scope.custom_groups = $scope.groups;
            localStorage.setItem('custom_groups',JSON.stringify($scope.custom_groups));

            $scope.custom_entities[type+'.'+name_parse+group] = $scope.entity[type+'.'+name_parse+group];
            localStorage.setItem('custom_entities',JSON.stringify($scope.custom_entities));

            $scope.view.page = 'control';

        }

        $scope.checkFeed = function(url){
            $http({
                method: 'GET',
                url: url,
                timeout:6000
            }).then(function (data, status, headers, config) {
                console.log(data, status, headers, config)
                return true;
            }).catch(function(res){
                console.log(res)
                return false;
            });

        }

        $scope.weatherBg = function(condition){

            if (condition.match(/sun|sonne|sol/i)){
                $scope.events.weather = 'sunny';
            } else if (condition.match(/partly/i)){
                $scope.events.weather = 'partly-cloudy';
            } else if (condition.match(/cloud|wolke|moln/i)){
                $scope.events.weather = 'cloudy';
            } else if (condition.match(/clear|fine/i)){
                $scope.events.weather = 'clear';
            } else if (condition.match(/thunder|storm|lightning|donner|blitz|sturm|blixt|ska/i)){
                $scope.events.weather = 'thunder';
            } else if (condition.match(/snow|schnee|sn/i)){
                $scope.events.weather = 'snow';
            } else if (condition.match(/rain|precipitation|regen|regn/i)){
                $scope.events.weather = 'rain';
            } else if (condition.match(/pour|heavy/i)){
                $scope.events.weather = 'heavy-rain';
            } else {
                $scope.events.weather = '';
            }

        }

        $scope.addSchedule = function(entity, time, action, repeat, page){

            if (typeof time == 'number' && time <= 999 && action != 'auto_off'){

                var gettime = new Date();
                gettime.setMinutes(gettime.getMinutes() + time);
                if (gettime.getHours() < 10){
                    time = '0'+gettime.getHours();
                } else {
                    time = gettime.getHours()+'';
                }
                if (gettime.getMinutes() < 10){
                    time += '0'+gettime.getMinutes();
                } else {
                    time += gettime.getMinutes()+'';
                }
            }

            var data = {};
            data.entity = angular.copy(entity);
            data.action = action;
            data.repeat = repeat;
            data.time = time;
            data.page = page;
            if (entity.entity_ids){
                data.entity.entity_ids = entity.entity_ids;
            }
            data.entity_id = entity.entity_id;//.replace(/\./g,'_');

            if (!$scope.schedule[time]){
                $scope.schedule[time] = [];
            }
            $scope.schedule[time].push(data);

            if (!$scope.schedule_index[entity.entity_id]){
                $scope.schedule_index[entity.entity_id] = [];
            }
            $scope.schedule_index[entity.entity_id].push(data);

            localStorage.setItem('schedule',JSON.stringify($scope.schedule));
            localStorage.setItem('schedule_index',JSON.stringify($scope.schedule_index));

            $scope.local_notification.message = 'Set '+entity.entity_id+' to '+data.action+' at '+time;
            $scope.local_notification.time = Date.now();
            $scope.local_notification.status = "Added";
        }

        $scope.runSchedule = function(time){
            if ($scope.schedule && $scope.schedule[time]){
                for (var i in $scope.schedule[time]){
                    $scope.toggle($scope.schedule[time][i].entity, $scope.schedule[time][i].action, $scope.schedule[time][i].page);
                    if ($scope.schedule[time][i].repeat == false){
                        $scope.delScheduleIndex($scope.schedule[time][i].entity_id,time);
                        $scope.schedule[time].splice(i,1);
                    }
                }
            }
        }


        $scope.save = function(){
            localStorage.setItem('settings',JSON.stringify($scope.settings));
            $scope.saved = true;
            setTimeout(function(){
                $scope.$apply(function(){
                    $scope.saved = false;
                })
            },1000)
        }

        $scope.resetSettings = function(type){
            if (type == 'all'){
                var conf = confirm('This will erase ALL custom settings, are you sure?');
            } else {
                var conf = confirm('This will erase all '+type.replace(/_/g,' ')+', are you sure?');
            }

            if (conf){
                if (type == 'all'){
                    localStorage.setItem('settings','{}');
                    localStorage.setItem('schedule_index','{}');
                    localStorage.setItem('schedule','{}');
                    localStorage.setItem('custom_groups','[]');
                    localStorage.setItem('custom_entities','{}');
                } else if (type == 'automations'){
                    localStorage.setItem('schedule','{}');
                    localStorage.setItem('schedule_index','{}');
                } else {
                    localStorage.setItem(type,'{}');
                }
                location.reload();
            }
        }

        $scope.closeSettings = function(){
            $scope.view.page = 'control';
            if ($scope.settings && $scope.settings.debug === true){
                $scope.view.top_right = 'debug';
            } else {
                $scope.view.top_right = 'weather';
            }
        }

        $scope.delSchedule = function(entity_id, time){
            for (var i in $scope.schedule[time]){
                if ($scope.schedule[time][i].entity_id == entity_id){
                    $scope.delScheduleIndex($scope.schedule[time][i].entity_id,time);
                    $scope.schedule[time].splice(i,1);
                }
            }
        }

        $scope.delScheduleIndex = function(entity_id, time){
            for (var i in $scope.schedule_index[entity_id]){
                if ($scope.schedule_index[entity_id][i].time == time){
                    $scope.schedule_index[entity_id].splice(i,1);
                    localStorage.setItem('schedule',JSON.stringify($scope.schedule));
                    localStorage.setItem('schedule_index',JSON.stringify($scope.schedule_index));
                }
            }
        }

        $scope.refreshBgImgs = function(){
            $scope.events.bg_refresh = Math.round(+new Date()/1000);
            if (!$scope.events.last_bg_refresh){
                $scope.events.last_bg_refresh = 0;
            }
            if ($scope.events.bg_refresh - $scope.events.last_bg_refresh > 5){
                $scope.events.last_bg_refresh = $scope.events.bg_refresh;
                for (var i in $scope.entity){
                    if ($scope.entity[i].entity_id.match(/camera\./) && $scope.entity[i].attributes && $scope.entity[i].attributes.entity_picture){
                        if ($scope.entity[i].attributes.entity_picture.match(/\&\&ts\=/)){
                            $scope.entity[i].attributes.entity_picture = $scope.entity[i].attributes.entity_picture.substring(0, $scope.entity[i].attributes.entity_picture.length - 10)+$scope.events.last_bg_refresh;
                        } else {
                            $scope.entity[i].attributes.entity_picture = $scope.entity[i].attributes.entity_picture+'&&ts='+$scope.events.last_bg_refresh;
                        }

                    }
                }
            }
        }

        $scope.getHourList = function() {
            var arr = [];
            for (var i=0;i<24;i++){
                var ii = i;
                if (i<10){
                    ii = '0'+i;
                }
                arr.push(ii);
                if (i == 23){
                    return arr;
                }
            }
        }
        $scope.getMinuteList = function() {
            var arr = [];
            for (var i=0;i<60;i++){
                var ii = i;
                if (i<10){
                    ii = '0'+i;
                }
                arr.push(ii);
                if (i == 59){
                    return arr;
                }
            }
        }

        $scope.inArray = function(val, arr){
            if (val && arr && arr.length>0){
                if(arr.indexOf(val) >= 0){
                    return true;
                } else {
                    return false;
                }
            }
        }

        $scope.showEntity = function(entity,group){
            $scope.view.selected_group = group;
            if (entity.entity_id.match(/light\.|group\.|custom_scene\./)){
                $scope.popup = angular.copy(entity);
                if (entity.scene_data){
                    $scope.popup.attributes.brightness = entity.scene_data[0].attributes.brightness;
                    $scope.popup.attributes.color_temp = entity.scene_data[0].attributes.color_temp;
                    if (entity.scene_data[0].attributes.max_mireds){
                        $scope.popup.attributes.max_mireds = entity.scene_data[0].attributes.max_mireds;
                        $scope.popup.attributes.min_mireds = entity.scene_data[0].attributes.min_mireds;
                    }
                }
                $scope.view.page = 'entity';
                if (entity.entity_id.match(/custom_scene\./)){
                    $scope.view.entity_settings_page = 'auto';
                } else {
                    $scope.view.entity_settings_page = 'settings';
                }
            }
            if (entity.entity_id.match(/camera\./)){
                $scope.popup = angular.copy(entity);
                $scope.view.page = 'camera';
            }
        }

        $scope.makeExport = function(){
            $scope.settings_export = '{"settings":'+JSON.stringify($scope.settings)+',"schedule":'+JSON.stringify($scope.schedule)+',"schedule_index":'+JSON.stringify($scope.schedule_index)+',"custom_groups":'+JSON.stringify($scope.custom_groups)+',"custom_entities":'+JSON.stringify($scope.custom_entities)+'}';
        }

        function isJson(str) {
            console.log(str)
            try {
                JSON.parse(str);
            } catch (e) {
                return false;
            }
            return true;
        }

        $scope.importSettings = function(){
            if ($scope.settings_import.length>0 && isJson($scope.settings_import)){
                $scope.settings_import_data = JSON.parse($scope.settings_import);
                localStorage.setItem('settings',JSON.stringify($scope.settings_import_data.settings));
                localStorage.setItem('schedule',JSON.stringify($scope.settings_import_data.schedule));
                localStorage.setItem('schedule_index',JSON.stringify($scope.settings_import_data.schedule_index));
                localStorage.setItem('custom_groups',JSON.stringify($scope.settings_import_data.custom_groups));
                localStorage.setItem('custom_entities',JSON.stringify($scope.settings_import_data.custom_entities));
                location.reload();
            } else {
                alert('Invalid Config')
            }
        }



        $scope.match = function(input, match){
            var re = RegExp(match);
            if (input && input.match(match)){
                return true;
            }
        }

        // simple clock functionality

        setInterval(function(){
            $scope.$apply(function(){
                $scope.clock = Date.now();

                var hours = new Date().getHours();
                var minutes = new Date().getMinutes();
                var seconds = new Date().getSeconds();
                if (hours >= 0 && hours < 12) {
                    $scope.events.time_of_day = 'morning';
                } else if (hours >= 12 && hours < 17) {
                    $scope.events.time_of_day = 'afternoon';
                } else if (hours >= 17 && hours < 24) {
                    $scope.events.time_of_day = 'evening';
                }
                if (seconds.toString().match(/1$/)){
                //    $scope.refreshBgImgs();
                }

            })
        }, 1000);

        setInterval(function(){
            $scope.$apply(function(){
                var gettime = new Date();
                var time = '';
                if (gettime.getHours() < 10){
                    time = '0'+gettime.getHours();
                } else {
                    time = gettime.getHours()+'';
                }
                if (gettime.getMinutes() < 10){
                    time += '0'+gettime.getMinutes();
                } else {
                    time += gettime.getMinutes()+'';
                }
                if ($scope.schedule && $scope.schedule[time]){
                    $scope.local_notification.message = 'Running Schedule '+time;
                    $scope.local_notification.time = Date.now();
                    $scope.local_notification.status = "Running Schedule";
                    console.log('running '+time)
                    $scope.runSchedule(time);
                }

                if (Math.floor(Date.now() / 1000) - Math.floor($scope.debug_notification.time / 1000) > 600){
                    $scope.local_notification.message = 'WebSocket connection seems to be down, reconnecting';
                    $scope.local_notification.time = Date.now();
                    $scope.local_notification.status = "Reconnecting";
                    $scope.connect();
                }

                // if (ws && !ws.readyState || ws && ws.readyState != 1){
                //     $scope.local_notification.message = 'WebSocket connection seems to be down, reconnecting';
                //     $scope.local_notification.time = Date.now();
                //     $scope.local_notification.status = "Reconnecting";
                //     $scope.connect();
                // }

            })
        }, 60000);


    }]).filter('to_trusted', ['$sce', function($sce){
        return function(text) {
            return $sce.trustAsHtml(text);
        };
    }]).filter('mdi', function(){
        return function(input) {
            if (input && typeof input == 'string'){
                return input.replace('mdi:','');
            }
        }
    }).filter('parse_name', function(){
        return function(input) {
            if (input && typeof input == 'string'){
                return input.replace('_',' ');
            }
        }
    }).filter('parse_time', function(){
        return function(input) {
            if (isNaN(input) || input <=60){
                return input;
            } else {
                var time = input.split('');
                return time[0]+time[1]+":"+time[2]+time[3];
            }

        }
    }).filter('match', function(){
        return function(input, match) {
            if (input && typeof input == 'string'){
                var re = RegExp(match);
                return input.match(match);
            }
        }
    }).filter('getType', function(){
        return function(input) {
            if (input){
                return input.split('.')[0];
            }
        }
    }).filter('ordinal', function() {
        return function(number){
            if (isNaN(number) || number < 1){
                return '';
            } else if (number % 100 == 11 || number % 100 == 12) {
                return 'th';
            } else {
                var lastDigit = number % 10;
                if (lastDigit === 1) {
                    return 'st';
                } else if (lastDigit === 2) {
                    return 'nd';
                } else if (lastDigit === 3 && number != 13) {
                    return 'rd';
                } else if (lastDigit > 3 || number == 13) {
                    return 'th';
                }
            }
        }
    }).directive('backImg', function(){
        return function(scope, element, attrs){
            attrs.$observe('backImg', function(value) {
                if (scope.settings.background!=""){
                    element.css({
                        'background-image': 'url(' + value +')',
                        'background-size' : 'cover'
                    });
                }
            });
        };
    }).directive('jsonText', function() {
        return {
            restrict: 'A',
            require: 'ngModel',
            link: function(scope, element, attr, ngModel) {
              function into(input) {
                return JSON.parse(input);
              }
              function out(data) {
                return JSON.stringify(data);
              }
              ngModel.$parsers.push(into);
              ngModel.$formatters.push(out);

            }
        };
    }).directive('myTouchend', [function() {
            return function(scope, element, attr) {

                element.on('touchend', function(event) {
                    scope.$apply(function() {
                        scope.$eval(attr.myTouchend);
                    });
                });
            };
    }]);

    angular.module('pr.longpress', [])
    .directive('onLongPress', ['$parse', '$timeout', function ($parse, $timeout) {
        return {
            restrict: 'A',
            link: function ($scope, $elm, $attrs) {
                var timer;
                var timerDuration = (!isNaN($attrs.longPressDuration) && parseInt($attrs.longPressDuration)) || 600;
                // By default we prevent long press when user scrolls
                var preventLongPressOnScroll = ($attrs.preventOnscrolling ? $attrs.preventOnscrolling === 'true' : true)
                // Variable used to prevent long press while scrolling
                var touchStartY;
                var touchStartX;
                var MAX_DELTA = 15;
                // Bind touch, mouse and click event
                $elm.bind('touchstart', onEnter);
                $elm.bind('touchend', onExit);

                $elm.bind('mousedown', onEnter);
                $elm.bind('mouseup', onExit);

                $elm.bind('click', onClick);
                // For windows mobile browser
                $elm.bind('pointerdown', onEnter);
                $elm.bind('pointerup', onExit);
                if (preventLongPressOnScroll) {
                    // Bind touchmove so that we prevent long press when user is scrolling
                    $elm.bind('touchmove', onMove);
                }

                function onEnter(evt) {
                    var functionHandler = $parse($attrs.onLongPress);
                    // For tracking scrolling
                    if ((evt.originalEvent || evt).touches) {
                        touchStartY = (evt.originalEvent || evt).touches[0].screenY;
                        touchStartX = (evt.originalEvent || evt).touches[0].screenX;
                    }
                    //Cancel existing timer
                    $timeout.cancel(timer);
                    //To handle click event properly
                    $scope.longPressSent = false;
                    // We'll set a timeout for 600 ms for a long press
                    timer = $timeout(function () {
                        $scope.longPressSent = true;
                        // If the touchend event hasn't fired,
                        // apply the function given in on the element's on-long-press attribute
                        $scope.$apply(function () {
                            functionHandler($scope, {
                                $event: evt
                            });
                        });
                    }, timerDuration);

                }

                function onExit(evt) {
                    var functionHandler = $parse($attrs.onTouchEnd);
                    // Prevent the onLongPress event from firing
                    $timeout.cancel(timer);
                    // If there is an on-touch-end function attached to this element, apply it
                    if ($attrs.onTouchEnd) {
                        $scope.$apply(function () {
                            functionHandler($scope, {
                                $event: evt
                            });
                        });
                    }

                }

                function onClick(evt) {
                    //If long press is handled then prevent click
                    if ($scope.longPressSent && (!$attrs.preventClick || $attrs.preventClick === "true")) {
                        evt.preventDefault();
                        evt.stopPropagation();
                        evt.stopImmediatePropagation();
                    }

                }

                function onMove(evt) {
                    var yPosition = (evt.originalEvent || evt).touches[0].screenY;
                    var xPosition = (evt.originalEvent || evt).touches[0].screenX;

                    // If we scrolled, prevent long presses
                    if (touchStartY !== undefined && touchStartX !== undefined &&
                        (Math.abs(yPosition - touchStartY) > MAX_DELTA) || Math.abs(xPosition - touchStartX) > MAX_DELTA) {
                        $timeout.cancel(timer);
                    }

                }
            }
        };
    }]);

</script>


    <style>
        :root {
    --grid-size: 8vw;
    --grid-margin: 1px;
}

body {
    height:100vh;
    width:100vw;
    overflow: hidden;
    font-weight:300;
    font-family: 'Muli', sans-serif;
    color:#fff;
    background-color: rgb(40,50,60);
    background-position: center center;
    background-size: cover;
    -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
         -khtml-user-select: none; /* Konqueror HTML */
           -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
                user-select: none;
}

a {
    color:rgb(95, 200, 223)
}
label {
    font-weight: 700;
    margin-bottom:2vw;
}
select {
    border:2px solid rgba(255,255,255,0.5);
    border-radius: 4px;
    background: none;
    color:#fff;
    margin:none;
    width:100%;
}

select option {
    background-color: #fff;
    color:#444;
}

input[type="text"],input[type="password"],textarea,select {
    border-radius: 5em;
    background-color: rgba(0,0,0,0.4);
    border: none;
    color: #fff;
    margin: 0 0 1.2em 0;
    padding: 0.7em 1.5em;
    top: 0.5em;
}

textarea {
    border-radius: 5px;
}


.bg-white, .bg-white select {
    color:#444;
}
.bg-white .text-white {
    color: rgb(82, 222, 245)
}
.bg-white select {
    border-color: #aaa;
}
.bg-white .background {
    display: none;
}

.bg-dark-grey {
    background-color: rgb(40,50,60) !important;
}

input[type=range] {
  height: 36px;
  -webkit-appearance: none;
  margin: 10px 0;
  width: 100%;
  border:none;
  background: none;
}
input[type=range]:focus {
  outline: none;
}
input[type=range]::-webkit-slider-runnable-track {
  width: 100%;
  height: 30px;
  cursor: pointer;
  animate: 0.2s;
  box-shadow: 0px 0px 0px #50555C;
  background: rgba(0,0,0,0.4);
  border-radius: 30px;
  border: 0px solid #000000;
  -webkit-box-shadow: 0px 0px 0px 5px rgba(0,0,0,0.4);
-moz-box-shadow: 0px 0px 0px 5px rgba(0,0,0,0.4);
box-shadow: 0px 0px 0px 5px rgba(0,0,0,0.4);
}
input[type=range]::-webkit-slider-thumb {
  box-shadow: 0px 0px 0px #000000;
  border: 1px solid rgba(0,0,0,0.4);
  height: 30px;
  width: 30px;
  border-radius: 20px;
  background: #FFFFFF;
  cursor: pointer;
  -webkit-appearance: none;
  margin-top: 0px;
}
input[type=range]:focus::-webkit-slider-runnable-track {
  background: #000000;
}
input[type=range]::-moz-range-track {
  width: 100%;
  height: 30px;
  cursor: pointer;
  animate: 0.2s;
  box-shadow: 0px 0px 0px #50555C;
  background: rgba(0,0,0,0.4);
  border-radius: 30px;
  border: 0px solid #000000;
  -webkit-box-shadow: 0px 0px 0px 5px rgba(0,0,0,0.4);
    -moz-box-shadow: 0px 0px 0px 5px rgba(0,0,0,0.4);
    box-shadow: 0px 0px 0px 5px rgba(0,0,0,0.4);
}
input[type=range]::-moz-range-thumb {
  box-shadow: 0px 0px 0px #000000;
  border: 5px solid rgba(0,0,0,0);
  height: 30px;
  width: 30px;
  border-radius: 30px;
  background: #FFFFFF;
  cursor: pointer;
}
input[type=range]::-ms-track {
  width: 100%;
  height: 30px;
  cursor: pointer;
  animate: 0.2s;
  background: rgba(0,0,0,0.4);
  border-color: transparent;
  color: transparent;
  -webkit-box-shadow: 0px 0px 0px 5px rgba(0,0,0,0.4);
-moz-box-shadow: 0px 0px 0px 5px rgba(0,0,0,0.4);
box-shadow: 0px 0px 0px 5px rgba(0,0,0,0.4);
}
input[type=range]::-ms-fill-lower {
  background: #000000;
  border: 0px solid #000000;
  border-radius: 60px;
  box-shadow: 0px 0px 0px #50555C;
}
input[type=range]::-ms-fill-upper {
  background: #000000;
  border: 0px solid #000000;
  border-radius: 60px;
  box-shadow: 0px 0px 0px #50555C;
}
input[type=range]::-ms-thumb {
  margin-top: 1px;
  box-shadow: 0px 0px 0px #000000;
  border: 0px solid #000000;
  height: 30px;
  width: 30px;
  border-radius: 30px;
  background: #FFFFFF;
  cursor: pointer;
}
input[type=range]:focus::-ms-fill-lower {
  background: #000000;
}
input[type=range]:focus::-ms-fill-upper {
  background: #000000;
}


input[type="radio"] {
    display: none;
}

input[type="radio"] + label {
    position: relative;
    display: inline-block;
    background-color: rgba(0,0,0,0.4);
    border-radius: 2em;
    color: #fff;
    padding: 0.65rem 1.2rem;
    cursor: pointer;
    -webkit-transition: all 0.3s;
    transition: all 0.3s;
    z-index: 50;
    width: 100%;
    margin-bottom: 1em;
}

input[type="radio"]:checked + label:before {
    content: "";
    position: absolute;
    right: 1.19rem;
    top: 0.8rem;
    width: 0.5rem;
    height: 1rem;
    border: 1px solid #202623;
    background-color: #fff;
    border-width: 0 2px 2px 0;
    z-index: 100;
    transform: rotate(45deg);
}

input[type="radio"] + label:after {
    content:"";
    position:absolute;
    right: 0.45rem;
    top: 0.4rem;
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
    background-color: #fff;
    z-index: 75;
}

input[type="radio"]:checked + label {
    background-color: rgb(95, 200, 223);
}

input[type="checkbox"].switch {
    display:none;
    position: absolute;
    margin: 8px 0 0 16px;
}
input[type="checkbox"].switch + label {
    position: relative;
    padding: 5px 0 0 50px;
    line-height: 2.0em;
}
input[type="checkbox"].switch + label:before {
    content: "Closed";
    text-align: right;
    padding:0.2em 1em;
    position: absolute;
    display: inline-block;
    left: 0;
    top: 0;
    border-radius: 50%; /* x*2 */
    background: rgba(0,0,0,0.4);
    color:#fff;
    -webkit-transition: all 0.3s;
    transition: all 0.3s;
}
input[type="checkbox"].switch.off-on + label:before {
    content: "Off";
}
input[type="checkbox"].switch.active-disabled + label:before {
    content: "Disabled";
}
input[type="checkbox"].switch + label:after {
    content: "";
    position: absolute;
    display: inline-block;
    right: 0.5rem;
    top: 0.45rem;
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
    background: #fff;
    border: 1px solid #d9d9d9;
    -webkit-transition: all 0.3s;
    transition: all 0.3s;
}
input[type="checkbox"].switch + label:hover:after {
    box-shadow: 0 0 5px rgba(0,0,0,0.3);
}

input[type="checkbox"].switch:checked + label:before {
    content: "Open";
    text-align: left;
    color:#fff;
    background: rgb(95, 200, 223);
}

input[type="checkbox"].switch.off-on:checked + label:before {
    content: "On";
}
input[type="checkbox"].switch.active-disabled:checked + label:before {
    content: "Active";
}

input[type="checkbox"].switch {
    margin: 10px 0 0 20px;
}
input[type="checkbox"].switch + label {
    position: relative;
    margin-top: 0.5rem;
    line-height: 2.3rem !important;
    display: inline-block;
    width: 100%;
    height: 2.5rem;
}
input[type="checkbox"].switch + label:before {
    width: 100%;
    padding: 0.24rem 1.2rem;
    border-radius: 2rem;
    margin-bottom:0.5rem;
}
input[type="checkbox"].switch + label:after {
    top: 0.4rem;
    left: 0.5rem;
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
}
input[type="checkbox"].switch + label:hover:after {
    box-shadow: 0 0 8px rgba(0,0,0,0.3);
}
input[type="checkbox"].switch:checked + label:after {
    left:calc(100% - 2.4rem);
}

.header {
    width:100vw;
    text-align: left;
    height:100vh;
    z-index: 1;
}

.controls {
    position: absolute;
    bottom:0;
    left:0;
    width:100vw;
    height:auto;
    min-height: 75vh;
    text-align: left;
    z-index: 10;
}

.settings-icon {
    position: absolute;
    bottom:0;
    right:0;
    padding:2rem;
    font-size: 2rem;
}

.settings-pages {
    height: 100vh;
}

.debug {
    overflow-wrap: break-word;
}
.debug h1,.debug h2, .debug h3, .debug h4 {
    font-size:1vw;
}

.group {
    display:inline-block;
    text-align: left;
    max-height:100%;
    vertical-align: top;
    /* background-color: rgba(0,0,0,0.1); */
}

.group .heading {
    padding:0 2rem;
    height: 3em;
}

.group .heading p {
    padding:0;
}

div[class^=grid] {
    display: grid;
    grid-template-columns: var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size);
    grid-gap: var(--grid-margin);
    max-height:100%;
}

.grid0, .grid1, .grid2, .grid3, .grid4 {
    grid-template-columns: var(--grid-size) !important;
}

.grid5, .grid6, .grid7, .grid8 {
    grid-template-columns: var(--grid-size) var(--grid-size) !important;
}

.grid9, .grid10, .grid11, .grid12 {
    grid-template-columns: var(--grid-size) var(--grid-size) var(--grid-size) !important;
}

.grid13, .grid14, .grid15, .grid16 {
    grid-template-columns: var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) !important;
}

.grid17, .grid18, .grid19, .grid20 {
    grid-template-columns: var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) !important;
}

.grid21, .grid22, .grid23, .grid24 {
    grid-template-columns: var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) !important;
}

.grid25, .grid26, .grid27, .grid28 {
    grid-template-columns: var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) var(--grid-size) !important;
}

.entity {
    position:relative;
    background-position: center center;
    background-size: cover;
    color:#fff;
    height: var(--grid-size);
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.entity.off,.entity.not_home {
    background-color: rgba(0,0,0,0.2);
}



.entity {
    background-color: rgba(110,120,130,0.8);
    overflow: hidden;
    word-break: break-word;
}
.entity.on {
    background-color: rgba(160,170,180,0.8);
}
.entity.off,
.entity.not_home {
    background-color: rgba(60,70,80,0.8);
}

.bg-color .entity {
    background-color: rgba(200,200,200,0.2);
}
.bg-color .entity.on {
    background-color: rgba(200,200,200,0.35);
}
.bg-color .entity.off,
.bg-color .entity.not_home {
    background-color: rgba(0,0,0,0.2);
}

.bg-white .entity {
    color:#444;
}
.bg-white .entity.on {
    color:#444;
}

.entity .state {
    display:none;
}

.entity.custom_scene,
.entity.scene {
    background-image: url(/images/scene-bg.svg) !important;
    background-size: cover;
    background-position: center center;
}

/* .entity.custom_scene::after,
.entity.scene::after {
    display: block;
    position:absolute;
    content:' ';
    top: 0.5rem;
    left:0.5rem;
    width: 0.5rem;
    height: 0.5rem;
    border-radius: 50%;
    background-color: rgba(255,255,255,0.5);
} */

.entity.media_player .name,
.entity.camera .name {
    display:none;
}

.entity.sensor .value {
    font-size: 1.6vw;
    text-transform: capitalize;
    margin-bottom: 1.2em;
}

.entity.sensor .name,
.entity:not(.sensor) .value  {
    display:block;
    width:100%;
    position:absolute;
    bottom:0.8vw;
    left:0;
    text-align: center;
    font-size: 0.7vw;
    line-height: 0.9vw;
    padding: 0 0.7rem;
}

.entity .media-controls {
    display:none;
}

.entity.media_player .media-controls {
    display:block;
    color:white;
    font-size: 2vw;
    font-size: 1.5rem;
}

.entity.media_player img.stream {
    display:none;
}

.entity img.stream {
    object-fit: cover;
    object-position: center;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
}


.entity.x21 {
    grid-column: span 2;
}

.entity.x2 {
    grid-column: span 2;
    grid-row: span 2;
    height: calc((var(--grid-size) * 2) + var(--grid-margin));
}

.bg-color [class^=bg-weather-]{
    background-position: top left;
    background-size: 100% auto;
    background-repeat: no-repeat;
    position: relative;
}

.bg-color .bg-weather-clear {
    background-image:url(/media/1600/40/clear.png);
}

.bg-color .bg-weather-thunder {
    background-image:url(/media/1600/40/thunder.png);
}

.bg-color .bg-weather-cloudy {
    background-image:url(/media/1600/40/partly-cloudy.png);
}

.bg-color .bg-weather-partly-cloudy {
    background-image:url(/media/1600/40/partly-cloudy.png);
}

.bg-color .bg-weather-sunny {
    background-image:url(/media/1600/40/clear.png);
}

.bg-color .bg-weather-rain {
    background-image:url(/media/1600/40/rain.png);
}

.bg-color .bg-weather-heavy-rain {
    background-image:url(/media/1600/40/heavy-rain.png);
}

div[class*='bg-weather'].no-bg-weather {
    background: none;
}

.sk-cube-grid {
  width: 40px;
  height: 40px;
  margin: 100px auto;
}

.sk-cube-grid .sk-cube {
  width: 33%;
  height: 33%;
  background-color: #fff;
  float: left;
  -webkit-animation: sk-cubeGridScaleDelay 1.3s infinite ease-in-out;
          animation: sk-cubeGridScaleDelay 1.3s infinite ease-in-out;
}
.sk-cube-grid .sk-cube1 {
  -webkit-animation-delay: 0.2s;
          animation-delay: 0.2s; }
.sk-cube-grid .sk-cube2 {
  -webkit-animation-delay: 0.3s;
          animation-delay: 0.3s; }
.sk-cube-grid .sk-cube3 {
  -webkit-animation-delay: 0.4s;
          animation-delay: 0.4s; }
.sk-cube-grid .sk-cube4 {
  -webkit-animation-delay: 0.1s;
          animation-delay: 0.1s; }
.sk-cube-grid .sk-cube5 {
  -webkit-animation-delay: 0.2s;
          animation-delay: 0.2s; }
.sk-cube-grid .sk-cube6 {
  -webkit-animation-delay: 0.3s;
          animation-delay: 0.3s; }
.sk-cube-grid .sk-cube7 {
  -webkit-animation-delay: 0s;
          animation-delay: 0s; }
.sk-cube-grid .sk-cube8 {
  -webkit-animation-delay: 0.1s;
          animation-delay: 0.1s; }
.sk-cube-grid .sk-cube9 {
  -webkit-animation-delay: 0.2s;
          animation-delay: 0.2s; }

@-webkit-keyframes sk-cubeGridScaleDelay {
  0%, 70%, 100% {
    -webkit-transform: scale3D(1, 1, 1);
            transform: scale3D(1, 1, 1);
  } 35% {
    -webkit-transform: scale3D(0, 0, 1);
            transform: scale3D(0, 0, 1);
  }
}

@keyframes sk-cubeGridScaleDelay {
  0%, 70%, 100% {
    -webkit-transform: scale3D(1, 1, 1);
            transform: scale3D(1, 1, 1);
  } 35% {
    -webkit-transform: scale3D(0, 0, 1);
            transform: scale3D(0, 0, 1);
  }
}

@media (max-width: 850px) {
    :root {
        --grid-size: 28vw !important;
        --grid-margin: 0.5vw;
    }

    .grid25.entity-list {
        grid-template-columns: var(--grid-size) var(--grid-size) var(--grid-size) !important;
    }


    .settings-pages {
        height: 90vh;
    }

}

        /* This comment need to fix syntax highlighting */
    </style>

</head>


<body class="{{settings.background_color}} bold300 no-padding" ng-app="hassApp" ng-controller="hassCtrl" ng-style="settings.background != '' && {'background-image':'url('+settings.background+')'}">

    <div class="background" style="background-color:rgba(50,60,70,0.5)" ng-show="view.page == 'control'"></div>
    <div class="background" style="background-color:rgba(50,60,70,0.9)" ng-hide="view.page == 'control'"></div>

    <div class="layer-1">
        <div ng-show="view.page == 'loading' && !settings.debug" class="vh100 vw100 text-middle layer-top">
            <div class="sk-cube-grid">
                <div class="sk-cube sk-cube1"></div>
                <div class="sk-cube sk-cube2"></div>
                <div class="sk-cube sk-cube3"></div>
                <div class="sk-cube sk-cube4"></div>
                <div class="sk-cube sk-cube5"></div>
                <div class="sk-cube sk-cube6"></div>
                <div class="sk-cube sk-cube7"></div>
                <div class="sk-cube sk-cube8"></div>
                <div class="sk-cube sk-cube9"></div>
            </div>
        </div>

        <div ng-show="view.page == 'initsettings'" class="vh100 vw100 overflow-y text-middle">
    <div class="w50 s90">
        <p class="big" ng-bind-html="view.message"></p><br>
        <button class="bg-topaz" ng-click="searchHA()" ng-hide="view.searching">Auto Detect Home Assistant Server</button>
        <p ng-show="view.searching"><i class="fas fa-sync-alt big rotate"></i></p>
        <p ng-click="view.page = 'settings'" class="clickable">Manual Setup</p>
    </div>
</div>

<div ng-show="view.page == 'setup1'" class="vh100 vw100 text-middle">
    <div class="w50 s90">
        <p class="big" ng-bind-html="view.message"></p><br>
        <button ng-click="testAPI();" class="bg-topaz">Next ></button>
        <p ng-click="view.page = 'settings'" class="clickable">Manual Setup</p>
    </div>
</div>

<div ng-show="view.page == 'setup2'" class="vh100 vw100 text-middle">
    <div class="w50 s90">
        <p class="big" ng-bind-html="view.message"></p><br>
        <input type="text" ng-model="settings.server_url"><br><br>
        <button ng-click="searchHA(settings.server_url);" class="bg-topaz">Connect</button>
        <p ng-click="view.page = 'settings'" class="clickable">Manual Setup</p>
    </div>
</div>

<div ng-show="view.page == 'setup3'" class="vh100 vw100 text-middle">
    <div class="w50 s90">
        <p class="big" ng-bind-html="view.message"></p><br>
        <input type="text" ng-model="settings.server_api_password"><br><br>
        <button ng-click="testAPI(settings.server_api_password);" class="bg-topaz">Connect</button>
        <p ng-click="view.page = 'settings'" class="clickable">Manual Setup</p>
    </div>
</div>


        <div ng-show="view.page == 'entity'" class="vh100 vw100 overflow-hidden">
    <div class="fixed bottom right layer-top padding2 mobile-show">
        <button class="bg-dark-grey" ng-click="view.page = 'control'">&times;</button>
    </div>
    <div class="container">

        <div class="w100 mobile-show overflow-x text-left big bold700 padding2 border-bottom">



        </div>
        <div class="w20 vh100 mobile-hide menu overflow-y text-right big bold700 border-right padding2-right padding1-top">

            <a ng-click="view.entity_settings_page = 'settings'" ng-hide="match(popup.entity_id,'custom_scene')" ng-class="{'text-white':view.entity_settings_page == 'settings'}">Settings</a>
            <a ng-click="view.entity_settings_page = 'auto'" ng-class="{'text-white':view.entity_settings_page == 'auto'}">Automation</a>
            <a ng-click="view.entity_settings_page = 'edit'" ng-show="match(popup.entity_id,'custom_scene')" ng-class="{'text-white':view.entity_settings_page == 'edit'}">Edit Scene</a>
            <br><br>
            <a ng-click="view.page = 'control'">Close</a>

        </div>
        <div class="w50 m80 s100 overflow-y text-left padding2-x padding2-top padding5-bottom settings-pages">
            <div ng-show="view.entity_settings_page == 'settings'">
                <h3 class="margin-bottom" ng-bind="popup.attributes.friendly_name"></h3>
                <p class="w60 padding2-bottom" style="margin:0"></p>
                <p class="float-right" ng-bind="popup.attributes.brightness"></p>
                <p class="margin-top">Brightness</p>
                <input type="range" min="5" max="255" step="25" value="{{entity[popup.entity_id].attributes.brightness}}" ng-model="popup.attributes.brightness" ng-mouseup="toggle(popup,'light/turn_on')" my-touchend="toggle(popup,'light/turn_on')"><br><br>

                <p class="float-right"><span ng-bind="popup.attributes.color_temp"></span> MiReds</p>
                <p>Color Temperature</p>
                <input type="range" min="150" max="500" step="25" ng-model="popup.attributes.color_temp" ng-mouseup="toggle(popup,'light/turn_on')" my-touchend="toggle(popup,'light/turn_on')">

            </div>

            <div ng-show="view.entity_settings_page == 'edit'">
                <!-- <pre ng-bind="popup.scene_data"></pre> -->
                <div class="table">
                    <div class="row small">
                        <div class="cell no-padding middle">Entity</div>
                        <div class="cell no-padding middle">On/Off</div>
                        <div class="cell no-padding middle">Brightness</div>
                        <div class="cell no-padding middle">Color Temp</div>
                        <div class="cell no-padding middle text-right" style="width:10%" >Remove</div>
                    </div>
                    <div class="row" ng-repeat="ent in popup.scene_data track by $index">
                        <div class="cell no-padding middle" ng-hide="ent.attributes.friendly_name" ng-bind="ent.entity_id"></div>
                        <div class="cell no-padding middle" ng-show="ent.attributes.friendly_name" ng-bind="ent.attributes.friendly_name"></div>
                        <div class="cell no-padding middle"><input id="scene-ent-state-{{$index}}" type="checkbox" ng-checked="ent.state == 'on'" class="switch off-on" ng-click="toggle(entity[ent.entity_id],false);addCustomEntity('edit_ent_state_custom_scene',popup.entity_id+'|'+$index)"><label for="scene-ent-state-{{$index}}" style="top: 0.75rem;"></label></div>
                        <div class="cell no-padding middle"><input ng-show="ent.state == 'on' && match(ent.entity_id,'light')" type="range" min="5" max="255" step="25" value="{{entity[ent.entity_id].attributes.brightness}}" ng-model="ent.attributes.brightness" ng-mouseup="toggle(ent,'light/turn_on');addCustomEntity('edit_ent_brightness_custom_scene',popup.entity_id+'|'+$index+'|'+ent.attributes.brightness)" my-touchend="toggle(ent,'light/turn_on');addCustomEntity('edit_ent_brightness_custom_scene',popup.entity_id+'|'+$index+'|'+ent.attributes.brightness)"></div>
                        <div class="cell no-padding middle"><input ng-show="ent.state == 'on' && match(ent.entity_id,'light')" type="range" min="150" max="500" step="25" value="{{entity[ent.entity_id].attributes.color_temp}}" ng-model="ent.attributes.color_temp" ng-mouseup="toggle(ent,'light/turn_on');addCustomEntity('edit_ent_color_temp_custom_scene',popup.entity_id+'|'+$index+'|'+ent.attributes.color_temp)" my-touchend="toggle(ent,'light/turn_on');addCustomEntity('edit_ent_color_temp_custom_scene',popup.entity_id+'|'+$index+'|'+ent.attributes.color_temp)"></div>
                        <div class="cell no-padding middle text-right" ng-click="addCustomEntity('delete_ent_custom_scene',popup.entity_id+'|'+$index)">&times;</div>
                    </div>
                </div><br>
                <button class="bg-topaz" ng-click="view.entity_group_list=true">Add Entity</button><br><br>
                <input type="text" ng-model="view.temp_entity_search" ng-keyup="entitySearch()" placeholder="Quick Search" ng-if="view.entity_group_list===true">
                <div class="grid17 padding-top entity-list" ng-if="view.entity_group_list===true">

                    <div class="entity {{settings.buttons}} {{entity[ent.entity_id].state}}" ng-class="{glow:inArray(ent.entity_id,view.selected_entities)}" ng-repeat="ent in entities | filter:view.entity_search" ng-click="addCustomEntity('add_ent_custom_scene',popup.entity_id+'|'+ent.entity_id)">
                        <p class="name" ng-show="entity[ent.entity_id].attributes.friendly_name"><span ng-bind="entity[ent.entity_id].attributes.friendly_name | limitTo: 20"></span><span ng-show="entity[ent.entity_id].attributes.friendly_name.length>20">...</span></p>
                        <p class="name" ng-bind="entity[ent.entity_id].entity_id" ng-hide="entity[ent.entity_id].attributes.friendly_name"></p>
                        <p class="value transparent1" class="capitalize" ng-bind="ent.entity_id | getType"></p>
                    </div>

                </div>
            </div>

            <div ng-show="view.entity_settings_page == 'auto'">
                <h3 class="margin-bottom">Automation</h3>
                <p class="w60 padding2-bottom" style="margin:0">Set and configure your automations for this entity. From simple light timers and turning off lights after a period of time, to motion and media player events. They can all be set using the options below.</p>
                <div class="padding2-bottom container">
                    <div class="w33 s100 top margin-right">
                        <p class="margin-top">Turn On at Time</p>
                        <div class="container">
                            <div class="w33 margin">
                                <select ng-model="view.schedule_hours" class="time">
                                    <option ng-repeat="hours in getHourList()" ng-bind="hours" value="{{hours}}"></option>
                                </select>
                            </div>
                            <div class="w33 margin">
                                <select ng-model="view.schedule_mins" class="time">
                                    <option ng-repeat="mins in getMinuteList()" ng-bind="mins" value="{{mins}}"></option>
                                </select>
                            </div>
                            <div class="w33 margin">
                                <button class="bg-topaz" ng-click="addSchedule(popup,view.schedule_hours+view.schedule_mins,'light/turn_on',true,view.selected_group)" style="width:100%; padding:0.8rem 0 0.8rem 0;">Add</button>
                            </div>
                        </div>
                    </div>
                    <div class="w33 s100 top margin-right">
                        <p class="margin-top">Turn On at Time of Day</p>
                        <div class="container">
                            <div class="w75 margin-right">
                                <select ng-model="view.schedule_day_night">
                                    <option ng-repeat="auto in ['sunrise','daytime','sunset','nighttime']" ng-bind="auto" value="{{auto}}"></option>
                                </select>
                            </div>
                            <div class="w25 margin-right">
                                <button class="bg-topaz" ng-click="addSchedule(popup,view.schedule_day_night,'light/turn_on',true,view.selected_group)" style="width:100%; padding:0.8rem 0 0.8rem 0;">Add</button>
                            </div>
                        </div>
                    </div>
                    <div class="w33 s100 top margin-right">
                        <p class="margin-top">Turn On with Entity</p>
                        <div class="container">
                            <div class="w75 margin-right">
                                <select ng-model="view.schedule_entity">
                                    <option ng-repeat="ent in entity" ng-bind="ent.entity_id" value="{{ent.entity_id}}"></option>
                                </select>
                            </div>
                            <div class="w25 margin-right">
                                <button class="bg-topaz" ng-click="addSchedule(popup,view.schedule_entity,popup.entity_id,true,view.selected_group)" style="width:100%; padding:0.8rem 0 0.8rem 0;">Add</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="padding2-bottom container" ng-hide="match(popup.entity_id,'custom_scene')">
                    <div class="w33 s100 top margin-right">
                        <p class="margin-top">Turn Off at Time</p>
                        <div class="container">
                            <div class="w33 margin-right">
                                <select ng-model="view.schedule_hours_off" class="time">
                                    <option ng-repeat="hours in getHourList()" ng-bind="hours" value="{{hours}}"></option>
                                </select>
                            </div>
                            <div class="w33 margin-right">
                                <select ng-model="view.schedule_mins_off" class="time">
                                    <option ng-repeat="mins in getMinuteList()" ng-bind="mins" value="{{mins}}"></option>
                                </select>
                            </div>
                            <div class="w33 margin-right">
                                <button class="bg-topaz" ng-click="addSchedule(popup,view.schedule_hours_off+view.schedule_mins_off,'light/turn_off',true,view.selected_group)" style="width:100%; padding:0.8rem 0 0.8rem 0;">Add</button>
                            </div>
                        </div>
                    </div>
                    <div class="w33 s100 top margin-right">
                        <p class="margin-top">Turn Off at Time of Day</p>
                        <div class="container">
                            <div class="w75 margin-right">
                                <select ng-model="view.schedule_day_night_off">
                                    <option ng-repeat="auto in ['sunrise','daytime','sunset','nighttime']" ng-bind="auto" value="{{auto}}"></option>
                                </select>
                            </div>
                            <div class="w25 margin-right">
                                <button class="bg-topaz" ng-click="addSchedule(popup,view.schedule_day_night_off,'light/turn_off',true,view.selected_group)" style="width:100%; padding:0.8rem 0 0.8rem 0;">Add</button>
                            </div>
                        </div>
                    </div>
                    <div class="w33 s100 top margin-right">
                        <p class="margin-top">Auto Turn off</p>
                        <div class="container">
                            <div class="w75 margin-right">
                                <select ng-model="view.schedule_auto_off">
                                    <option ng-repeat="auto in ['1','5','10','15','20','30','40','50','60']" ng-bind="auto" value="{{auto}}"></option>
                                </select>
                            </div>
                            <div class="w25 margin-right">
                                <button class="bg-topaz" ng-click="addSchedule(popup,view.schedule_auto_off,'auto_off',true,view.selected_group)" style="width:100%; padding:0.8rem 0 0.8rem 0;">Add</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="padding1-bottom">
                    <div class="table">
                        <div class="row border-bottom">
                            <div class="cell">Trigger</div>
                            <div class="cell">Action</div>
                            <div class="cell" style="width:15%">Brightness</div>
                            <div class="cell" style="width:15%">Color</div>
                            <div class="cell text-right" style="width:15%">Remove</div>
                        </div>
                        <div class="row" ng-repeat="event in schedule_index[popup.entity_id] | orderBy:'time' track by $index" ng-click="toggle(event.entity,event.action)">
                            <div class="cell" ng-bind="event.time | parse_time"></div>
                            <div class="cell" ng-bind="event.action"></div>
                            <div class="cell" ng-bind="event.entity.attributes.brightness"></div>
                            <div class="cell" ng-bind="event.entity.attributes.color_temp"></div>
                            <div class="cell text-right clickable" ng-click="delSchedule(event.entity_id,event.time)">&times;</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<div ng-show="view.page == 'camera'" class="vh100 vw100 overflow-hidden">
    <img ng-if="popup.attributes.entity_picture && !match(popup.attributes.entity_picture,'mjpg|mjpeg')" class="stream" ng-src="{{popup.attributes.entity_picture}}&t=" onload='setTimeout(function() {src = src.substring(0, (src.lastIndexOf("t=")+2))+(new Date()).getTime()}, 2000)' onerror='setTimeout(function() {src = src.substring(0, (src.lastIndexOf("t=")+2))+(new Date()).getTime()}, 5000)' alt='' />
    <img ng-if="popup.attributes.entity_picture && match(popup.attributes.entity_picture,'mjpg|mjpeg')" ng-src="{{popup.attributes.entity_picture}}"/>
    <button ng-click="view.page = 'control'">Close</button>
</div>


        <div ng-show="view.page == 'settings'" class="vh100 vw100 overflow-hidden" ng-init="view.settings_page = 'connect'">
    <div class="fixed bottom right layer-top padding2 mobile-show">
        <button class="bg-emerald" ng-show="saved">&#10003;</button> <button class="bg-emerald" ng-click="save()">Save</button> <button class="bg-dark-grey" ng-click="closeSettings()" ng-if="settings.server_url">&times;</button> <button class="bg-dark-grey" ng-if="!settings || !settings.server_url" ng-click="view.page = 'initsettings'">&times;</button>
    </div>
    <div class="container">

        <div class="w100 mobile-show overflow-x text-left big bold700 padding2 border-bottom">

            <a ng-click="view.settings_page = 'connect'" ng-class="{'text-white':view.settings_page == 'connect'}" class="inline-block margin-right">Connection</a>
            <a ng-click="view.settings_page = 'settings'" ng-class="{'text-white':view.settings_page == 'settings'}" class="inline-block margin-right">Settings</a>
            <a ng-click="view.settings_page = 'background'" ng-class="{'text-white':view.settings_page == 'background'}" class="inline-block margin-right">Background</a>
            <a ng-click="view.settings_page = 'weather'" ng-class="{'text-white':view.settings_page == 'weather'}" class="inline-block margin-right">Weather</a>
            <a ng-click="makeExport();view.settings_page = 'export'" ng-class="{'text-white':view.settings_page == 'export'}" class="inline-block margin-right">Export</a>
            <a ng-click="view.settings_page = 'reset'" ng-class="{'text-white':view.settings_page == 'reset'}" class="inline-block margin-right">Reset</a>

        </div>
        <div class="w20 vh100 mobile-hide menu overflow-y text-right big bold700 border-right padding2-right padding1-top">

            <a ng-click="view.settings_page = 'connect'" ng-class="{'text-white':view.settings_page == 'connect'}">Connection</a>
            <a ng-click="view.settings_page = 'settings'" ng-class="{'text-white':view.settings_page == 'settings'}">Settings</a>
            <a ng-click="view.settings_page = 'background'" ng-class="{'text-white':view.settings_page == 'background'}">Background</a>
            <a ng-click="view.settings_page = 'weather'" ng-class="{'text-white':view.settings_page == 'weather'}">Weather</a>
            <a ng-click="makeExport();view.settings_page = 'export'" ng-class="{'text-white':view.settings_page == 'export'}">Export</a>
            <br><br>
            <a ng-click="view.settings_page = 'reset'" ng-class="{'text-white':view.settings_page == 'reset'}">Reset</a>
            <br><br>
            <a ng-click="save()" class="text-green" ng-class="{'text-white':view.settings_page == 'reset'}"><span ng-show="saved">&#10003;&nbsp;&nbsp;&nbsp;</span>Save</a>
            <a ng-click="closeSettings()" ng-class="{'text-white':view.settings_page == 'weather'}">Close</a>

        </div>
        <div class="w50 m80 s100 overflow-y text-left padding2-x padding2-top padding5-bottom settings-pages">
            <div ng-show="view.settings_page == 'connect'">
                <h3 class="margin-bottom">Connect</h3>
                <p class="w75 padding2-bottom" style="margin:0">Enter your Home Assistant server hostname or IP address, including the port number below. If you have set a password for your API access, add this below too.</p>

                <label>Server URL</label>
                <input type="text" ng-model="settings.server_url">
                <label>API Password</label>
                <input type="password" ng-model="settings.server_api_password">
                <button class="margin-top bg-topaz" ng-click="connect();view.page='loading'"><i class="fas fa-plug margin-right"></i>Connect</button>
            </div>

            <div ng-show="view.settings_page == 'weather'">
                <h3 class="margin-bottom">Weather</h3>
                <p class="w75 padding2-bottom" style="margin:0">The Control Panel can display the weather, or room temperature if you have these entities setup on Home Assistant.</p><br>

                <label>Temperature Entity / Room Temperature Entity</label>
                <select ng-model="settings.weather.temp">
                    <option ng-repeat="entity in entities | filter:'sensor' | orderBy:'entity_id'" ng-value="entity.entity_id" ng-bind="entity.entity_id"></option>
                </select>

                <label>Condition Entity</label>
                <select ng-model="settings.weather.condition">
                    <option ng-repeat="entity in entities | filter:'sensor' | orderBy:'entity_id'" ng-value="entity.entity_id" ng-bind="entity.entity_id"></option>
                </select>

                <label>Precipitation Entity</label>
                <select ng-model="settings.weather.precipitation">
                    <option ng-repeat="entity in entities | filter:'sensor' | orderBy:'entity_id'" ng-value="entity.entity_id" ng-bind="entity.entity_id"></option>
                </select>

                <label>Weather Condition Background Images</label><br>
                <div class="w20">
                    <input id="check-weather-pic" type="checkbox" ng-model="settings.weather.show_bg" class="switch off-on"><label for="check-weather-pic"></label>
                </div>
            </div>

            <div ng-show="view.settings_page == 'settings'">

                <h3 class="margin-bottom">Edit Mode</h3>
                <p class="w75 padding2-bottom" style="margin:0">Enable this option to edit your control panel entities</p>
                <div class="container">
                    <div class="w50 s100 margin-right">
                        <label>Edit Mode</label><br>
                        <input id="check-edit" type="checkbox" ng-model="settings.edit_mode_chk" ng-click="toggleEditMode()" class="switch off-on"><label for="check-edit"></label>
                    </div>
                </div>

                <h3 class="padding-top margin-bottom">Notifications</h3>
                <div class="container margin-bottom">
                    <div class="w50 s100 margin-right">
                        <label>Notifications</label><br>
                        <input id="check-notification" type="checkbox" ng-model="settings.notifications.show" class="switch off-on"><label for="check-notification"></label>
                    </div>
                    <div class="w50 s100 margin-right">
                        <label>Auto Dismiss</label><br>
                        <input id="check-dismiss" type="checkbox" ng-model="settings.notifications.auto_dismiss" class="switch off-on"><label for="check-dismiss"></label>
                    </div>
                </div>
                <label>Auto Dismiss Timeout</label>
                <input type="text" ng-model="settings.notifications.timeout">

                <h3 class="padding-top margin-top margin-bottom">Entity Buttons</h3>
                <div class="container mobile-hide">
                    <div class="w33 s100 margin-right">
                        <input id="radio-reg" type="radio" name="buttons" ng-click="buttonSize('8vw')" ng-checked="!settings.button_size || settings.button_size == '8vw'"><label for="radio-reg">Regular</label>
                    </div>
                    <div class="w33 s100 margin-right">
                        <input id="radio-large" type="radio" name="buttons" ng-click="buttonSize('9.5vw')" ng-checked="settings.button_size == '9.5vw'"><label for="radio-large">Large</label>
                    </div>
                    <div class="w33 s100 margin-right">
                        <input id="radio-ex-large" type="radio" name="buttons" ng-click="buttonSize('10.5vw')" ng-checked="settings.button_size == '10.5vw'"><label for="radio-ex-large">Extra Large</label>
                    </div>
                </div>
                <div class="container mobile-show">
                    <div class="w50 s100 margin-right">
                        <input id="radio-mob-reg" type="radio" name="buttons" ng-click="buttonSize('25vw')" ng-checked="settings.button_size == '25vw'"><label for="radio-mob-reg">Regular</label>
                    </div>
                    <div class="w50 s100 margin-right">
                        <input id="radio-mob-large" type="radio" name="buttons" ng-click="buttonSize('29vw')" ng-checked="settings.button_size == '29vw'"><label for="radio-mob-large">Large</label>
                    </div>
                </div>
                <h3 class="padding-top margin-bottom">Debug Mode</h3>
                <p class="w75 padding2-bottom" style="margin:0">Enable this option to show events and logs in the notification area</p>
                <div class="container">
                    <div class="w50 s100 margin-right">
                        <label>Debug Mode</label><br>
                        <input id="check-debug" type="checkbox" ng-model="settings.debug" ng-click="notification = {};" class="switch off-on"><label for="check-debug"></label>
                    </div>
                    <div class="w50 s100 margin-right">
                        <label>Sun Events</label><br>
                        <input id="check-sun-events" type="checkbox" ng-model="settings.debug_sun_events" class="switch off-on"><label for="check-sun-events"></label><br>
                    </div>
                </div>

            </div>

            <div ng-show="view.settings_page == 'background'">
                <h3 class="margin-bottom">Background</h3>
                <label>Background Image URL</label>
                <input type="text" ng-model="settings.background" ng-keyup="settings.background_color=''">
                <label>Background Color</label>
                <div class="container">
                    <div class="w20 s50 square margin bg-topaz clickable" ng-click="settings.background_color = 'bg-topaz bg-color';settings.background = ''">
                    </div>
                    <div class="w20 s50 square margin bg-emerald clickable" ng-click="settings.background_color = 'bg-emerald bg-color';settings.background = ''">
                    </div>
                    <div class="w20 s50 square margin bg-puse clickable" ng-click="settings.background_color = 'bg-puse bg-color';settings.background = ''">
                    </div>
                    <div class="w20 s50 square margin bg-ruby clickable" ng-click="settings.background_color = 'bg-ruby bg-color';settings.background = ''">
                    </div>
                    <div class="w20 s50 square margin bg-black clickable" ng-click="settings.background_color = 'bg-black bg-color';settings.background = ''">
                    </div>
                    <div class="w20 s50 square margin bg-red clickable" ng-click="settings.background_color = 'bg-red bg-color';settings.background = ''">
                    </div>
                    <div class="w20 s50 square margin bg-green clickable" ng-click="settings.background_color = 'bg-green bg-color';settings.background = ''">
                    </div>
                    <div class="w20 s50 square margin bg-blue clickable" ng-click="settings.background_color = 'bg-blue bg-color';settings.background = ''">
                    </div>
                    <div class="w20 s50 square margin bg-dark-grey clickable" ng-click="settings.background_color = 'bg-dark-grey bg-color';settings.background = ''">
                    </div>
                    <div class="w20 s50 square margin bg-white clickable" ng-click="settings.background_color = 'bg-white bg-color';settings.background = ''">
                    </div>
                </div>
                <div class="container">
                    <div class="w20 s50 square margin clickable"
                        ng-repeat="i in [1,2,3,4,5,6,7,8,9,10,11,12,13,14]"
                        ng-click="settings.background_color = '';settings.background = 'https://reformedreality.com/media/1920/75/hacp-bg/bg-'+i+'.jpg'"
                        style="background-image:url(https://reformedreality.com/media/300/40/hacp-bg/bg-{{i}}.jpg)"
                    >
                    </div>
                </div>
            </div>

            <div ng-show="view.settings_page == 'reset'">
                <h3 class="margin-bottom">Reset</h3>
                <button class="w100 bg-ruby" ng-click="resetSettings('settings')">Reset Settings</button><br>
                <button class="w100 bg-ruby" ng-click="resetSettings('custom_groups')">Reset Groups</button><br>
                <button class="w100 bg-ruby" ng-click="resetSettings('custom_entities')">Delete Custom Entities</button><br>
                <button class="w100 bg-ruby" ng-click="resetSettings('automations')">Reset Automations</button><br><br>
                <button class="w100 bg-red" ng-click="resetSettings('all')">Reset All</button>
            </div>

            <div ng-show="view.settings_page == 'export'">
                <h3 class="margin-bottom">Export</h3>
                <p class="w75 padding2-bottom" style="margin:0">Use the copy button below to copy your config to your devices clipboard. You can then transfer the config, via email, dropbox or pastebin to another Control Panel</p>
                <textarea id="export" class="h25" ng-model="settings_export"></textarea>
                <button class="bg-topaz" onclick="copyText = document.getElementById('export');copyText.select();document.execCommand('copy');alert('Copied to Clipboard')"><i class="fas fa-copy margin-right"></i>Copy</button>
                <h3 class="padding-top margin-bottom">Import</h3>
                <p class="w75 padding2-bottom" style="margin:0">Paste a config below to import into this Control Panel</p>

                <textarea id="import" class="h25" ng-model="settings_import"></textarea>
                <button class="bg-topaz" ng-show="settings_import.length>0" ng-click="importSettings()"><i class="fas fa-download margin-right"></i>Import</button>
                <button ng-show="!settings_import"><i class="fas fa-download margin-right"></i>Import</button>
            </div>

        </div>
    </div>

</div>


        <div ng-show="view.page == 'control'">
    <div class="header padding2 bg-weather-{{events.weather}}" ng-class="{'no-bg-weather':settings.weather.show_bg === false}">
        <div class="container layer3">
            <div class="w40 s100 top text-left">
                <h1 class="capitalize padding1-bottom"><span ng-bind="clock | date:'EEE, d'"></span><span ng-bind="clock | date:'d' | ordinal" class="lowercase"></span> <span ng-bind="clock | date:'MMMM'"></span></h1>
                <div class="row">
                    <div class="w50 top">
                        <h3 ng-bind="clock | date:'HH:mm'"></h3>
                    </div>
                    <div class="w50 top hidden hidden-m text-right" ng-show="entity[settings.weather.temp].state">
                        <h3><span ng-bind="entity[settings.weather.temp].state"></span><span ng-bind="entity[settings.weather.temp].attributes.unit_of_measurement"></span></h3>
                    </div>
                </div>
            </div>
            <div class="w60 hidden-s top text-right" ng-show="view.top_right == 'weather'">
                <h1 class="capitalize padding1-bottom" ng-show="entity[settings.weather.temp].state"><span ng-bind="entity[settings.weather.temp].state"></span><span ng-bind="entity[settings.weather.temp].attributes.unit_of_measurement"></span> <span ng-show="settings.weather.condition" ng-bind="entity[settings.weather.condition].state"></span></h1>
                <h3 ng-show="settings.weather.precipitation && settings.weather.condition">
                    <span ng-hide="match(events.weather,'rain|snow')">
                        <span ng-show="entity[settings.weather.precipitation].state > 95">It's going to <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span> later</span>
                        <span ng-show="entity[settings.weather.precipitation].state > 75 && entity[settings.weather.precipitation].state <= 95">Strong chance of <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span></span>
                        <span ng-show="entity[settings.weather.precipitation].state > 50 && entity[settings.weather.precipitation].state <= 75">Good chance of <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span></span>
                        <span ng-show="entity[settings.weather.precipitation].state > 25 && entity[settings.weather.precipitation].state <= 50">Small chance of <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span></span>
                        <span ng-show="entity[settings.weather.precipitation].state > 5 && entity[settings.weather.precipitation].state <= 25">It's unlikely to <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span></span>
                        <span ng-show="entity[settings.weather.precipitation].state <= 5">No <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span> forecast</span>
                    </span>
                    <span ng-show="match(events.weather,'rain|snow')">
                        <span ng-show="entity[settings.weather.precipitation].state > 95">The <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span> is going to keep coming</span>
                        <span ng-show="entity[settings.weather.precipitation].state > 75 && entity[settings.weather.precipitation].state <= 95">Likely this <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span> will be on for a while</span>
                        <span ng-show="entity[settings.weather.precipitation].state > 50 && entity[settings.weather.precipitation].state <= 75">Chance this <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span> might ease up soon</span>
                        <span ng-show="entity[settings.weather.precipitation].state > 25 && entity[settings.weather.precipitation].state <= 50">Looks like this <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span> will stop soon</span>
                        <span ng-show="entity[settings.weather.precipitation].state > 5 && entity[settings.weather.precipitation].state <= 25">The <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span> will stop very soon</span>
                        <span ng-show="entity[settings.weather.precipitation].state <= 5">No <span ng-show="match(entity[settings.weather.condition].state,'snow')">snow</span><span ng-hide="match(entity[settings.weather.condition].state,'snow')">rain</span> forecast after this shower</span>
                    </span>
                </h3>
            </div>
            <div class="w60 top text-right" ng-show="view.top_right == 'notification'">
                <h1 class="capitalize padding1-bottom"><span ng-bind="notification.title"></span></h1>
                <h3 ng-bind="notification.message"></h3>
                <h3 ng-bind="notification.time | date:'HH:mm:ss'"></h3>
            </div>
            <div class="w60 top text-right debug" ng-show="view.top_right == 'debug'">
                <div class="container">
                    <div class="w50 top text-left margin-right">

                        <h3 class="float-right"><span ng-bind="local_notification.time | date:'HH:mm:ss'"></span> <span ng-bind="local_notification.status"></span></h3>
                        <h1 class="margin-bottom border-bottom padding1-bottom">Local Events</h1>
                        <h1 class="padding1-bottom"><span ng-bind="local_notification.title"></span></h1>
                        <h3 class="padding1-bottom" ng-bind="local_notification.message"></h3>
                    </div>
                    <div class="w50 top text-left margin-right">
                        <h3 class="float-right" ng-bind="debug_notification.time | date:'HH:mm:ss'"></h3>
                        <h1 class="margin-bottom border-bottom padding1-bottom">WebSocket Events</h1>
                        <h1 class="padding1-bottom"><span ng-bind="debug_notification.title"></span></h1>
                        <h3 class="padding1-bottom" ng-bind="debug_notification.message"></h3>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="controls overflow-x layer-top">

        <div class="group" ng-repeat="group in groups | orderBy:'order' track by $index" ng-hide="group.view == false;">
            <div class="heading">
                <p class="bold600 capitalize" ng-bind="group.entity_id" ng-hide="group.attributes.friendly_name"></p>
                <p class="bold600 capitalize" ng-bind="group.attributes.friendly_name" ng-show="group.attributes.friendly_name"></p>
                <div class="container" ng-show="view.edit_mode == 1" >
                    <div class="w33 text-left" ng-click="movePage(group.entity_id,-3)"><i class="fas fa-chevron-circle-left"></i></div>
                    <div class="w33 text-center" ng-click="deletePage(group.entity_id)">Delete</div>
                    <div class="w33 text-right" ng-click="movePage(group.entity_id,3)"><i class="fas fa-chevron-circle-right"></i></div>
                </div>
            </div>
            <div class="groups padding2">
                <div class="grid{{group.attributes.entity_id.length+view.edit_mode+view.button_size}}">

                    <div class="entity {{entity[ent].state}} {{ent | getType}}" ng-repeat="ent in group.attributes.entity_id | orderBy:ent track by $index" ng-if="ent" ng-click="toggle(entity[ent],false,group.entity_id,group)" on-long-press="showEntity(entity[ent],group.entity_id)" style="background-image:url({{settings.server_url}}{{entity[ent].attributes.entity_picture}})">
                        <p class="name capitalize" ng-bind="entity[ent].attributes.friendly_name"></p>
                        <p class="state" ng-bind="entity[ent].state"></p>
                        <p class="value" class="capitalize" ng-show="match(entity[ent].entity_id,'sensor')"><span ng-bind="entity[ent].state"></span><span ng-bind="entity[ent].attributes.unit_of_measurement"></span></p>
                        <div class="media-controls"><i class="fas fa-pause" ng-show="entity[ent].state == 'playing'"></i><i class="fas fa-play" ng-show="entity[ent].state == 'paused' || entity[ent].state == 'idle'"></i></div>
                        <img ng-if="entity[ent].attributes.entity_picture && !match(entity[ent].attributes.entity_picture,'mjpg|mjpeg')" class="stream" ng-src="{{entity[ent].attributes.entity_picture}}&t=" onload='setTimeout(function() {src = src.substring(0, (src.lastIndexOf("t=")+2))+(new Date()).getTime()}, 2000)' onerror='setTimeout(function() {src = src.substring(0, (src.lastIndexOf("t=")+2))+(new Date()).getTime()}, 5000)' alt='' />
                        <img ng-if="entity[ent].attributes.entity_picture && match(entity[ent].attributes.entity_picture,'mjpg|mjpeg')" class="stream" ng-src="{{entity[ent].attributes.entity_picture}}"/>
                    </div>

                    <div class="entity padding1 {{settings.buttons}} sensor" ng-click="view.page = 'select_entity';view.selected_group = $index" ng-show="view.edit_mode == 1">
                        <i class="fas fa-plus"></i>
                    </div>

                </div>
            </div>
        </div>

    </div>
    <div class="settings-icon layer-top">
        <a ng-show="view.edit_mode == 1" ng-click="newPage()" style="margin-right:2em"><i class="fas fa-plus"></i></a> <a ng-click="view.page = 'settings'" on-long-press="toggleEditMode()"><i class="fas fa-cog"></i></a>
    </div>
</div>

<div class="vh100 vw100 padding2 text-left" ng-show="view.page == 'select_entityss'">
    <div class="w75 s100 padding1-bottom">
        <h3>Add an Entity</h3>
        <p>Use the search below or select an entity to add it to your group. You can also create custom entities using the options.</p>
    </div><div class="w25 s100 padding1-bottom text-right">
        <button class="bg-topaz" ng-click="view.page = 'control'">Close</button>
    </div>
    <div class="container overflow-x padding2-bottom">
        <div class="w33 top padding-right">
            <input type="text" ng-model="view.temp_entity_search" ng-keyup="entitySearch()" placeholder="Quick Search">
            <button ng-click="addEntity(view.selected_group, view.selected_entities)" class="bg-topaz" ng-show="view.selected_entities.length > 0">Add  <span ng-show="view.selected_entities.length > 1">Entities</span><span ng-hide="view.selected_entities.length > 1">Entity</span></button>
            <button onclick="alert('Select the entities for your group')" ng-hide="view.selected_entities.length > 0">Add <span ng-show="view.selected_entities.length > 1">Entities</span><span ng-hide="view.selected_entities.length > 1">Entity</span></button>
        </div>
        <div class="w33 top padding-right">
            <input type="text" ng-model="view.new_camera_name" placeholder="Camera Name">
            <input type="text" ng-model="view.new_camera_url" placeholder="Camera URL">
            <button ng-click="addCustomEntity('camera',view.selected_group)" class="bg-topaz">Add a Camera</button>
        </div>
        <div class="w33 top padding-right">
            <input type="text" ng-model="view.new_ent_group_name" placeholder="Entity Group Name">
            <button ng-click="addCustomEntity('entity_group',view.selected_group)" class="bg-topaz" ng-show="view.selected_entities.length > 0">Create Entity Group</button>
            <button onclick="alert('Select the entities for your scene')" ng-hide="view.selected_entities.length > 0">Create Entity Group</button>
        </div>
        <div class="w33 top padding-right">
            <input type="text" ng-model="view.new_scene_name" placeholder="Scene Name">
            <button ng-click="addCustomEntity('custom_scene',view.selected_group)" class="bg-topaz" ng-show="view.selected_entities.length > 0">Create Scene</button>
            <button onclick="alert('Select the entities for your scene')" ng-hide="view.selected_entities.length > 0">Create Scene</button>
        </div>
    </div>
    <div class="grid overflow-y" style="height:calc(100% - 10em)">
        <div class="entity {{settings.buttons}} {{entity[ent.entity_id].state}}" ng-class="{glow:inArray(ent.entity_id,view.selected_entities)}" ng-repeat="ent in entities | filter:view.entity_search" ng-click="selectEntity(ent.entity_id)">
            <p class="name" ng-show="entity[ent.entity_id].attributes.friendly_name"><span ng-bind="entity[ent.entity_id].attributes.friendly_name | limitTo: 20"></span><span ng-show="entity[ent.entity_id].attributes.friendly_name.length>20">...</span></p>
            <p class="name" ng-bind="entity[ent.entity_id].entity_id" ng-hide="entity[ent.entity_id].attributes.friendly_name"></p>
            <p class="value transparent1" class="capitalize" ng-bind="ent.entity_id | getType"></p>
            <div class="controls"><i class="fas fa-pause" ng-show="entity[ent.entity_id].state == 'playing'"></i><i class="fas fa-play" ng-show="entity[ent.entity_id].state == 'paused' || entity[ent.entity_id].state == 'idle'"></i></div>
        </div>
    </div>
</div>


        <div ng-show="view.page == 'select_entity'" class="vh100 vw100 overflow-hidden" ng-init="view.entity_page = 'add';view.entity_page_list=true">
    <div class="fixed bottom right layer-top padding2 mobile-show">
        <button class="bg-dark-grey" ng-click="view.page = 'control'" ng-if="settings.server_url">&times;</button>
    </div>
    <div class="container">

        <div class="w100 mobile-show overflow-x text-left big bold700 padding2 border-bottom">

            <a ng-click="view.entity_page = 'add';view.entity_page_list=true;view.entity_group_list=false;" ng-class="{'text-white':view.entity_page == 'add'}">Add Entities</a>
            <a ng-click="view.entity_page = 'scene';view.entity_page_list=false;view.entity_group_list=true;" ng-class="{'text-white':view.entity_page == 'scene'}">Create Scene</a>
            <a ng-click="view.entity_page = 'camera';view.entity_page_list=false;view.entity_group_list=true;" ng-class="{'text-white':view.entity_page == 'camera'}">Add Camera</a>

        </div>
        <div class="w20 vh100 mobile-hide menu overflow-y text-right big bold700 border-right padding2-right padding1-top">

            <a ng-click="view.entity_page = 'add';view.entity_page_list=true;view.entity_group_list=false;" ng-class="{'text-white':view.entity_page == 'add'}">Add Entities</a>
            <a ng-click="view.entity_page = 'scene';view.entity_page_list=false;view.entity_group_list=true;" ng-class="{'text-white':view.entity_page == 'scene'}">Create Scene</a>
            <a ng-click="view.entity_page = 'camera';view.entity_page_list=false;view.entity_group_list=false;" ng-class="{'text-white':view.entity_page == 'camera'}">Add Camera</a>
            <br><br>
            <a ng-click="view.page = 'control'">Close</a>

        </div>
        <div class="w75 m75 s100 overflow-y text-left padding2-x padding2-top padding5-bottom settings-pages">
            <div ng-if="view.entity_page == 'add'">

                <h3 class="margin-bottom">Add an Entity</h3>
                <p class="w60 padding2-bottom" style="margin:0">Select the entities you'd like to add to this group, and click 'Add'</p>
                <input type="text" ng-model="view.temp_entity_search" ng-keyup="entitySearch()" placeholder="Quick Search">
                <button ng-click="addEntity(view.selected_group, view.selected_entities)" class="bg-topaz" ng-show="view.selected_entities.length > 0">Add&nbsp;<span ng-show="view.selected_entities.length > 1">Entities</span><span ng-hide="view.selected_entities.length > 1">Entity</span></button>
                <button onclick="alert('Select the entities for your group')" ng-hide="view.selected_entities.length > 0">Add&nbsp;<span ng-show="view.selected_entities.length > 1">Entities</span><span ng-hide="view.selected_entities.length > 1">Entity</span></button>

                <div class="grid25 padding-top entity-list">
                    <div class="entity {{settings.buttons}}" ng-class="{on:inArray(ent.entity_id,view.selected_entities)}" ng-repeat="ent in entities | filter:view.entity_search | orderBy:'entity_id'" ng-click="selectEntity(ent.entity_id)">
                        <p class="name" ng-show="entity[ent.entity_id].attributes.friendly_name"><span ng-bind="entity[ent.entity_id].attributes.friendly_name | limitTo: 20"></span><span ng-show="entity[ent.entity_id].attributes.friendly_name.length>20">...</span></p>
                        <p class="name" ng-bind="entity[ent.entity_id].entity_id" ng-hide="entity[ent.entity_id].attributes.friendly_name"></p>
                        <p class="value transparent1" class="capitalize" ng-bind="ent.entity_id | getType"></p>
                    </div>
                </div>

            </div>

            <div ng-if="view.entity_page == 'scene'">

                <h3 class="margin-bottom">Create Scene</h3>
                <p class="w60 padding2-bottom" style="margin:0">This page will create a scene button in the selected group. To get you started it'll create a scene using the current entity states. Just give the scene a name and click 'Add'. To edit a custom scene, long press on a scene button from the main page.<br><br>These custom scenes are separate to any scenes you may have on Home Assistant.</p>
                <input type="text" ng-model="view.new_scene_name" placeholder="Scene Name">
                <button ng-click="addCustomEntity('custom_scene',view.selected_group)" class="bg-topaz">Create Scene</button>

                <p class="bold pt-3">Entities that will be included in this scene</p>
                <div class="grid25 pt-1 entity-list">
                    <div class="entity {{settings.buttons}} {{ent | getType}}" ng-repeat="ent in groups[view.selected_group].attributes.entity_id | orderBy:ent track by $index" ng-if="ent && !match(ent,'custom_scene')" style="background-image:url({{settings.server_url}}{{entity[ent].attributes.entity_picture}})">
                        <p class="name capitalize" ng-bind="entity[ent].attributes.friendly_name"></p>
                        <p class="state" ng-bind="entity[ent].state"></p>
                        <p class="value" class="capitalize" ng-show="match(entity[ent].entity_id,'sensor')"><span ng-bind="entity[ent].state"></span><span ng-bind="entity[ent].attributes.unit_of_measurement"></span></p>
                        <img ng-if="entity[ent].attributes.entity_picture" class="stream" ng-src="{{entity[ent].attributes.entity_picture}}&t=" onload='setTimeout(function() {src = src.substring(0, (src.lastIndexOf("t=")+2))+(new Date()).getTime()}, 2000)' onerror='setTimeout(function() {src = src.substring(0, (src.lastIndexOf("t=")+2))+(new Date()).getTime()}, 5000)' alt='' />
                    </div>
                    <div class="entity padding1 {{settings.buttons}} sensor" ng-click="view.entity_page = 'add'">
                        <i class="fas fa-plus"></i>
                    </div>
                </div>

            </div>

            <div ng-if="view.entity_page == 'camera'">

                <h3 class="margin-bottom">Add Camera</h3>
                <p class="w60 padding2-bottom" style="margin:0">This will add a camera to the selected group. Please be advised that this feature is still in beta, and camera support may be patchy.</p>
                <input type="text" ng-model="view.new_camera_name" placeholder="Camera Name">
                <input type="text" ng-model="view.new_camera_url" placeholder="Camera Image URL">
                <button ng-click="addCustomEntity('camera',view.selected_group)" class="bg-topaz">Add Camera</button>

            </div>


        </div>
    </div>
</div>

    </div>

    <script>
        document.write('<style>.move-up{opacity: 0;transform: translate(0px, 20px)}.move-left {opacity: 0;transform: translate(20px, 0px)}.move-right {opacity: 0;transform: translate(-20px, 0px)}</style>');
{"use strict";let StickyStack={mobileBreak:768,list:[],number:0,stackTop:0,init:function(){StickyStack.stopObserving();for(let i=0;i<StickyStack.number;i++){let placeholder=StickyStack.list[i].placeholder;let currElement=StickyStack.list[i].element;placeholder.parentNode.removeChild(placeholder);StickyStack.removeClass(currElement,'stickystack-stuck');currElement.style.position=null;currElement.style.top=null;currElement.style.left=null;currElement.style.width=null;currElement.style.marginTop=null;currElement.style.marginBottom=null;}
StickyStack.number=0
let elementList=document.getElementsByClassName('js-stickystack');if(window.innerWidth<=StickyStack.mobileBreak){let newElementList=[];for(let i=0;i<elementList.length;i++){if(!StickyStack.hasClass(elementList[i],'js-stickystack-nomobile')){newElementList.push(elementList[i]);}}
elementList=newElementList;}
StickyStack.number=elementList.length;StickyStack.list=[];StickyStack.stackTop=0;for(let i=0;i<StickyStack.number;i++){let style=window.getComputedStyle(elementList[i]);let placeholderElement=document.createElement('div');placeholderElement.style.width=style.getPropertyValue("width");placeholderElement.style.height=style.getPropertyValue("height");placeholderElement.style.top=style.getPropertyValue("top");placeholderElement.style.right=style.getPropertyValue("right");placeholderElement.style.bottom=style.getPropertyValue("bottom");placeholderElement.style.left=style.getPropertyValue("left");placeholderElement.style.margin=style.getPropertyValue("margin");placeholderElement.style.padding=style.getPropertyValue("padding");placeholderElement.style.border=style.getPropertyValue("border");placeholderElement.style.float=style.getPropertyValue("float");placeholderElement.style.clear=style.getPropertyValue("clear");placeholderElement.style.position=style.getPropertyValue("position");placeholderElement.style.display='none';placeholderElement.style.visibility='hidden';elementList[i].parentNode.insertBefore(placeholderElement,elementList[i]);let coords=StickyStack.getCoords(elementList[i]);StickyStack.list.push({element:elementList[i],top:coords.top,left:coords.left- parseFloat(style.getPropertyValue("margin-left")),width:parseFloat(style.getPropertyValue("width")),placeholder:placeholderElement,semistuck:StickyStack.hasClass(elementList[i],'js-stickystack-semi'),zIndex:100- i});}
StickyStack.list.sort(StickyStack.sortByTop);StickyStack.stackTop=0;elementList=document.getElementsByClassName('js-stickystack-top');for(let i=0;i<elementList.length;i++){let top=StickyStack.getCoords(elementList[i]).top;if(i==0){StickyStack.stackTop=top;}else{StickyStack.stackTop=Math.min(StickyStack.stackTop,top);}}
StickyStack.update();StickyStack.startObserving();},update:function(){let stack=[[StickyStack.stackTop,0,document.body.offsetWidth]];let pageOffset=window.pageYOffset;for(let i=0;i<StickyStack.number;i++){let curr=StickyStack.list[i];let currElement=curr.element;let currPlaceholder=curr.placeholder;let currLeft=curr.left;let currTop=curr.top- pageOffset;let currWidth=curr.width;let overlapData=StickyStack.getOverlap([currTop,currLeft,currWidth],stack);if(overlapData.overlap>0){currPlaceholder.style.display='inline-block';StickyStack.addClass(currElement,'stickystack-stuck');let scrollback=0;if(StickyStack.list[i].semistuck&&(i+1)<StickyStack.number){let tempStack=[[overlapData.absolute+ currElement.offsetHeight,currLeft,currWidth]];for(let j=i+ 1;j<StickyStack.number;j++){let testBlock=[StickyStack.list[j].top- pageOffset,StickyStack.list[j].left,StickyStack.list[j].width];let overlapSemiData=StickyStack.getOverlap(testBlock,tempStack);if(overlapSemiData.overlap>0){scrollback=overlapSemiData.overlap;break;}}}
currElement.style.position='fixed';currElement.style.top=overlapData.absolute- scrollback+'px';currElement.style.left=currLeft+'px';currElement.style.width=currWidth+'px';currElement.style.zIndex=curr.zIndex;currElement.style.marginTop=0;currElement.style.marginBottom=0;stack.push([overlapData.absolute+ currElement.offsetHeight- scrollback,currElement.offsetLeft,currElement.offsetWidth]);}else{StickyStack.removeClass(currElement,'stickystack-stuck');currElement.style.position=null;currElement.style.top=null;currElement.style.left=null;currElement.style.width=null;currElement.style.zIndex=null;currElement.style.marginTop=null;currElement.style.marginBottom=null;currPlaceholder.style.display='none';}}},startObserving:function(){if(!StickyStack.observer){let MutationObserver=window.MutationObserver||window.WebKitMutationObserver;StickyStack.observer=new MutationObserver(StickyStack.init);}else{StickyStack.observer.disconnect();}
StickyStack.observer.observe(document.body,{attributes:true,characterData:true,subtree:true});},stopObserving:function(){if(StickyStack.observer){StickyStack.observer.disconnect();}},getOverlap:function(block,stack){let overlap=0;let absolute=0;for(let i=0;i<stack.length;i++){if(block[0]<stack[i][0]&&(block[1]+ block[2]>stack[i][1]&&stack[i][1]+ stack[i][2]>block[1])){overlap=Math.max(overlap,stack[i][0]- block[0]);absolute=Math.max(absolute,stack[i][0]);}}
return{overlap:overlap,absolute:absolute};},sortByTop:function(a,b){return(a.top- b.top);},getCoords:function(el){let box=el.getBoundingClientRect();let body=document.body;let docEl=document.documentElement;let scrollTop=window.pageYOffset||docEl.scrollTop||body.scrollTop;let scrollLeft=window.pageXOffset||docEl.scrollLeft||body.scrollLeft;let clientTop=docEl.clientTop||body.clientTop||0;let clientLeft=docEl.clientLeft||body.clientLeft||0;let top=box.top+ scrollTop- clientTop;let left=box.left+ scrollLeft- clientLeft;return{top:Math.round(top),left:Math.round(left)};},hasClass:function(el,className){if(el.classList){return el.classList.contains(className);}else{return!!el.className.match(new RegExp('(\\s|^)'+ className+'(\\s|$)'));}},addClass:function(el,className){if(el.classList){el.classList.add(className);}else if(!StickyStack.hasClass(el,className)){el.className+=" "+ className;}},removeClass:function(el,className){if(el.classList){el.classList.remove(className);}else if(StickyStack.hasClass(el,className)){var reg=new RegExp('(\\s|^)'+ className+'(\\s|$)');el.className=el.className.replace(reg,' ');}}};window.addEventListener('DOMContentLoaded',StickyStack.init);window.addEventListener('load',StickyStack.init);window.addEventListener('resize',StickyStack.init);window.addEventListener('scroll',StickyStack.update);window.addEventListener('DOMContentLoaded',function(){setTimeout(function(){StickyStack.update();},500);});window.addEventListener('load',function(){setTimeout(function(){StickyStack.update();},500);});}
function setCookie(cname, cvalue, exdays) {var d = new Date();d.setTime(d.getTime() + (exdays*24*60*60*1000));var expires = "expires="+ d.toUTCString();document.cookie = cname + "=" + cvalue + "; " + expires;}
function getCookie(cname) {var name = cname + "=";var ca = document.cookie.split(';');for(var i = 0; i <ca.length; i++) {var c = ca[i];while (c.charAt(0)==' ') {c = c.substring(1);}if (c.indexOf(name) == 0) {return c.substring(name.length,c.length);}}return "";}
var document_containers = document.querySelectorAll("[class*='move']");var viewport_h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);for(var i = 0; i < document_containers.length; i++){if (document_containers[i].getBoundingClientRect().top<viewport_h){if (document_containers[i].classList && document_containers[i].classList.value && !document_containers[i].classList.value.match(/in-view/)){document_containers[i].className += " in-view";}}};window.addEventListener('scroll', function() {for(var i = 0; i < document_containers.length; i++){if (document_containers[i].getBoundingClientRect().top<viewport_h-150){if (document_containers[i].classList && document_containers[i].classList.value && !document_containers[i].classList.value.match(/in-view/)){document_containers[i].className += " in-view";}}}});
var document_navs = document.getElementsByClassName("nav");for (var i = 0; i < document_navs.length; i++) {document_navs[i].addEventListener('click', showNavLinks, false);};function showNavLinks() {this.classList.toggle("open");};
var document_nav_bars = document.getElementsByClassName("nav-bar");for (var i = 0; i < document_nav_bars.length; i++) {document_nav_bars[i].addEventListener('click', showNavBarLinks, false);};function showNavBarLinks() {this.classList.toggle("open");};
document.onclick = function(event){var hasParent = false;for(var node = event.target; node != document.body; node = node.parentNode){if(node && node.classList && node.classList.contains('nav') || node.classList.contains('nav-bar')){hasParent = true;break;}}if(hasParent){} else {for (var i = 0; i < document_navs.length; i++) {document_navs[i].classList.remove('open');}for (var i = 0; i < document_nav_bars.length; i++) {document_nav_bars[i].classList.remove('open');}}}
function initFH(){
    var fh_containers = document.querySelectorAll(".fixed-height");for (var i = 0; i < fh_containers.length; i++) {setHeight(fh_containers[i].children,fh_containers[i].offsetHeight);};
    var ch_height = 0;var card_headers = document.querySelectorAll(".card .header");for (var i = 0; i < card_headers.length; i++) {if(card_headers[i]&&card_headers[i].offsetHeight&&card_headers[i].offsetHeight>ch_height){ch_height=card_headers[i].offsetHeight} if(i>=card_headers.length-1){setHeight(card_headers,ch_height)}};
    var cb_height = 0;var card_bodies = document.querySelectorAll(".card .body");for (var i = 0; i < card_bodies.length; i++) {if(card_bodies[i]&&card_bodies[i].offsetHeight&&card_bodies[i].offsetHeight>cb_height){cb_height=card_bodies[i].offsetHeight} if(i>=card_bodies.length-1){setHeight(card_bodies,cb_height)}};
}
initFH();
function setHeight(nodes,height){for (var i=0;i<nodes.length;i++){console.log(document.documentElement.clientWidth);if(document.documentElement.clientWidth>850){nodes[i].style.height=height+'px';}}};
window.onresize = function(event) {
    var ch_height = 0;var card_headers = document.querySelectorAll(".card .header");for (var i = 0; i < card_headers.length; i++) {if(card_headers[i]&&card_headers[i].offsetHeight&&card_headers[i].offsetHeight>ch_height){ch_height=card_headers[i].offsetHeight} if(i>=card_headers.length-1){setHeight(card_headers,ch_height)}};
    var cb_height = 0;var card_bodies = document.querySelectorAll(".card .body");for (var i = 0; i < card_bodies.length; i++) {if(card_bodies[i]&&card_bodies[i].offsetHeight&&card_bodies[i].offsetHeight>cb_height){cb_height=card_bodies[i].offsetHeight} if(i>=card_bodies.length-1){setHeight(card_bodies,cb_height)}};
    var fh_containers = document.querySelectorAll(".fixed-height");for (var i = 0; i < fh_containers.length; i++) {setHeight(fh_containers[i].children,fh_containers[i].offsetHeight);};
};

        /* This comment need to fix syntax highlighting */
    </script>

</body>
</html>
